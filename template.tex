% Template:     Tesis LaTeX
% Documento:    Núcleo del template
% Versión:      2.4.1 (01/09/2021)
% Codificación: UTF-8
%
% Autor: Pablo Pizarro R.
%        pablo@ppizarror.com
%
% Manual template: [https://latex.ppizarror.com/tesis]
% Licencia MIT:    [https://opensource.org/licenses/MIT]

% -----------------------------------------------------------------------------
% CONFIGURACIONES
% -----------------------------------------------------------------------------
% Definiciones previas
\def\iitembcirc {\raisebox{.55\height}{\scriptsize$\bullet$}}
\def\iitembsquare {\raisebox{.3\height}{\tiny$\blacksquare$}}
\def\iitemdash {\raisebox{.35\height}{\textendash}}
\def\iitemcirc {\raisebox{.25\height}{\small$\circ$}}
\def\iitemdiamond {\raisebox{.25\height}{\small$\diamond$}}

% Ajustes usuario
\input{template_config}

% -----------------------------------------------------------------------------
% IMPORTACIÓN DE LIBRERÍAS
% -----------------------------------------------------------------------------
% Se guardan variables antes de cargar librerías
\let\RE\Re
\let\IM\Im

% Parches de librerías
\let\counterwithout\relax
\let\counterwithin\relax
\let\underbar\relax
\let\underline\relax

% Si se desactiva el idioma
\def\unaccentedoperators {}
\def\decimalpoint {}
\def\bibname {}

% Parche de sectsty.sty
\makeatletter
\def\underline#1{\relax\ifmmode\@@underline{#1}\else $\@@underline{\hbox{#1}}\m@th$\relax\fi}
\def\underbar#1{\underline{\sbox\tw@{#1}\dp\tw@\z@\box\tw@}}
\makeatother

% -----------------------------------------------------------------------------
% Librerías del núcleo
% -----------------------------------------------------------------------------
% Manejo de condicionales
\usepackage{ifthen}

% Carga el idioma
\ifthenelse{\equal{\usespanishbabel}{true}}{
	\usepackage[spanish,es-nosectiondot,es-lcroman,es-noquoting]{babel}}{
\ifthenelse{\equal{\useenglishbabel}{true}}{
	\usepackage[english]{babel}}{}
}

% Cambia el estilo de los títulos
\usepackage{sectsty}

% Codificación
\ifthenelse{\equal{\compilertype}{pdf2latex}}{
	\usepackage[utf8]{inputenc}}{
}

% Lanza un mensaje de error indicando mala configuración
%	#1	Parámetros opcionales (nostop,noheader)
%	#2	Mensaje de error
% 	#3	Configuración usada
%	#4	Valores esperados
\newcommand{\throwbadconfig}[4][]{
	\ifthenelse{\equal{#1}{noheader}}{
		\errmessage{LaTeX Warning: #4}
	}{
		\ifthenelse{\equal{#1}{noheader-nostop}}{
			\errmessage{LaTeX Warning: #4}
		}{
			\errmessage{LaTeX Warning: #2 (\noexpand #3= #3). Valores esperados: #4}
		}
	}
	\ifthenelse{\equal{#1}{nostop}}{}{
		\ifthenelse{\equal{#1}{noheader-nostop}}{}{
			\stop
		}
	}
}

% Librerías matemáticas
\ifthenelse{\equal{\equationleftalign}{true}}{
	\usepackage[fleqn]{amsmath}
}{
	\usepackage{amsmath}
}

% Tamaño de la fuente del documento
\usepackage{scrextend}
\usepackage{anyfontsize}
\changefontsizes{\documentfontsize pt}

% Evita error "Too many alphabets used in version normal"
\newcommand\hmmax {0}
\newcommand\bmmax {0}

% -----------------------------------------------------------------------------
% Librerías independientes
% -----------------------------------------------------------------------------
\usepackage{amssymb}       % Librerías matemáticas
\usepackage{amsthm}        % Definición de teoremas
\usepackage{array}         % Nuevas características a las tablas
\usepackage{bigstrut}      % Líneas horizontales en tablas
\usepackage{bm}            % Caracteres en negrita en ecuaciones
\usepackage{booktabs}      % Permite manejar elementos visuales en tablas
\usepackage{caption}       % Leyendas
\usepackage{changepage}    % Condicionales para administrar páginas
\usepackage{chngcntr}      % Añade números a las leyendas
\usepackage{color}         % Colores
\usepackage{datetime}      % Fechas
\usepackage{floatpag}      % Maneja números de páginas
\usepackage{floatrow}      % Permite administrar posiciones en los caption
\usepackage{framed}        % Permite creación de recuadros
\usepackage{gensymb}       % Simbología común
\usepackage{graphicx}      % Propiedades extra para los gráficos
\usepackage{lipsum}        % Permite crear párrafos de prueba
\usepackage{listings}      % Permite añadir código fuente
\usepackage{longtable}     % Permite utilizar tablas en varias hojas
\usepackage{mathtools}     % Permite utilizar notaciones matemáticas
\usepackage{multicol}      % Múltiples columnas
\usepackage{needspace}     % Maneja los espacios en página
\usepackage{pdflscape}     % Modo página horizontal de página
\usepackage{pdfpages}      % Permite administrar páginas en pdf
\usepackage{physics}       % Paquete de matemáticas
\usepackage{realboxes}     % Permite inserción de recuadros
\usepackage{rotating}      % Permite rotación de objetos
\usepackage{selinput}      % Compatibilidad con acentos
\usepackage{setspace}      % Cambia el espacio entre líneas
\usepackage{soul}          % Permite subrayar texto
\usepackage{subfig}        % Permite agrupar imágenes
\usepackage{textcomp}      % Simbología común
\usepackage{url}           % Permite añadir enlaces
\usepackage{wrapfig}       % Posición de imágenes
\usepackage{xspace}        % Administra espacios en párrafos y líneas

% -----------------------------------------------------------------------------
% Librerías con parámetros
% -----------------------------------------------------------------------------
\usepackage[makeroom]{cancel} % Cancelar términos en fórmulas
\usepackage[inline]{enumitem} % Permite enumerar ítems
\usepackage[subfigure,titles]{tocloft} % Maneja entradas en el índice
\usepackage[figure,table,lstlisting]{totalcount} % Contador de objetos
\usepackage[normalem]{ulem} % Permite tachar y subrayar
\usepackage[nointegrals]{wasysym} % Contiene caracteres misceláneos (v7.0.4)
\usepackage[dvipsnames,table,usenames]{xcolor} % Paquete de colores avanzado

% -----------------------------------------------------------------------------
% Librerías condicionales
% -----------------------------------------------------------------------------
% Imágenes en modo draft
\ifthenelse{\equal{\graphicxdraft}{true}}{
	\usepackage[
		allfiguresdraft,
		filename,
		size={scriptsize},
		style={tt}
	]{draftfigure}}{
}

% Acepta codificación UTF-8 en código fuente
\ifthenelse{\equal{\compilertype}{pdf2latex}}{
	\usepackage{listingsutf8}}{
}

% Regla superior
\ifthenelse{\equal{\footnotepagetoprule}{true}}{
	\usepackage[bottom,hang]{footmisc} % Estilo pie de página
}{
	\usepackage[bottom,norule,hang]{footmisc}
}

% Agrega punto a títulos/subtítulos
\ifthenelse{\equal{\showdotaftersnum}{true}}{
	\usepackage{secdot}
	\sectiondot{subsection}
	\sectiondot{subsubsection}}{
}

% Referencias
\usepackage[pdfencoding=auto,psdextra]{hyperref} % Enlaces, referencias
\ifthenelse{\equal{\stylecitereferences}{natbib}}{ % Formato citas natbib
	\usepackage[nottoc,notlof,notlot]{tocbibind}
	\ifthenelse{\equal{\natbibrefcitecompress}{true}}{
		\usepackage[sort&compress]{natbib}
	}{
		\usepackage{natbib}
	}
}{
\ifthenelse{\equal{\stylecitereferences}{apacite}}{ % Formato citas apacite
	\usepackage[nottoc,notlof,notlot]{tocbibind}
	\usepackage[nosectionbib]{apacite}
}{
\ifthenelse{\equal{\stylecitereferences}{bibtex}}{ % Formato citas bibtex
}{
\ifthenelse{\equal{\stylecitereferences}{custom}}{ % Formato citas custom
}{}}}
}

% Anexos/Apéndices
\ifthenelse{\equal{\showappendixsecindex}{true}}{
	\usepackage[toc]{appendix} % Eliminado en Auxiliares/Controles, sin [toc]
}{
	\usepackage{appendix}
}

% Dimensiones y geometría del documento
\ifthenelse{\equal{\compilertype}{lualatex}}{ % En lualatex sólo se puede cambiar 1 vez el margen
	\usepackage[top=\pagemargintop cm,bottom=\pagemarginbottom cm,margin=\pagemarginleft cm]{geometry}
}{ % pdf2latex, xelatex
	\usepackage{geometry}
}

% -----------------------------------------------------------------------------
% Librerías dependientes
% -----------------------------------------------------------------------------
\usepackage{bookmark}      % Administración de marcadores en pdf
\usepackage{fancyhdr}      % Encabezados y pie de páginas
\usepackage{float}         % Administrador de posiciones de objetos
\usepackage{hyperxmp}      % Etiquetas opcionales para el pdf compilado
\usepackage{multirow}      % Agrega nuevas opciones a las tablas
\usepackage{notoccite}     % Desactiva las citas en el índice
\usepackage{titlesec}      % Administración de títulos

% -----------------------------------------------------------------------------
% Tipografía del documento
% -----------------------------------------------------------------------------
% Tipografías clásicas
\ifthenelse{\equal{\fontdocument}{lmodern}}{
	\usepackage{lmodern}
}{
\ifthenelse{\equal{\fontdocument}{arial}}{
	\usepackage{helvet}
	\renewcommand{\familydefault}{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{arial2}}{
	\usepackage{arial}
}{
\ifthenelse{\equal{\fontdocument}{times}}{
	\usepackage{mathptmx}
}{
\ifthenelse{\equal{\fontdocument}{mathptmx}}{
	\usepackage{mathptmx}
}{
\ifthenelse{\equal{\fontdocument}{helvet}}{
	\renewcommand{\familydefault}{\sfdefault}
	\usepackage[scaled=0.95]{helvet}
	\usepackage[helvet]{sfmath}
}{
\ifthenelse{\equal{\fontdocument}{opensans}}{
	\usepackage[default,scale=0.95]{opensans}
}{
\ifthenelse{\equal{\fontdocument}{mathpazo}}{
	\usepackage{mathpazo}
}{
\ifthenelse{\equal{\fontdocument}{cambria}}{
	\usepackage{caladea}
}{
\ifthenelse{\equal{\fontdocument}{libertine}}{
	\usepackage[libertine]{newtxmath}
	\usepackage[tt=false]{libertine}
}{
\ifthenelse{\equal{\fontdocument}{custom}}{
}{

% Otros (último: fbb el 08/08/2021 - https://tug.org/FontCatalogue/seriffonts.html)
\ifthenelse{\equal{\fontdocument}{accanthis}}{
	\usepackage{accanthis}
}{
\ifthenelse{\equal{\fontdocument}{alegreya}}{
	\usepackage{Alegreya}
	\renewcommand*\oldstylenums[1]{{\AlegreyaOsF #1}}
}{
\ifthenelse{\equal{\fontdocument}{alegreyasans}}{
	\usepackage[sfdefault]{AlegreyaSans}
	\renewcommand*\oldstylenums[1]{{\AlegreyaSansOsF #1}}
}{
\ifthenelse{\equal{\fontdocument}{algolrevived}}{
	\usepackage{algolrevived}
}{
\ifthenelse{\equal{\fontdocument}{almendra}}{
	\usepackage{almendra}
}{
\ifthenelse{\equal{\fontdocument}{antpolt}}{
	\usepackage{antpolt}
}{
\ifthenelse{\equal{\fontdocument}{antpoltlight}}{
	\usepackage[light]{antpolt}
}{
\ifthenelse{\equal{\fontdocument}{anttor}}{
	\usepackage[math]{anttor}
}{
\ifthenelse{\equal{\fontdocument}{anttorcondensed}}{
	\usepackage[condensed,math]{anttor}
}{
\ifthenelse{\equal{\fontdocument}{anttorlight}}{
	\usepackage[light,math]{anttor}
}{
\ifthenelse{\equal{\fontdocument}{anttorlightcondensed}}{
	\usepackage[light,condensed,math]{anttor}
}{
\ifthenelse{\equal{\fontdocument}{arev}}{
	\let\quarternote\relax
	\let\eighthnote\relax
	\usepackage{arev}
}{
\ifthenelse{\equal{\fontdocument}{arimo}}{
	\usepackage[sfdefault]{arimo}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{arvo}}{
	\usepackage{Arvo}
}{
\ifthenelse{\equal{\fontdocument}{baskervald}}{
	\usepackage{baskervald}
}{
\ifthenelse{\equal{\fontdocument}{baskervaldx}}{
	\usepackage[lf]{Baskervaldx}
	\usepackage[bigdelims,vvarbb]{newtxmath}
	\usepackage[cal=boondoxo]{mathalfa}
	\renewcommand*\oldstylenums[1]{\textosf{#1}}
}{
\ifthenelse{\equal{\fontdocument}{berasans}}{
	\usepackage[scaled]{berasans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{beraserif}}{
	\usepackage{bera}
}{
\ifthenelse{\equal{\fontdocument}{biolinum}}{
	\usepackage{libertine}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{bitter}}{
	\usepackage{bitter}
}{
\ifthenelse{\equal{\fontdocument}{boisik}}{
	\let\div\relax
	\usepackage{boisik}
}{
\ifthenelse{\equal{\fontdocument}{bookman}}{
	\usepackage{bookman}
}{
\ifthenelse{\equal{\fontdocument}{cabin}}{
	\usepackage[sfdefault]{cabin}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{cabincondensed}}{
	\usepackage[sfdefault,condensed]{cabin}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{caladea}}{
	\usepackage{caladea}
}{
\ifthenelse{\equal{\fontdocument}{cantarell}}{
	\usepackage[default]{cantarell}
}{
\ifthenelse{\equal{\fontdocument}{carlito}}{
	\usepackage[sfdefault]{carlito}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{charterbt}}{
	\usepackage[bitstream-charter]{mathdesign}
}{
\ifthenelse{\equal{\fontdocument}{chivolight}}{
	\usepackage[familydefault,light]{Chivo}
}{
\ifthenelse{\equal{\fontdocument}{chivoregular}}{
	\usepackage[familydefault,regular]{Chivo}
}{
\ifthenelse{\equal{\fontdocument}{clara}}{
	\usepackage{clara}
}{
\ifthenelse{\equal{\fontdocument}{clearsans}}{
	\usepackage[sfdefault]{ClearSans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{cochineal}}{
	\usepackage{cochineal}
}{
\ifthenelse{\equal{\fontdocument}{coelacanth}}{
	\usepackage[nf]{coelacanth}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{coelacanthextralight}}{
	\usepackage[el,nf]{coelacanth}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{coelacanthlight}}{
	\usepackage[l,nf]{coelacanth}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{comfortaa}}{
	\usepackage[default]{comfortaa}
}{
\ifthenelse{\equal{\fontdocument}{comicneue}}{
	\usepackage[default]{comicneue}
}{
\ifthenelse{\equal{\fontdocument}{comicneueangular}}{
	\usepackage[default,angular]{comicneue}
}{
\ifthenelse{\equal{\fontdocument}{computerconcrete}}{
	\usepackage{concmath}
}{
\ifthenelse{\equal{\fontdocument}{computerconcreteeuler}}{
	\let\Re\relax
	\let\Im\relax
	\usepackage{beton}
	\usepackage{euler}
}{
\ifthenelse{\equal{\fontdocument}{computermodern}}{
}{
\ifthenelse{\equal{\fontdocument}{computermodernbright}}{
	\usepackage{cmbright}
}{
\ifthenelse{\equal{\fontdocument}{crimson}}{
	\usepackage{crimson}
}{
\ifthenelse{\equal{\fontdocument}{crimsonpro}}{
	\usepackage{CrimsonPro}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{crimsonproextralight}}{
	\usepackage[extralight]{CrimsonPro}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{crimsonprolight}}{
	\usepackage[light]{CrimsonPro}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{crimsonpromedium}}{
	\usepackage[medium]{CrimsonPro}
	\let\oldnormalfont\normalfont
	\def\normalfont{\oldnormalfont\mdseries}
}{
\ifthenelse{\equal{\fontdocument}{cyklop}}{
	\usepackage{cyklop}
}{
\ifthenelse{\equal{\fontdocument}{dejavusans}}{
	\usepackage{DejaVuSans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{dejavusanscondensed}}{
	\usepackage{DejaVuSansCondensed}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{domitian}}{
	\usepackage{mathpazo}
	\usepackage{domitian}
	\let\oldstylenums\oldstyle
}{
\ifthenelse{\equal{\fontdocument}{droidsans}}{
	\usepackage[defaultsans]{droidsans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{electrum}}{
	\usepackage[lf]{electrum}
}{	
\ifthenelse{\equal{\fontdocument}{erewhon}}{
	\usepackage[proportional,scaled=1.064]{erewhon}
	\usepackage[erewhon,vvarbb,bigdelims]{newtxmath}
	\renewcommand*\oldstylenums[1]{\textosf{#1}}
}{
\ifthenelse{\equal{\fontdocument}{fbb}}{
	\usepackage{fbb}
}{
\ifthenelse{\equal{\fontdocument}{fetamont}}{
	\usepackage{fetamont}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{firasans}}{
	\usepackage[sfdefault]{FiraSans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{firasansnewtxsf}}{
	\usepackage[sfdefault]{FiraSans}
	\usepackage{newtxsf}
}{
\ifthenelse{\equal{\fontdocument}{fourier}}{
	\usepackage{fourier}
}{
\ifthenelse{\equal{\fontdocument}{fouriernc}}{
	\usepackage{fouriernc}
}{
\ifthenelse{\equal{\fontdocument}{gfsartemisia}}{
	\let\textlozenge\relax
	\usepackage{gfsartemisia}
}{
\ifthenelse{\equal{\fontdocument}{gfsartemisiaeuler}}{
	\let\textlozenge\relax
	\let\Re\relax
	\let\Im\relax
	\usepackage{gfsartemisia-euler}
}{
\ifthenelse{\equal{\fontdocument}{heuristica}}{
	\usepackage{heuristica}
	\usepackage[heuristica,vvarbb,bigdelims]{newtxmath}
	\renewcommand*\oldstylenums[1]{\textosf{#1}}
}{
\ifthenelse{\equal{\fontdocument}{iwona}}{
	\usepackage[math]{iwona}
}{
\ifthenelse{\equal{\fontdocument}{iwonacondensed}}{
	\usepackage[condensed,math]{iwona}
}{
\ifthenelse{\equal{\fontdocument}{iwonalight}}{
	\usepackage[light,math]{iwona}
}{
\ifthenelse{\equal{\fontdocument}{iwonalightcondensed}}{
	\usepackage[light,condensed,math]{iwona}
}{
\ifthenelse{\equal{\fontdocument}{kerkis}}{
	\usepackage{kmath,kerkis}
}{
\ifthenelse{\equal{\fontdocument}{kurier}}{
	\usepackage[math]{kurier}
}{
\ifthenelse{\equal{\fontdocument}{kuriercondensed}}{
	\usepackage[condensed,math]{kurier}
}{
\ifthenelse{\equal{\fontdocument}{kurierlight}}{
	\usepackage[light,math]{kurier}
}{
\ifthenelse{\equal{\fontdocument}{kurierlightcondensed}}{
	\usepackage[light,condensed,math]{kurier}
}{
\ifthenelse{\equal{\fontdocument}{lato}}{
	\usepackage[default]{lato}
}{
\ifthenelse{\equal{\fontdocument}{libertinus}}{
	\usepackage{libertinus}
}{
\ifthenelse{\equal{\fontdocument}{librebaskerville}}{
	\usepackage{librebaskerville}
}{
\ifthenelse{\equal{\fontdocument}{librebodoni}}{
	\usepackage{LibreBodoni}
}{
\ifthenelse{\equal{\fontdocument}{librecaslon}}{
	\usepackage{librecaslon}
}{
\ifthenelse{\equal{\fontdocument}{libris}}{
	\usepackage{libris}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{lxfonts}}{
	\usepackage{lxfonts}
}{
\ifthenelse{\equal{\fontdocument}{merriweather}}{
	\usepackage[sfdefault]{merriweather}
}{
\ifthenelse{\equal{\fontdocument}{merriweatherlight}}{
	\usepackage[sfdefault,light]{merriweather}
}{
\ifthenelse{\equal{\fontdocument}{mintspirit}}{
	\usepackage[default]{mintspirit}
}{
\ifthenelse{\equal{\fontdocument}{mlmodern}}{
	\usepackage{mlmodern}
}{
\ifthenelse{\equal{\fontdocument}{montserratalternatesextralight}}{
	\usepackage[defaultfam,extralight,tabular,lining,alternates]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratalternatesregular}}{
	\usepackage[defaultfam,tabular,lining,alternates]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratalternatesthin}}{
	\usepackage[defaultfam,thin,tabular,lining,alternates]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratextralight}}{
	\usepackage[defaultfam,extralight,tabular,lining]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratlight}}{
	\usepackage[defaultfam,light,tabular,lining]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratregular}}{
	\usepackage[defaultfam,tabular,lining]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{montserratthin}}{
	\usepackage[defaultfam,thin,tabular,lining]{montserrat}
	\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}
}{
\ifthenelse{\equal{\fontdocument}{newpx}}{
	\usepackage{newpxtext,newpxmath}
}{
\ifthenelse{\equal{\fontdocument}{nimbussans}}{
	\usepackage{nimbussans}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{noto}}{
	\usepackage[sfdefault]{noto}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{notoserif}}{
	\usepackage{notomath}
}{
\ifthenelse{\equal{\fontdocument}{opensansserif}}{
	\usepackage[default,oldstyle,scale=0.95]{opensans}
}{
\ifthenelse{\equal{\fontdocument}{overlock}}{
	\usepackage[sfdefault]{overlock}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{paratype}}{
	\usepackage{paratype}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{paratypesanscaption}}{
	\usepackage{PTSansCaption}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{paratypesansnarrow}}{
	\usepackage{PTSansNarrow}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{pxfonts}}{
	\usepackage{pxfonts}
}{
\ifthenelse{\equal{\fontdocument}{quattrocento}}{
	\usepackage[sfdefault]{quattrocento}
}{
\ifthenelse{\equal{\fontdocument}{raleway}}{
	\usepackage[default]{raleway}
}{
\ifthenelse{\equal{\fontdocument}{roboto}}{
	\usepackage[sfdefault]{roboto}
}{
\ifthenelse{\equal{\fontdocument}{robotocondensed}}{
	\usepackage[sfdefault,condensed]{roboto}
}{
\ifthenelse{\equal{\fontdocument}{robotolight}}{
	\usepackage[sfdefault,light]{roboto}
}{
\ifthenelse{\equal{\fontdocument}{robotolightcondensed}}{
	\usepackage[sfdefault,light,condensed]{roboto}
}{
\ifthenelse{\equal{\fontdocument}{robotothin}}{
	\usepackage[sfdefault,thin]{roboto}
}{
\ifthenelse{\equal{\fontdocument}{rosario}}{
	\usepackage[familydefault]{Rosario}
}{
\ifthenelse{\equal{\fontdocument}{sourcesanspro}}{
	\usepackage[default]{sourcesanspro}
}{
\ifthenelse{\equal{\fontdocument}{step}}{
	\usepackage[notext]{stix}
	\usepackage{step}
}{
\ifthenelse{\equal{\fontdocument}{stickstoo}}{
	\usepackage{stickstootext}
	\usepackage[stickstoo,vvarbb]{newtxmath}
}{
\ifthenelse{\equal{\fontdocument}{texgyrebonum}}{
	\usepackage{tgbonum}
}{
\ifthenelse{\equal{\fontdocument}{txfonts}}{
	\usepackage{txfonts}
}{
\ifthenelse{\equal{\fontdocument}{uarial}}{
	\usepackage{uarial}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{ugq}}{
	\renewcommand*\sfdefault{ugq}
	\renewcommand*\familydefault{\sfdefault}
}{
\ifthenelse{\equal{\fontdocument}{universalis}}{
	\usepackage[sfdefault]{universalis}
}{
\ifthenelse{\equal{\fontdocument}{universaliscondensed}}{
	\usepackage[condensed,sfdefault]{universalis}
}{
\ifthenelse{\equal{\fontdocument}{venturis}}{
	\usepackage[lf]{venturis}
	\renewcommand*\familydefault{\sfdefault}
}{
	\throwbadconfig[nostop]{Fuente desconocida}{\fontdocument}{(Fuentes recomendadas) lmodern,carial,arial2,times,mathptmx,helvet,opensans,mathpazo,cambria,libertine,custom}
	\throwbadconfig[noheader-nostop]{Fuente desconocida}{\fontdocument}{(Fuentes adicionales) accanthis,alegreya,alegreyasans,algolrevived,almendra,antpolt,antpoltlight,anttor,anttorcondensed,anttorlight,anttorlightcondensed,arev,arimo,arvo,baskervald,baskervaldx,berasans,beraserif,biolinum,bitter,boisik,bookman,cabin,cabincondensed,cantarell,caladea,carlito,charterbt,chivolight,chivoregular,clara,clearsans,cochineal,coelacanth,coelacanthextralight,coelacanthlight,comfortaa,comicneue,comicneueangular,computerconcrete,computerconcreteeuler,computermodern,computermodernbright,crimson,crimsonpro,crimsonproextralight,crimsonprolight,crimsonpromedium,cyklop}
	\throwbadconfig[noheader-nostop]{Fuente desconocida}{\fontdocument}{dejavusans,dejavusanscondensed,domitian,droidsans,electrum,erewhon,fbb,fetamont,firasans,firasansnewtxsf,fourier,fouriernc,gfsartemisia,gfsartemisiaeuler,heuristica,iwona,iwonacondensed,iwonalight,iwonalightcondensed,kerkis,kurier,kuriercondensed,kurierlight,kurierlightcondensed,lato,libertinus,librebaskerville,librebodoni,librecaslon,libris,lxfonts}
	\throwbadconfig[noheader]{Fuente desconocida}{\fontdocument}{merriweather,merriweatherlight,mintspirit,mlmodern,montserratalternatesextralight,montserratalternatesregular,montserratalternatesthin,montserratextralight,montserratlight,montserratregular,montserratthin,newpx,nimbussans,noto,notoserif,opensansserif,overlock,paratype,paratypesanscaption,paratypesansnarrow,pxfonts,quattrocento,raleway,roboto,robotolight,robotolightcondensed,robotothin,rosario,sourcesanspro,step,stickstoo,uarial,texgyrebonum,txfonts,ugq,universalis,universaliscondensed,venturis}
	}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
}

% -----------------------------------------------------------------------------
% Tipografía typewriter
% -----------------------------------------------------------------------------
% https://tug.org/FontCatalogue/typewriterfonts.html
\ifthenelse{\equal{\fonttypewriter}{custom}}{
}{
\ifthenelse{\equal{\fonttypewriter}{tmodern}}{
	\renewcommand*\ttdefault{lmvtt}
}{
\ifthenelse{\equal{\fonttypewriter}{anonymouspro}}{
	\usepackage[ttdefault=true]{AnonymousPro}
}{
\ifthenelse{\equal{\fonttypewriter}{ascii}}{
	\usepackage{ascii}
	\let\SI\relax
}{
\ifthenelse{\equal{\fonttypewriter}{beramono}}{
	\usepackage[scaled]{beramono}
}{
\ifthenelse{\equal{\fonttypewriter}{cascadiacode}}{
	\usepackage{cascadia-code}
}{
\ifthenelse{\equal{\fonttypewriter}{cmpica}}{
	\usepackage{addfont}
	\addfont{OT1}{cmpica}{\pica}
	\addfont{OT1}{cmpicab}{\picab}
	\addfont{OT1}{cmpicati}{\picati}
	\renewcommand*\ttdefault{pica}
}{
\ifthenelse{\equal{\fonttypewriter}{cmodern}}{
}{
\ifthenelse{\equal{\fonttypewriter}{courier}}{
	\usepackage{courier}
}{
\ifthenelse{\equal{\fonttypewriter}{courier10}}{
	\usepackage{courierten}
}{
\ifthenelse{\equal{\fonttypewriter}{cmvtt}}{
	\renewcommand*\ttdefault{cmvtt}
}{
\ifthenelse{\equal{\fonttypewriter}{dejavusansmono}}{
	\usepackage[scaled]{DejaVuSansMono}
}{
\ifthenelse{\equal{\fonttypewriter}{droidsansmono}}{
	\usepackage[defaultmono]{droidsansmono}
}{
\ifthenelse{\equal{\fonttypewriter}{firamono}}{
	\usepackage[scale=0.85]{FiraMono}
}{
\ifthenelse{\equal{\fonttypewriter}{gomono}}{
	\usepackage[scale=0.85]{GoMono}
}{
\ifthenelse{\equal{\fonttypewriter}{inconsolata}}{
	\usepackage{inconsolata}
}{
\ifthenelse{\equal{\fonttypewriter}{nimbusmono}}{
	\usepackage{nimbusmono}
}{
\ifthenelse{\equal{\fonttypewriter}{newtxtt}}{
	\usepackage[zerostyle=d]{newtxtt}
}{
\ifthenelse{\equal{\fonttypewriter}{nimbusmono}}{
	\usepackage{nimbusmono}
}{
\ifthenelse{\equal{\fonttypewriter}{nimbusmononarrow}}{
	\usepackage{nimbusmononarrow}
}{
\ifthenelse{\equal{\fonttypewriter}{lcmtt}}{
	\renewcommand*\ttdefault{lcmtt}
}{
\ifthenelse{\equal{\fonttypewriter}{sourcecodepro}}{
	\usepackage[ttdefault=true,scale=0.85]{sourcecodepro}
}{
\ifthenelse{\equal{\fonttypewriter}{texgyrecursor}}{
	\usepackage{tgcursor}
}{
\ifthenelse{\equal{\fonttypewriter}{txtt}}{
	\renewcommand*\ttdefault{txtt}
}{
	\throwbadconfig{Fuente desconocida}{\fonttypewriter}{custom,anonymouspro,ascii,beramono,cascadiacode,cmpica,cmodern,courier,courier10,cvmtt,dejavusansmono,droidsansmono,firamono,gomono,inconsolata,kpmonospaced,lcmtt,newtxtt,nimbusmono,nimbusmononarrow,texgyrecursor,tmodern,txtt}
	}}}}}}}}}}}}}}}}}}}}}}}
}

% -----------------------------------------------------------------------------
% Finales
% -----------------------------------------------------------------------------
\usepackage[T1]{fontenc} % Caracteres acentuados
\ifthenelse{\equal{\showlayoutlines}{true}}{ % Muestra las líneas del layout
	\usepackage{showframe}}{
}
\ifthenelse{\equal{\showlinenumbers}{true}}{ % Muestra los números de línea
	\usepackage[switch,columnwise,running]{lineno}}{
}
\usepackage{csquotes} % Citas y comillas, se debe usar después de lineno [6.4.2]
\ifthenelse{\equal{\compilertype}{pdf2latex}}{
	\inputencoding{utf8}}{
}

% -----------------------------------------------------------------------------
% IMPORTACIÓN DE FUNCIONES Y ENTORNOS
% -----------------------------------------------------------------------------
% Definición de variables globales
\global\def\GLOBALcaptiondefn {EMPTY-VAR}       % Definición del caption
\global\def\GLOBALchapternumenabled {false}     % Numeración de capítulos empezó
\global\def\GLOBALenvimageadded {false}         % Indica que una imagen ha sido añadida
\global\def\GLOBALenvimageinitialized {false}   % Entorno images activo
\global\def\GLOBALenvmulticol {false}           % Indica que el entorno multicol está activo
\global\def\GLOBALsectionalph {false}           % Sección con numeración de letras
\global\def\GLOBALsectionanumenabled {false}    % Sección sin numeración
\global\def\GLOBALsubsectionanumenabled {false} % Subsección sin numeración
\global\def\GLOBALtablerowcolorindex {2}        % Índice tabla colores
\global\def\GLOBALtablerowcolorswitch {false}   % Tabla con colores cambiados

% Contador global de objetos
\newcounter{templateEquations}      % Ecuaciones
\newcounter{templateFigures}        % Figuras
\newcounter{templateIndexEquations} % Ecuaciones en el índice
\newcounter{templateListings}       % Códigos fuente
\newcounter{templatePageCounter}    % Administra números de páginas
\newcounter{templateTables}         % Tablas

% Contador nivel de bookmarks marcadores
\newcounter{templateBookmarksLevelPrev}
\setcounter{templateBookmarksLevelPrev}{\cfgbookmarksopenlevel}
\addtocounter{templateBookmarksLevelPrev}{-1}

% Define latex para uso en referencias
\let\latex\LaTeX

% Lanza un mensaje de error
% 	#1	Función del error
%	#2	Mensaje
\newcommand{\throwerror}[2]{%
	\errmessage{LaTeX Error: \noexpand#1 #2 (linea \the\inputlineno)}%
	\stop
}

% Lanza un mensaje de advertencia
%	#1	Mensaje
\newcommand{\throwwarning}[1]{%
	\errmessage{LaTeX Warning: #1 (linea \the\inputlineno)}%
}

% Lanza un mensaje de error indicando mala configuración dentro de begin{document}
%	#1	Mensaje de error
% 	#2	Configuración usada
%	#3	Valores esperados
\newcommand{\throwbadconfigondoc}[3]{%
	\errmessage{#1 \noexpand #2=#2. Valores esperados: #3}%
	\stop
}

% Comprueba si una variable está definida
%	#1	Variable
\newcommand{\checkvardefined}[1]{%
	\ifthenelse{\isundefined{#1}}{%
		\errmessage{LaTeX Warning: Variable \noexpand#1 no definida}%
		\stop}{%
	}%
}

% Escribe un mensaje en la consola
%	#1	Mensaje
\newcommand{\coretemplatemessage}[1]{%
	\message{Template: #1}%
}

% Comprueba si una variable está definida
%	#1	Variable
%	#2	Mensaje
\newcommand{\checkextravarexist}[2]{%
	\ifthenelse{\isundefined{#1}}{%
		\errmessage{LaTeX Warning: Variable \noexpand#1 no definida}%
		\ifx\hfuzz#2\hfuzz%
			\errmessage{LaTeX Warning: Defina la variable en el bloque de INFORMACION DEL DOCUMENTO al comienzo del archivo principal del template}%
		\else%
			\errmessage{LaTeX Warning: #2}%
		\fi}{%
	}
}

% Lanza un mensaje de error si una variable no ha sido definida
% 	#1	Función del error
%	#2	Variable
%	#3	Mensaje
\newcommand{\emptyvarerr}[3]{%
	\ifx\hfuzz#2\hfuzz%
		\errmessage{LaTeX Warning: \noexpand#1 #3 (linea \the\inputlineno)}%
	\fi
}

% Cambiar el margen de los caption
% 	#1	Margen en centímetros
\newcommand{\setcaptionmargincm}[1]{
	\captionsetup{margin=#1cm}
}

% Cambia márgenes de las páginas [cm]
% 	#1	Margen izquierdo
%	#2	Margen superior
%	#3	Margen derecho
%	#4	Margen inferior
\newcommand{\setpagemargincm}[4]{
	\ifthenelse{\equal{\compilertype}{lualatex}}{
		% Geometry no válido en lualatex
	}{
		\newgeometry{left=#1cm, top=#2cm, right=#3cm, bottom=#4cm}
	}
}

% Define el caption del índice
% 	#1	Título del caption
\newcommand{\setindexcaption}[1]{%
	\global\def\GLOBALcaptiondefn {#1}%
}

% Resetea los caption
\newcommand{\resetindexcaption}{%
	\global\def\GLOBALcaptiondefn {EMPTY-VAR}%
}

% Cambia los márgenes del documento
%	#1	Margen izquierdo
%	#2	Margen derecho
\newcommand{\changemargin}[2]{%
	\emptyvarerr{\changemargin}{#1}{Margen izquierdo no definido}%
	\emptyvarerr{\changemargin}{#2}{Margen derecho no definido}%
	\list{}{\rightmargin#2\leftmargin#1}\item[]%
}
\let\endchangemargin=\endlist

% Chequea que las funciones sólo puedan usarse en el entorno images
\newcommand{\checkonlyonenvimage}{%
	\ifthenelse{\equal{\GLOBALenvimageinitialized}{true}}{}{%
		\throwwarning{Funciones \noexpand\addimage o \noexpand\addimageboxed no pueden usarse fuera del entorno \noexpand\images}\stop%
	}%
}

% Chequea que las funciones sólo puedan usarse fuera del entorno images
\newcommand{\checkoutsideenvimage}{%
	\ifthenelse{\equal{\GLOBALenvimageinitialized}{true}}{%
		\throwwarning{Esta funcion solo puede usarse fuera del entorno \noexpand\images}%
		\stop}{%
	}%
}

% Chequea que las funciones puedan usarse solo en el entorno multicol
\newcommand{\checkinsidemulticol}{%
	\ifthenelse{\equal{\GLOBALenvmulticol}{false}}{%
		\throwwarning{Esta funcion solo puede usarse dentro de multicols}%
		\stop}{%
	}
}

% Verifica que una variable sea del estilo "true" o "false"
\newcommand{\corecheckbooleanvar}[1]{%
	\emptyvarerr{\corecheckbooleanvar}{#1}{Variable no definida}%
	\ifthenelse{\equal{#1}{true}}{}{%
	\ifthenelse{\equal{#1}{false}}{}{%
		\throwwarning{Variable debe ser true o false}\stop%
	}}%
}

% Centra verticalmente un texto
%	#1	Texto a centrar
\newcommand{\verticallycentertext}[1]{%
	\emptyvarerr{\verticallycentertext}{#1}{Texto no definido}%
	\topskip0pt%
	\vspace*{\fill}%
	#1%
	\vspace*{\fill}%
}

% Agrega una carpeta al path de imágenes
%	#1	Carpeta
\makeatletter
\newcommand\addpathimage[1]{%
	\gappto\Ginput@path{{#1}}%
}
\makeatother

% Verifica que un tamaño de fuente sea correcto
%	#1	Tamaño de fuente
\newcommand{\corecheckfontsize}[1]{%
	\ifthenelse{\equal{#1}{normalsize}}{}{%
	\ifthenelse{\equal{#1}{small}}{}{%
	\ifthenelse{\equal{#1}{large}}{}{%
	\ifthenelse{\equal{#1}{Large}}{}{%
	\ifthenelse{\equal{#1}{LARGE}}{}{%
	\ifthenelse{\equal{#1}{huge}}{}{%
	\ifthenelse{\equal{#1}{Huge}}{}{%
	\ifthenelse{\equal{#1}{HUGE}}{}{%
	\ifthenelse{\equal{#1}{footnotesize}}{}{%
	\ifthenelse{\equal{#1}{scriptsize}}{}{%
	\ifthenelse{\equal{#1}{tiny}}{}{%
		\errmessage{LaTeX Warning: Tamano de fuente incorrecto (\noexpand #1= #1). Valores esperados: tiny,scriptsize,footnotesize,small,normalisize,large,Large,LARGE,huge,Huge,HUGE}%
		\stop%
		}}}}}}}}}}%
	}%
}

% Insertar sub-índice, a_b
% 	#1	Elemento inferior (a)
%	#2	Elemento superior (b)
\newcommand{\lpow}[2]{%
	\ensuremath{{#1}_{#2}}
}

% Insertar elevado, a^b
% 	#1	Elemento inferior (a)
%	#2	Elemento superior (b)
\newcommand{\pow}[2]{%
	\ensuremath{{#1}^{#2}}
}

% Inserta inverso función seno, sin^-1
%	#1	Elemento
\newcommand{\aasin}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\sin^{-1}#1}
	\else
		\ensuremath{{\sin}^{-1}}
	\fi
}

% Inserta inverso función coseno, cos^-1
%	#1	Elemento
\newcommand{\aacos}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\cos^{-1}#1}
	\else
		\ensuremath{\cos^{-1}}
	\fi
}

% Inserta inverso función tangente, tan^-1
%	#1	Elemento
\newcommand{\aatan}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\tan^{-1}#1}
	\else
		\ensuremath{\tan^{-1}}
	\fi
}

% Inserta inverso función cosecante, csc^-1
%	#1	Elemento
\newcommand{\aacsc}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\csc^{-1}#1}
	\else
		\ensuremath{\csc^{-1}}
	\fi
}

% Inserta inverso función secante, sec^-1
%	#1	Elemento
\newcommand{\aasec}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\sec^{-1}#1}
	\else
		\ensuremath{\sec^{-1}}
	\fi
}

% Inserta inverso función cotangente, cot^-1
%	#1	Elemento
\newcommand{\aacot}[1][]{%
	\ifx\hfuzz#1\hfuzz
		\ensuremath{\cot^{-1}#1}
	\else
		\ensuremath{\cot^{-1}}
	\fi
}

% Fracción de derivadas parciales af/ax
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
\newcommand{\fracpartial}[2]{%
	\ensuremath{\pdv{#1}{#2}}
}

% Fracción de derivadas parciales dobles a^2f/ax^2
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
\newcommand{\fracdpartial}[2]{%
	\ensuremath{\pdv[2]{#1}{#2}}
}

% Fracción de derivadas parciales en n, a^nf/ax^n
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
%	#3	Orden (n)
\newcommand{\fracnpartial}[3]{%
	\ensuremath{\pdv[#3]{#1}{#2}}
}

% Fracción de derivadas df/dx
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
\newcommand{\fracderivat}[2]{%
	\ensuremath{\dv{#1}{#2}}
}

% Fracción de derivadas dobles d^2/dx^2
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
\newcommand{\fracdderivat}[2]{%
	\ensuremath{\dv[2]{#1}{#2}}
}

% Fracción de derivadas en n d^nf/dx^n
% 	#1	Función a derivar (f)
%	#2	Variable a derivar (x)
%	#3	Orden de la derivada (n)
\newcommand{\fracnderivat}[3]{%
	\ensuremath{\dv[#3]{#1}{#2}}
}

% Llave superior de equivalencia
% 	#1	Elemento a igualar
%	#2	Igualdad
\newcommand{\topequal}[2]{%
	\ensuremath{\overbrace{#1}^{\mathclap{#2}}}
}
\newcommand{\topequaltext}[2]{%
	\topequal{#1}{\text{#2}}
}

% Llave inferior de equivalencia
% 	#1	Elemento a igualar
%	#2	Igualdad
\newcommand{\underequal}[2]{%
	\ensuremath{\underbrace{#1}_{\mathclap{#2}}}
}
\newcommand{\underequaltext}[2]{%
	\underequal{#1}{\text{#2}}
}

% Rectángulo superior de equivalencia
% 	#1	Elemento a igualar
%	#2	Igualdad
\newcommand{\topsequal}[2]{%
	\ensuremath{\overbracket{#1}^{\mathclap{#2}}}
}
\newcommand{\topsequaltext}[2]{%
	\topsequal{#1}{\text{#2}}
}

% Rectángulo inferior de equivalencia
% 	#1	Elemento a igualar
%	#2	Igualdad
\newcommand{\undersequal}[2]{%
	\ensuremath{\underbracket{#1}_{\mathclap{#2}}}
}
\newcommand{\undersequaltext}[2]{%
	\undersequal{#1}{\text{#2}}
}

% Función piso
% 	#1	Elemento
\newcommand{\floorexp}[1]{%
	\ensuremath{\left\lfloor{#1}\right\rfloor}
}

% Función techo
% 	#1	Elemento
\newcommand{\ceilexp}[1]{%
	\ensuremath{\left\lceil{#1}\right\rceil}
}

% Función mod
%	#1	Elemento tal que (mod #1)
\newcommand{\Mod}[1]{%
	\ensuremath{\ (\mathrm{mod}\ #1)}
}

% Paréntesis grande
% 	#1	Expresión
\newcommand{\bigp}[1]{%
	\ensuremath{\big(#1\big)}
}

% Paréntesis g+grande
% 	#1	Expresión
\newcommand{\biggp}[1]{%
	\ensuremath{\bigg(#1\bigg)}
}

% Cajón grande
% 	#1	Expresión
\newcommand{\bigc}[1]{%
	\ensuremath{\big[#1\big]}
}

% Cajón g+grande
% 	#1	Expresión
\newcommand{\biggc}[1]{%
	\ensuremath{\bigg[#1\bigg]}
}

% Llave grande
% 	#1	Expresión
\newcommand{\bigb}[1]{%
	\ensuremath{\big\{#1\big\}}
}

% Llave g+grande
% 	#1	Expresión
\newcommand{\biggb}[1]{%
	\ensuremath{\bigg\{#1\bigg\}}
}

% Expresión divergencia
\newcommand{\divexp}{%
	\ensuremath{\rm{div}\ }
}

% Expresión automorfismo
\newcommand{\Autexp}{%
	\ensuremath{\rm{Aut}}
}

% Negrita introducida por word
% 	#1	Expresión
\newcommand{\mathbit}[1]{%
	\bm{#1}
}

% Expresión diff
\newcommand{\Diffexp}{%
	\ensuremath{\rm{Diff}}
}

% Expresión imaginario
\newcommand{\Imexp}{%
	\ensuremath{\rm{Im}}
}

% Expresión imaginario en z
\newcommand{\Imzexp}{%
	\ensuremath{\rm{Im}(z)}
}

% Expresión real
\newcommand{\Reexp}{%
	\ensuremath{\rm{Re}}
}

% Expresión real en z
\newcommand{\Rezexp}{%
	\ensuremath{\rm{Re}(z)}
}

% Barra superior en elemento
%	#1 	Elemento
\newcommand{\overbar}[1]{%
	\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu
}

% Función \tilde{} pero que encierra todo el texto
%	#1 	Elemento
\makeatletter
\def\longtilde#1{%
	\mathop{\vbox{\m@th\ialign{##\crcr\noalign{\kern3\p@}%
	\sortoftildefill\crcr\noalign{\kern3\p@\nointerlineskip}%
	$\hfil\displaystyle{#1}\hfil$\crcr}}}\limits%
}
\def\sortoftildefill {%
	$\m@th \setbox\z@\hbox{$\braceld$}%
	\braceld\leaders\vrule \@height\ht\z@ \@depth\z@\hfill\braceru$%
}
\makeatother

% Definición de letras
\newcommand{\A}{\ensuremath{\mathcal{A}}}

\newcommand{\B}{\ensuremath{\mathcal{B}}}

\ifthenelse{\isundefined{\C}}{\newcommand{\C}{C}}{\let\oldC=\C}
\renewcommand{\C}{\ensuremath{\mathbb{C}}}

\newcommand{\D}{\ensuremath{\mathbb{D}}}

\newcommand{\E}{\ensuremath{\mathbb{E}}}

\newcommand{\F}{\ensuremath{\mathcal{F}}}

\ifthenelse{\isundefined{\G}}{\newcommand{\G}{G}}{\let\oldG=\G}
\renewcommand{\G}{\ensuremath{\mathcal{G}}}

\ifthenelse{\isundefined{\H}}{\newcommand{\H}{H}}{\let\oldH=\H}
\renewcommand{\H}{\ensuremath{\mathcal{H}}}

\newcommand{\I}{\ensuremath{\mathbb{I}}}

\newcommand{\J}{\ensuremath{\mathcal{J}}}

\newcommand{\K}{\ensuremath{\mathcal{K}}}

\let\oldL=\L % L con una raya
\renewcommand{\L}{\ensuremath{\mathcal{L}}}

\newcommand{\M}{\ensuremath{\mathcal{M}}}

\newcommand{\N}{\ensuremath{\mathbb{N}}}

% \renewcommand{\O}{\ensuremath{\mathbb{O}}} % O equivale a o/oo

\let\oldP=\P % P negra
\renewcommand{\P}{\ensuremath{\mathbb{P}}}

\newcommand{\Q}{\ensuremath{\mathbb{Q}}}

\newcommand{\R}{\ensuremath{\mathbb{R}}}

\let\oldS=\S % Serpiente
\renewcommand{\S}{\ensuremath{\mathcal{S}}}

\newcommand{\T}{\ensuremath{\mathcal{T}}}

\ifthenelse{\isundefined{\U}}{\newcommand{\U}{U}}{\let\oldU=\U}
\renewcommand{\U}{\ensuremath{\mathcal{U}}}

\newcommand{\V}{\ensuremath{\mathcal{V}}}

\newcommand{\W}{\ensuremath{\mathcal{W}}}

\newcommand{\X}{\ensuremath{\mathcal{X}}}

\newcommand{\Y}{\ensuremath{\mathcal{Y}}}

\newcommand{\Z}{\ensuremath{\mathbb{Z}}}

% Definición de operadores matemáticos de asignación (Typeset assigments)
\ifthenelse{\equal{\fontdocument}{step}}{}{ % Ya definidos en STEP
	\newcommand{\asteq}{\ensuremath{\mathrel{{*}{=}}}}
	\newcommand{\eqeq}{\ensuremath{\mathrel{{=}{=}}}}
}
\newcommand{\cdoteq}{\ensuremath{\mathrel{{\cdot}{=}}}}
\newcommand{\diveq}{\ensuremath{\mathrel{{/}{=}}}}
\newcommand{\eqast}{\ensuremath{\mathrel{{=}{*}}}}
\newcommand{\eqcdot}{\ensuremath{\mathrel{{=}{\cdot}}}}
\newcommand{\eqdiv}{\ensuremath{\mathrel{{=}{/}}}}
\newcommand{\eqminus}{\ensuremath{\mathrel{{=}{-}}}}
\newcommand{\eqnot}{\ensuremath{\mathrel{{=}{!}}}}
\newcommand{\eqplus}{\ensuremath{\mathrel{{=}{+}}}}
\newcommand{\eqtimes}{\ensuremath{\mathrel{{=}{\times}}}}
\newcommand{\minuseq}{\ensuremath{\mathrel{{-}{=}}}}
\newcommand{\minusminus}{\ensuremath{\mathrel{{-}{-}}}}
\newcommand{\noteq}{\ensuremath{\mathrel{{!}{=}}}}
\newcommand{\pluseq}{\ensuremath{\mathrel{{+}{=}}}}
\newcommand{\plusplus}{\ensuremath{\mathrel{{+}{+}}}}
\newcommand{\timeseq}{\ensuremath{\mathrel{{\times}{=}}}}

% Definición de teoremas y lemas
\makeatletter
	\renewenvironment{proof}[1][\proofname]{%
		\par\pushQED{\qed}%
		\normalfont\topsep6\p@\@plus6\p@\relax\trivlist%
		\item[\hskip\labelsep\scshape\footnotesize#1\@addpunct{.}]%
		\ignorespaces%
	}{%
		\popQED\endtrivlist\@endpefalse%
	}
\makeatother

% Redimensiona una ecuación en linewidth
% 	#1	Tamaño del nuevo objeto (En linewidth)
%	#2	Ecuación a redimensionar
\newcommand{\equationresize}[2]{%
	\emptyvarerr{\equationresize}{#1}{Dimension no definida}%
	\emptyvarerr{\equationresize}{#2}{Ecuacion a redimensionar no definida}%
	\resizebox{#1\linewidth}{!}{$#2$}%
}

% Inserta el caption de un objeto tipo ecuación
%	#1	Texto del caption
\newcommand{\coreinsertequationcaption}[1]{%
	\begin{changemargin}{\captionlrmargin cm}{\captionlrmargin cm}%
		\ifthenelse{\equal{\equationcaptioncenter}{true}}{%
			\centering%
		}{
			\justifying%
		}%
		\textcolor{\captiontextcolor}{%
			\linespread{0.5}\selectfont{%
				\begin{\captionfontsize}#1\end{\captionfontsize}%
			}
		}%
	\end{changemargin}%
}

% Insertar una ecuación
% 	#1	Label (opcional)
%	#2	Ecuación
\newcommand{\insertequation}[2][]{%
	\emptyvarerr{\insertequation}{#2}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\marginequationtop cm}%
		\begin{samepage}%
		\begin{equation}%
			\text{#1} #2
		\end{equation}
		\vspace{\marginequationbottom cm}%
		\end{samepage}
	}{%
		\ifx\hfuzz#1\hfuzz%
		\else%
			\throwwarning{Label invalido en ecuacion sin numero}
		\fi
		\insertequationanum{#2}%
	}
}

% Insertar una ecuación sin número
%	#1	Ecuación
\newcommand{\insertequationanum}[1]{%
	\emptyvarerr{\insertequationanum}{#1}{Ecuacion no definida}%
	\vspace{\marginequationtop cm}%
	\begin{samepage}%
	\begin{equation*}%
		\ensuremath{#1}
	\end{equation*}
	\vspace{\marginequationbottom cm}%
	\end{samepage}
}

% Insertar una ecuación en el índice
% 	#1	Label (opcional)
%	#2	Ecuación
%	#3	Título de la ecuación
\newcommand{\insertindexequation}[3][]{%
	\emptyvarerr{\insertindexequation}{#2}{Ecuacion no definida}%
	\emptyvarerr{\insertindexequation}{#3}{Leyenda no definida}%
	\vspace{\margineqnindextop cm}%
	\begin{samepage}%
	\begin{align}%
		\text{#1} \ensuremath{#2}
	\end{align}
	\myindexequations{#3}%
	\vspace{\margineqnindexbottom cm}%
	\end{samepage}
	\coreinsertequationcaption{\textit{#3}}%
	\addtocounter{templateIndexEquations}{1}%
}

% Insertar una ecuación alineada a la izquierda
% 	#1	Label (opcional)
%	#2	Ecuación
\newcommand{\insertequationleft}[2][]{%
	\emptyvarerr{\insertequationleft}{#2}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\dimexpr\marginequationtop cm - \baselineskip}%
		\begin{samepage}%
		\begin{equation}
			\hfilneg \text{#1} #2 \hspace{10000pt minus 1fil}
		\end{equation}
		\vspace{\dimexpr-0.2\baselineskip + \marginequationbottom cm}%
		\end{samepage}
	}{%
		\ifx\hfuzz#1\hfuzz%
		\else
			\throwwarning{Label invalido en ecuacion sin numero}
		\fi
		\insertequationleftanum{#2}%
	}
}

% Insertar una ecuación sin número alineada a la izquierda
%	#1	Ecuación
\newcommand{\insertequationleftanum}[1]{%
	\emptyvarerr{\insertequationleftanum}{#1}{Ecuacion no definida}%
	\vspace{\dimexpr\marginequationtop cm - \baselineskip}%
	\begin{samepage}%
	\begin{equation*}
		\hfilneg \ensuremath{#1} \hspace{10000pt minus 1fil}
	\end{equation*}
	\vspace{\dimexpr-0.2\baselineskip + \marginequationbottom cm}%
	\end{samepage}
}

% Insertar una ecuación alineada a la derecha
% 	#1	Label (opcional)
%	#2	Ecuación
\newcommand{\insertequationright}[2][]{%
	\emptyvarerr{\insertequationright}{#2}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\dimexpr\marginequationtop cm - \baselineskip}%
		\begin{samepage}%
		\begin{equation}
			\hspace{10000pt minus 1fil} \text{#1} #2 \hfilneg
		\end{equation}
		\vspace{\dimexpr-0.2\baselineskip + \marginequationbottom cm}%
		\end{samepage}
	}{%
		\ifx\hfuzz#1\hfuzz%
		\else
			\throwwarning{Label invalido en ecuacion sin numero}
		\fi
		\insertequationrightanum{#2}%
	}
}

% Insertar una ecuación sin número alineada a la derecha
%	#1	Ecuación
\newcommand{\insertequationrightanum}[1]{%
	\emptyvarerr{\insertequationrightanum}{#1}{Ecuacion no definida}%
	\vspace{\dimexpr\marginequationtop cm - \baselineskip}%
	\begin{samepage}%
	\begin{equation*}
		\hspace{10000pt minus 1fil} \ensuremath{#1} \hfilneg
	\end{equation*}
	\vspace{\dimexpr-0.2\baselineskip + \marginequationbottom cm}%
	\end{samepage}
}

% Insertar una ecuación con leyenda
% 	#1	Label (opcional)
%	#2	Ecuación
%	#3	Leyenda
\newcommand{\insertequationcaptioned}[3][]{%
	\emptyvarerr{\insertequationcaptioned}{#2}{Ecuacion no definida}%
	\ifx\hfuzz#3\hfuzz%
		\insertequation[#1]{#2}%
	\else
		\ifthenelse{\equal{\numberedequation}{true}}{%
			\vspace{\marginequationtop cm}%
			\begin{samepage}%
			\begin{equation}
				\text{#1} #2
			\end{equation}
			\vspace{\margineqncaptiontop cm}%
			\coreinsertequationcaption{#3}%
			\vspace{\margineqncaptionbottom cm}%
			\end{samepage}
		}{%
			\ifx\hfuzz#1\hfuzz
			\else
				\throwwarning{Label invalido en ecuacion sin numero}
			\fi
			\insertequationcaptionedanum{#2}{#3}
		}
	\fi
}

% Insertar una ecuación con leyenda sin número
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertequationcaptionedanum}[2]{%
	\emptyvarerr{\insertequationcaptionedanum}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertequationanum{#1}%
	\else
		\vspace{\marginequationtop cm}%
		\begin{samepage}%
		\begin{equation*}
			\ensuremath{#1}%
		\end{equation*}%
		\vspace{\margineqncaptiontop cm}%
		\coreinsertequationcaption{#2}%
		\vspace{\margineqncaptionbottom cm}%
		\end{samepage}
	\fi
}

% Insertar una ecuación con el ambiente gather
%	#1	Ecuación
\newcommand{\insertgather}[1]{%
	\emptyvarerr{\insertgather}{#1}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\margingathertop cm}%
		\begin{samepage}%
		\begin{gather}%
			\ensuremath{#1}
		\end{gather}
		\vspace{\margingatherbottom cm}%
		\end{samepage}
	}{%
		\insertgatheranum{#1}%
	}
}

% Insertar una ecuación con el ambiente gather sin número
%	#1	Ecuación
\newcommand{\insertgatheranum}[1]{%
	\emptyvarerr{\insertgatheranum}{#1}{Ecuacion no definida}%
	\vspace{\margingathertop cm}%
	\begin{samepage}%
	\begin{gather*}%
		\ensuremath{#1}
	\end{gather*}
	\vspace{\margingatherbottom cm}%
	\end{samepage}
}

% Insertar una ecuación (gather) con leyenda
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertgathercaptioned}[2]{%
	\emptyvarerr{\insertgathercaptioned}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertgather{#1}%
	\else
		\ifthenelse{\equal{\numberedequation}{true}}{%
			\vspace{\margingathertop cm}%
			\begin{samepage}%
			\begin{gather}%
				\ensuremath{#1}
			\end{gather}
			\vspace{\margingathercapttop cm}%
			\coreinsertequationcaption{#2}%
			\vspace{\margingathercaptbottom cm}%
			\end{samepage}
		}{%
			\insertgathercaptionedanum{#1}{#2}%
		}
	\fi
}

% Insertar una ecuación (gather) con leyenda sin número
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertgathercaptionedanum}[2]{%
	\emptyvarerr{\insertgathercaptionedanum}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertgatheranum{#1}%
	\else
		\vspace{\margingathertop cm}%
		\begin{samepage}%
		\begin{gather*}%
			\ensuremath{#1}
		\end{gather*}
		\vspace{\margingathercapttop cm}%
		\coreinsertequationcaption{#2}%
		\vspace{\margingathercaptbottom cm}%
		\end{samepage}
	\fi
}

% Insertar una ecuación con el ambiente gathered
% 	#1	Label (opcional)
%	#2	Ecuación
\newcommand{\insertgathered}[2][]{%
	\emptyvarerr{\insertgathered}{#2}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\marginequationtop cm}%
		\begin{samepage}%
		\begin{equation}
			\begin{gathered}
				\text{#1} \ensuremath{#2}
			\end{gathered}
		\end{equation}
		\vspace{\margingatheredbottom cm}%
		\end{samepage}
	}{%
		\ifx\hfuzz#1\hfuzz
		\else
			\throwwarning{Label invalido en ecuacion (gathered) sin numero}
		\fi
		\vspace{\margingatheredtop cm}%
		\begin{samepage}%
		\begin{gather*}%
			\ensuremath{#2}
		\end{gather*}
		\vspace{\margingatheredbottom cm}%
		\end{samepage}
	}
}

% Insertar una ecuación con el ambiente gathered sin número
%	#1	Ecuación
\newcommand{\insertgatheredanum}[1]{%
	\emptyvarerr{\insertgatheredanum}{#1}{Ecuacion no definida}%
	\vspace{\margingatheredtop cm}%
	\begin{samepage}%
	\begin{gather*}
		\ensuremath{#1}
	\end{gather*}
	\vspace{\dimexpr-0.15cm + \margingatheredbottom cm}%
	\end{samepage}
}

% Insertar una ecuación (gathered) con leyenda
% 	#1	Label (opcional)
%	#2	Ecuación
%	#3	Leyenda
\newcommand{\insertgatheredcaptioned}[3][]{%
	\emptyvarerr{\insertgatheredcaptioned}{#2}{Ecuacion no definida}%
	\ifx\hfuzz#3\hfuzz%
		\insertgathered[#1]{#2}%
	\else
		\ifthenelse{\equal{\numberedequation}{true}}{%
			\vspace{\marginequationtop cm}%
			\begin{samepage}%
			\begin{equation}
				\begin{gathered}
					\text{#1} \ensuremath{#2}
				\end{gathered}
			\end{equation}
			\vspace{\margingatheredcapttop cm}%
			\coreinsertequationcaption{#3}%
			\vspace{\margingatheredcaptbottom cm}%
			\end{samepage}
		}{%
			\ifx\hfuzz#1\hfuzz
			\else
				\throwwarning{Label invalido en ecuacion (gathered) sin numero}
			\fi
			\insertgatheredcaptionedanum{#2}{#3}%
		}
		\fi
}

% Insertar una ecuación (gathered) con leyenda sin número
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertgatheredcaptionedanum}[2]{
	\emptyvarerr{\insertgatheredcaptionedanum}{#1}{Ecuacion no definida}
	\ifx\hfuzz#2\hfuzz%
		\insertgatheredanum{#1}%
	\else
		\vspace{\margingatheredtop cm}%
		\begin{samepage}%
		\begin{gather*}
			\ensuremath{#1}
		\end{gather*}
		\vspace{\dimexpr-0.2cm + \margingatheredcapttop cm}%
		\coreinsertequationcaption{#2}%
		\vspace{\dimexpr-0.05cm + \margingatheredcaptbottom cm}%
		\end{samepage}
	\fi
}

% Insertar una ecuación con el ambiente align
%	#1	Ecuación
\newcommand{\insertalign}[1]{%
	\emptyvarerr{\insertalign}{#1}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\marginaligntop cm}%
		\begin{samepage}%
		\begin{align}
			\ensuremath{#1}
		\end{align}
		\vspace{\marginalignbottom cm}%
		\end{samepage}
	}{%
		\insertalignanum{#1}%
	}
}

% Insertar una ecuación con el ambiente align sin número
%	#1	Ecuación
\newcommand{\insertalignanum}[1]{%
	\emptyvarerr{\insertalignanum}{#1}{Ecuacion no definida}%
	\vspace{\marginaligntop cm}%
	\begin{samepage}%
	\begin{align*}
		\ensuremath{#1}
	\end{align*}
	\vspace{\marginalignbottom cm}%
	\end{samepage}
}

% Insertar una ecuación (align) con leyenda
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertaligncaptioned}[2]{%
	\emptyvarerr{\insertaligncaptioned}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertalign{#1}%
	\else
		\ifthenelse{\equal{\numberedequation}{true}}{%
			\vspace{\marginaligntop cm}%
			\begin{samepage}%
			\begin{align}
				\ensuremath{#1}
			\end{align}
			\vspace{\marginaligncapttop cm}%
			\coreinsertequationcaption{#2}%
			\vspace{\marginaligncaptbottom cm}%
			\end{samepage}
		}{%
			\insertaligncaptionedanum{#1}{#2}%
		}
	\fi
}

% Insertar una ecuación (align) con leyenda sin número
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertaligncaptionedanum}[2]{%
	\emptyvarerr{\insertaligncaptionedanum}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertalignanum{#1}%
	\else
		\vspace{\marginaligntop cm}%
		\begin{samepage}%
		\begin{align*}
			\ensuremath{#1}
		\end{align*}
		\vspace{\marginaligncapttop cm}%
		\coreinsertequationcaption{#2}%
		\vspace{\marginaligncaptbottom cm}%
		\end{samepage}
	\fi
}

% Insertar una ecuación con el ambiente aligned
% 	#1	Label (opcional)
%	#2	Ecuación
\newcommand{\insertaligned}[2][]{%
	\emptyvarerr{\insertaligned}{#2}{Ecuacion no definida}%
	\ifthenelse{\equal{\numberedequation}{true}}{%
		\vspace{\marginequationtop cm}%
		\begin{samepage}%
		\begin{equation}
			\begin{aligned}
				\text{#1} \ensuremath{#2}
			\end{aligned}
		\end{equation}
		\vspace{\marginalignedbottom cm}%
		\end{samepage}
	}{%
		\ifx\hfuzz#1\hfuzz
		\else
			\throwwarning{Label invalido en ecuacion (aligned) sin numero}
		\fi
		\insertalignedanum{#2}%
	}
}

% Insertar una ecuación con el ambiente aligned sin número
%	#1	Ecuación
\newcommand{\insertalignedanum}[1]{%
	\emptyvarerr{\insertalignedanum}{#1}{Ecuacion no definida}%
	\vspace{\marginalignedtop cm}%
	\begin{samepage}%
	\begin{align*}
		\ensuremath{#1}
	\end{align*}
	\vspace{\dimexpr-0.2cm + \marginalignedbottom cm}%
	\end{samepage}
}

% Insertar una ecuación (aligned) con leyenda
% 	#1	Label (opcional)
%	#2	Ecuación
%	#3	Leyenda
\newcommand{\insertalignedcaptioned}[3][]{%
	\emptyvarerr{\insertalignedcaptioned}{#2}{Ecuacion no definida}%
	\ifx\hfuzz#3\hfuzz%
		\insertaligned[#1]{#2}%
	\else
		\ifthenelse{\equal{\numberedequation}{true}}{%
			\vspace{\marginequationtop cm}%
			\begin{samepage}%
			\begin{equation}
				\begin{aligned}
					\text{#1} \ensuremath{#2}
				\end{aligned}
			\end{equation}
			\vspace{\marginalignedcapttop cm}%
			\coreinsertequationcaption{#3}%
			\vspace{\marginalignedcaptbottom cm}%
			\end{samepage}
		}{%
			\ifx\hfuzz#1\hfuzz
			\else
				\throwwarning{Label invalido en ecuacion (aligned) sin numero}
			\fi
			\insertalignedcaptionedanum{#2}{#3}%
		}
	\fi
}

% Insertar una ecuación (aligned) con leyenda sin número
%	#1	Ecuación
%	#2	Leyenda
\newcommand{\insertalignedcaptionedanum}[2]{%
	\emptyvarerr{\insertalignedcaptionedanum}{#1}{Ecuacion no definida}%
	\ifx\hfuzz#2\hfuzz%
		\insertalignedanum{#1}%
	\else
		\vspace{\marginequationtop cm}%
		\begin{samepage}%
		\begin{equation}
			\begin{aligned}
				\ensuremath{#1}
			\end{aligned}
		\end{equation}
		\vspace{\marginalignedcapttop cm}%
		\coreinsertequationcaption{#2}%
		\vspace{\marginalignedcaptbottom cm}%
		\end{samepage}
	\fi
}

% Añade una imagen a un env "image" con borde
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Leyenda de la imagen (opcional)
\newcommand{\addimage}[4][]{%
	\addimageboxed[#1]{#2}{#3}{0}{#4}%
}

% Añade una imagen a un env "image" con borde
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Ancho de la línea (en pt)
%	#5	Leyenda de la imagen (opcional)
\newcommand{\addimageboxed}[5][]{%
	\checkonlyonenvimage%
	\begingroup%
	\setlength{\fboxsep}{0 pt}%
	\setlength{\fboxrule}{#4 pt}%
	\ifthenelse{\equal{\GLOBALenvimageadded}{true}}{%
		\hspace{\marginimagemultright cm}%
		\hspace{-0.125cm}%
	}{}%
	\subfloat[#5]{%
		\fbox{\includegraphics[#3]{#2}}#1}%
	\endgroup%
	\global\def\GLOBALenvimageadded {true}%
}

% Añade una imagen a un env "image" con borde sin leyenda
%	#1	Dirección de la imagen
%	#2	Parámetros de la imagen
\newcommand{\addimageanum}[2]{%
	\addimageboxedanum{#1}{#2}{0}%
}

% Añade una imagen a un env "image" con borde sin leyenda
%	#1	Dirección de la imagen
%	#2	Parámetros de la imagen
%	#3	Ancho de la línea (en pt)
\newcommand{\addimageboxedanum}[3]{%
	\checkonlyonenvimage%
	\begingroup%
	\setlength{\fboxsep}{0 pt}%
	\setlength{\fboxrule}{#3 pt}%
	\ifthenelse{\equal{\GLOBALenvimageadded}{true}}{%
		\hspace{\marginimagemultright cm}%
		\hspace{-0.125cm}%
	}{}%
	\fbox{\includegraphics[#2]{#1}}%
	\endgroup%
	\global\def\GLOBALenvimageadded {true}%
}

% Añade un salto de línea en las imágenes
\newcommand{\imagesnewline}{%
	\checkonlyonenvimage%
	\global\def\GLOBALenvimageadded {false}%
	\vspace{\marginimagemultbottom cm}%
	\linebreak\noindent%
}

% Agrega un espacio horizontal a las imágenes
% 	#1 Tamaño del espacio
\newcommand{\imageshspace}[1]{%
	\checkonlyonenvimage%
	\global\def\GLOBALenvimageadded {false}%
	\hspace{#1}%
}

% Agrega un espacio vertical a las imágenes
% 	#1 Tamaño del espacio
\newcommand{\imagesvspace}[1]{%
	\checkonlyonenvimage%
	\global\def\GLOBALenvimageadded {false}%
	~ \\ \vspace*{#1}%
}

% Insertar una imagen
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Leyenda de la imagen (opcional)
\newcommand{\insertimage}[4][]{%
	\insertimageboxed[#1]{#2}{#3}{0}{#4}%
}

% Insertar una imagen con recuadro
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Ancho de la línea (en pt)
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimageboxed}[5][]{%
	\emptyvarerr{\insertimageboxed}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageboxed}{#3}{Parametros de la imagen no definidos}%
	\emptyvarerr{\insertimageboxed}{#4}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	\vspace{\marginimagetop cm}%
	\begin{samepage}%
	\begin{figure}[H]%
		\thisfloatpagestyle{fancy}%
		\begingroup%
			\setlength{\fboxsep}{0 pt}%
			\setlength{\fboxrule}{#4 pt}%
			\centering%
			\fbox{\includegraphics[#3]{#2}}%
		\endgroup%
		\ifx\hfuzz#5\hfuzz%
			\vspace{\captionlessmarginimage cm}
		\else%
			\hspace{0cm}%
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#5 #1}}{\caption[\GLOBALcaptiondefn]{#5 #1}}%
		\fi
	\end{figure}
	\vspace{\marginimagebottom cm}%
	\end{samepage}
	\resetindexcaption%
}

% Insertar una imagen completa en un entorno multicol
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Posición, "bottom" o "top"
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimagemc}[5][]{%
	\insertimageboxedmc[#1]{#2}{#3}{0}{#4}{#5}%
}

% Insertar una imagen completa con recuadro en un entorno multicol
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Parámetros de la imagen
%	#4	Ancho de la línea (en pt)
%	#5	Posición, "bottom", "top", "fixed2", "fixed3", "fixed4"
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimageboxedmc}[6][]{%
	\emptyvarerr{\insertimageboxedmc}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageboxedmc}{#3}{Parametros de la imagen no definidos}%
	\emptyvarerr{\insertimageboxedmc}{#4}{Ancho de la linea no definido}%
	\emptyvarerr{\insertimageboxedmc}{#5}{Posicion de la imagen no definida}%
	\checkoutsideenvimage%
	\checkinsidemulticol%
	\setcaptionmargincm{\captionlrmarginmc}%
	\ifthenelse{\equal{#5}{bottom}}{%
		\begin{samepage}%
		\begin{figure*}[hb]
	}{
	\ifthenelse{\equal{#5}{top}}{%
		\begin{samepage}%
		\begin{figure*}[ht]
	}{
	\ifthenelse{\equal{#5}{fixed2}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[h]
	}{
	\ifthenelse{\equal{#5}{fixed2b}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[b]
	}{
	\ifthenelse{\equal{#5}{fixed2t}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[t]
	}{
	\ifthenelse{\equal{#5}{fixed3}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[h]
	}{
	\ifthenelse{\equal{#5}{fixed3b}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[b]
	}{
	\ifthenelse{\equal{#5}{fixed3t}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[t]
	}{
	\ifthenelse{\equal{#5}{fixed4}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[h]
	}{
	\ifthenelse{\equal{#5}{fixed4b}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[h]
	}{
	\ifthenelse{\equal{#5}{fixed4t}}{%
		\end{multicols}
		\begin{samepage}%
		\begin{figure*}[h]
	}{
		\errmessage{LaTeX Warning: Posicion de imagen invalida, valores esperados: bottom,top,fixed2,fixed2b,fixed2t,fixed3,fixed3b,fixed3t,fixed4,fixed4b,fixed4t}
		\stop}}}}}}}}}}
	}
		\thisfloatpagestyle{fancy}%
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#4 pt}
			\centering
			\fbox{\includegraphics[#3]{#2}}%
		\endgroup
		\ifx\hfuzz#6\hfuzz%
			\vspace{\captionlessmarginimage cm}%
		\else
			\hspace{0cm}
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#6 #1}}{\caption[\GLOBALcaptiondefn]{#6 #1}}
		\fi
	\end{figure*}
	\end{samepage}
	\ifthenelse{\equal{#5}{fixed2}}{%
		\begin{multicols}{2}
	}{
	\ifthenelse{\equal{#5}{fixed2b}}{%
		\begin{multicols}{2}
	}{
	\ifthenelse{\equal{#5}{fixed2t}}{%
		\begin{multicols}{2}
	}{
	\ifthenelse{\equal{#5}{fixed3}}{%
		\begin{multicols}{3}
	}{
	\ifthenelse{\equal{#5}{fixed3b}}{%
		\begin{multicols}{3}
	}{
	\ifthenelse{\equal{#5}{fixed3t}}{%
		\begin{multicols}{3}
	}{
	\ifthenelse{\equal{#5}{fixed4}}{%
		\begin{multicols}{4}
	}{
	\ifthenelse{\equal{#5}{fixed4b}}{%
		\begin{multicols}{4}
	}{
	\ifthenelse{\equal{#5}{fixed4t}}{%
		\begin{multicols}{4}
	}{
	}}}}}}}}}
	\setcaptionmargincm{\captionlrmargin}
	\resetindexcaption
}

% Insertar una imagen dentro de una tabla
%	#1	Dirección de la imagen
%	#2	Parámetros de la imagen
\newcommand{\inserttableimage}[2]{%
	\inserttableimageboxed{#1}{#2}{0}%
}

% Insertar una imagen dentro de una tabla con recuadro
%	#1	Dirección de la imagen
%	#2	Parámetros de la imagen
%	#3	Ancho de la línea (en pt)
\newcommand{\inserttableimageboxed}[3]{%
	\emptyvarerr{\inserttableimageboxed}{#1}{Direccion de la imagen no definida}%
	\emptyvarerr{\inserttableimageboxed}{#2}{Parametros de la imagen no definidos}%
	\emptyvarerr{\inserttableimageboxed}{#3}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	\begingroup%
	\setlength{\fboxsep}{0 pt}%
	\setlength{\fboxrule}{#3 pt}%
	\raisebox{-1\totalheight}{%
		\fbox{\includegraphics[#2]{#1}}}%
	\endgroup%
	\resetindexcaption%
}

% Insertar una imagen a la izquierda, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Leyenda de la imagen (opcional)
\newcommand{\insertimageleft}[4][]{%
	\insertimageleftboxed[#1]{#2}{#3}{0}{#4}%
}

% Insertar una imagen a la izquierda, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Ancho de la línea (en pt)
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftboxed}[5][]{%
	\emptyvarerr{\insertimageleftboxed}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageleftboxed}{#3}{Ancho de la imagen no definido}%
	\emptyvarerr{\insertimageleftboxed}{#4}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}{l}{#3\linewidth}%
		% \thisfloatpagestyle{fancy} no funciona bien
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#4 pt}
			\centering
			\fbox{\includegraphics[width=\linewidth]{#2}}%
		\endgroup
		\ifx\hfuzz#5\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#5 #1}}{\caption[\GLOBALcaptiondefn]{#5 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la izquierda, ajustada en un número de líneas, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Altura en líneas de la imagen
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftline}[5][]{%
	\insertimageleftlineboxed[#1]{#2}{#3}{0}{#4}{#5}%
}

% Insertar una imagen recuadrada a la izquierda, ajustada en un número de líneas, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Ancho de la línea (en pt)
%	#5	Altura en líneas de la imagen
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftlineboxed}[6][]{%
	\emptyvarerr{\insertimageleftlineboxed}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageleftlineboxed}{#3}{Ancho de la imagen no definido}%
	\emptyvarerr{\insertimageleftlineboxed}{#4}{Ancho de la linea no definido}%
	\emptyvarerr{\insertimageleftlineboxed}{#5}{Altura en lineas de la imagen flotante izquierda no definida}
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}[#5]{l}{#3\linewidth}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#4 pt}
			\centering
			\fbox{\includegraphics[width=\linewidth]{#2}}%
		\endgroup
		\ifx\hfuzz#6\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#6 #1}}{\caption[\GLOBALcaptiondefn]{#6 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la derecha, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Leyenda de la imagen (opcional)
\newcommand{\insertimageright}[4][]{%
	\insertimagerightboxed[#1]{#2}{#3}{0}{#4}%
}

% Insertar una imagen recuadrada a la derecha, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Ancho de la línea (en pt)
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightboxed}[5][]{%
	\emptyvarerr{\insertimagerightboxed}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimagerightboxed}{#3}{Ancho de la imagen no defindo}%
	\emptyvarerr{\insertimagerightboxed}{#4}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}{r}{#3\linewidth}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#4 pt}
			\centering
			\fbox{\includegraphics[width=\linewidth]{#2}}%
		\endgroup
		\ifx\hfuzz#5\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#5 #1}}{\caption[\GLOBALcaptiondefn]{#5 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la derecha, ajustada en un número de líneas, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Altura en líneas de la imagen
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightline}[5][]{%
	\insertimagerightlineboxed[#1]{#2}{#3}{0}{#4}{#5}%
}

% Insertar una imagen recuadrada a la derecha, ajustada en un número de líneas, escalada, ancho fijo
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho de la imagen (en linewidth)
%	#4	Ancho de la línea (en pt)
%	#5	Altura en líneas de la imagen
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightlineboxed}[6][]{%
	\emptyvarerr{\insertimagerightlineboxed}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimagerightlineboxed}{#3}{Ancho de la imagen no defindo}%
	\emptyvarerr{\insertimagerightlineboxed}{#4}{Ancho de la linea no definido}%
	\emptyvarerr{\insertimagerightlineboxed}{#5}{Altura en lineas de la imagen flotante derecha no definida}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}[#5]{r}{#3\linewidth}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#4 pt}
			\centering
			\fbox{\includegraphics[width=\linewidth]{#2}}%
		\endgroup
		\ifx\hfuzz#6\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#6 #1}}{\caption[\GLOBALcaptiondefn]{#6 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la izquierda, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftp}[5][]{%
	\xspace ~ \\%
	\vspace{-2\baselineskip}%
	\par%
	\insertimageleftboxedp[#1]{#2}{#3}{#4}{0}{#5}%
}

% Insertar una imagen a la izquierda, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Ancho de la línea (en pt)
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftboxedp}[6][]{%
	\emptyvarerr{\insertimageleftboxedp}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageleftboxedp}{#3}{Ancho del objeto no definido}%
	\emptyvarerr{\insertimageleftboxedp}{#4}{Propiedades de la imagen no defindos}%
	\emptyvarerr{\insertimageleftboxedp}{#5}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}{l}{#3}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#5 pt}
			\centering
			\fbox{\includegraphics[#4]{#2}}%
		\endgroup
		\ifx\hfuzz#6\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#6 #1}}{\caption[\GLOBALcaptiondefn]{#6 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la izquierda, ajustada en un número de líneas, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Altura en líneas de la imagen
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftlinep}[6][]{%
	\insertimageleftlineboxedp[#1]{#2}{#3}{#4}{0}{#5}{#6}%
}

% Insertar una imagen recuadrada a la izquierda, ajustada en un número de líneas, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Ancho de la línea (en pt)
%	#6	Altura en líneas de la imagen
%	#7	Leyenda de la imagen (opcional)
\newcommand{\insertimageleftlineboxedp}[7][]{%
	\emptyvarerr{\insertimageleftlineboxedp}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimageleftlineboxedp}{#3}{Ancho del objeto no definido}%
	\emptyvarerr{\insertimageleftlineboxedp}{#4}{Propiedades de la imagen no definidos}%
	\emptyvarerr{\insertimageleftlineboxedp}{#5}{Ancho de la linea no definido}%
	\emptyvarerr{\insertimageleftlineboxedp}{#6}{Altura en lineas de la imagen flotante izquierda no definida}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}[#6]{l}{#3}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#5 pt}
			\centering
			\fbox{\includegraphics[#4]{#2}}%
		\endgroup
		\ifx\hfuzz#7\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#7 #1}}{\caption[\GLOBALcaptiondefn]{#7 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la derecha, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto (en cm)
%	#4	Propiedades de la imagen
%	#5	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightp}[5][]{%
	\xspace ~ \\%
	\vspace{-2\baselineskip}%
	\par%
	\insertimagerightboxedp[#1]{#2}{#3}{#4}{0}{#5}%
}

% Insertar una imagen recuadrada a la derecha, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Ancho de la línea (en pt)
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightboxedp}[6][]{%
	\emptyvarerr{\insertimagerightboxedp}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimagerightboxedp}{#3}{Ancho del objeto no definido}%
	\emptyvarerr{\insertimagerightboxedp}{#4}{Propiedades de la imagen no definidos}%
	\emptyvarerr{\insertimagerightboxedp}{#5}{Ancho de la linea no definido}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}{r}{#3}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#5 pt}
			\centering
			\fbox{\includegraphics[#4]{#2}}%
		\endgroup
		\ifx\hfuzz#6\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#6 #1}}{\caption[\GLOBALcaptiondefn]{#6 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Insertar una imagen a la derecha, ajustada en un número de líneas, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto (en cm)
%	#4	Propiedades de la imagen
%	#5	Altura en líneas de la imagen
%	#6	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightlinep}[6][]{%
	\insertimagerightlineboxedp[#1]{#2}{#3}{#4}{0}{#5}{#6}%
}

% Insertar una imagen recuadrada a la derecha, ajustada en un número de líneas, propiedades variables
% 	#1	Label (opcional)
%	#2	Dirección de la imagen
%	#3	Ancho del objeto
%	#4	Propiedades de la imagen
%	#5	Ancho de la línea (en pt)
%	#6	Altura en líneas de la imagen
%	#7	Leyenda de la imagen (opcional)
\newcommand{\insertimagerightlineboxedp}[7][]{%
	\emptyvarerr{\insertimagerightlineboxedp}{#2}{Direccion de la imagen no definida}%
	\emptyvarerr{\insertimagerightlineboxedp}{#3}{Ancho del objeto no definido}%
	\emptyvarerr{\insertimagerightlineboxedp}{#4}{Propiedades de la imagen no definidos}%
	\emptyvarerr{\insertimagerightlineboxedp}{#5}{Ancho de la linea no definido}%
	\emptyvarerr{\insertimagerightlineboxedp}{#6}{Altura en lineas de la imagen flotante derecha no definida}%
	\checkoutsideenvimage%
	~%
	\vspace{-\baselineskip}%
	\par%
	\begin{wrapfigure}[#6]{r}{#3}%
		\setcaptionmargincm{0}
		\ifthenelse{\equal{\figurecaptiontop}{true}}{}{
			\vspace{\marginfloatimages pt}
		}
		\begingroup
			\setlength{\fboxsep}{0 pt}
			\setlength{\fboxrule}{#5 pt}
			\centering
			\fbox{\includegraphics[#4]{#2}}%
		\endgroup
		\ifx\hfuzz#7\hfuzz
			\vspace{\captionlessmarginimage cm}
		\else
			\ifthenelse{\equal{\captionmarginimage}{0}}{}{\vspace{\captionmarginimage cm}}%
			\ifthenelse{\equal{\GLOBALcaptiondefn}{EMPTY-VAR}}{\caption{#7 #1}}{\caption[\GLOBALcaptiondefn]{#7 #1}}
		\fi
	\end{wrapfigure}
	\setcaptionmargincm{\captionlrmargin}%
	\resetindexcaption%
}

% Inserta una imagen con parametros keyvals almacenados en una variable
% 	#1	Parámetros (keyvals)
%	#2	Dirección de la imagen
\newcommand{\coreinsertkeyimage}[2]{%
	\expandafter\includegraphics\expandafter[#1]{\expandafter#2}%
}

% Define la clave resolution al insertar imágenes
\makeatletter
\define@key{Gin}{resolution}{\pdfimageresolution=#1\relax}
\makeatother

% Activa la numeración en las secciones
\def\coreintializetitlenumbering {
	% Section
	\ifthenelse{\equal{\GLOBALchapternumenabled}{false}}{
		\ifthenelse{\equal{\GLOBALsectionalph}{true}}{
			\renewcommand{\thesection}{\Alph{section}}
		}{
			\renewcommand{\thesection}{\arabic{section}}
		}
	}{
		\ifthenelse{\equal{\GLOBALsectionalph}{true}}{
			\renewcommand{\thesection}{\thechapter.\Alph{section}}
		}{
			\renewcommand{\thesection}{\thechapter.\arabic{section}}
		}
	}
	% Subsection
	\ifthenelse{\equal{\GLOBALsectionanumenabled}{true}}{
		\renewcommand{\thesubsection}{\arabic{subsection}}
	}{
		\renewcommand{\thesubsection}{\thesection.\arabic{subsection}}
	}
	% Subsubsection
	\ifthenelse{\equal{\GLOBALsubsectionanumenabled}{true}}{
		\renewcommand{\thesubsubsection}{\arabic{subsubsection}}
	}{
		\renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}
	}
	% Subsubsubsection
	\ifthenelse{\equal{\GLOBALsubsectionanumenabled}{true}}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\renewcommand{\thesubsubsubsection}{\arabic{subsubsection}.\arabic{subsubsubsection}.}
		}{
			\renewcommand{\thesubsubsubsection}{\arabic{subsubsection}.\arabic{subsubsubsection}}
		}
	}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}.}
		}{
			\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}}
		}
	}
}

% Parcha el formato de capítulos
\pretocmd{\chapter}{
	\ifthenelse{\equal{\showsectioncaptioncode}{chap}}{ % Reinicia código fuente
		\addtocounter{templateListings}{\value{lstlisting}}
		\setcounter{lstlisting}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptioneqn}{chap}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\equationrestart}{chap}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptionfig}{chap}}{ % Reinicia figuras
		\addtocounter{templateFigures}{\value{figure}}
		\setcounter{figure}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptiontab}{chap}}{ % Reinicia tablas
		\addtocounter{templateTables}{\value{table}}
		\setcounter{table}{0}
	}{}
	\global\def\GLOBALchapternumenabled {true}
	\coreintializetitlenumbering
}{}{}

% Parcha el formato de secciones al pasar desde una anum, vuelve a activar número
% de la sección
\pretocmd{\section}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sec}}{ % Reinicia código fuente
		\addtocounter{templateListings}{\value{lstlisting}}
		\setcounter{lstlisting}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptioneqn}{sec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\equationrestart}{sec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptionfig}{sec}}{ % Reinicia figuras
		\addtocounter{templateFigures}{\value{figure}}
		\setcounter{figure}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptiontab}{sec}}{ % Reinicia tablas
		\addtocounter{templateTables}{\value{table}}
		\setcounter{table}{0}
	}{}
	\global\def\GLOBALsectionanumenabled {false}
	\global\def\GLOBALsubsectionanumenabled {false}
	\coreintializetitlenumbering
}{}{}

% Comienza nueva subsección, si está dentro de una sectionanum entonces no dibuja el
% número de sección, si no entonces dibuja el número de forma normal
\pretocmd{\subsection}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssec}}{ % Reinicia código fuente
		\addtocounter{templateListings}{\value{lstlisting}}
		\setcounter{lstlisting}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\equationrestart}{ssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptionfig}{ssec}}{ % Reinicia figuras
		\addtocounter{templateFigures}{\value{figure}}
		\setcounter{figure}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptiontab}{ssec}}{ % Reinicia tablas
		\addtocounter{templateTables}{\value{table}}
		\setcounter{table}{0}
	}{}
	\global\def\GLOBALsubsectionanumenabled {false}
	\coreintializetitlenumbering
}{}{}

% Comienza nueva subsubsección, aquí hay varios casos:
%	- si está dentro de una subsección sin número ignora la sección
%	- si no, entonces puede estar dentro de una sección sin número o no, en ese caso
%	  debe evaluar ambas posibilidades
\pretocmd{\subsubsection}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sssec}}{ % Reinicia código fuente
		\addtocounter{templateListings}{\value{lstlisting}}
		\setcounter{lstlisting}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptioneqn}{sssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\equationrestart}{sssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptionfig}{sssec}}{ % Reinicia figuras
		\addtocounter{templateFigures}{\value{figure}}
		\setcounter{figure}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptiontab}{sssec}}{ % Reinicia tablas
		\addtocounter{templateTables}{\value{table}}
		\setcounter{table}{0}
	}{}
	\coreintializetitlenumbering
}{}{}

\pretocmd{\subsubsubsection}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssssec}}{ % Reinicia código fuente
		\addtocounter{templateListings}{\value{lstlisting}}
		\setcounter{lstlisting}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\equationrestart}{ssssec}}{ % Reinicia ecuaciones
		\addtocounter{templateEquations}{\value{equation}}
		\setcounter{equation}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptionfig}{ssssec}}{ % Reinicia figuras
		\addtocounter{templateFigures}{\value{figure}}
		\setcounter{figure}{0}
	}{}
	\ifthenelse{\equal{\showsectioncaptiontab}{ssssec}}{ % Reinicia tablas
		\addtocounter{templateTables}{\value{table}}
		\setcounter{table}{0}
	}{}
}{}{}

% Insertar un título sin número
% 	#1	Título
\newcommand{\sectionanum}[1]{
	\emptyvarerr{\sectionanum}{#1}{Titulo no definido}
	\phantomsection
	\needspace{3\baselineskip}
	\section*{#1}
	\addcontentsline{toc}{section}{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{section}}{}
	\changeheadertitle{#1}
	\setcounter{subsection}{0}
	\renewcommand{\thesubsection}{\arabic{subsection}}
	\global\def\GLOBALsectionanumenabled {true}
}

% Insertar un título sin número y sin indexar
% 	#1	Título
\newcommand{\sectionanumnoi}[1]{
	\emptyvarerr{\sectionanumnoi}{#1}{Titulo no definido}
	\phantomsection
	\needspace{3\baselineskip}
	\section*{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{section}}{}
	\changeheadertitle{#1}
	\setcounter{subsection}{0}
	\renewcommand{\thesubsection}{\arabic{subsection}}
	\global\def\GLOBALsectionanumenabled {true}
}

% Insertar un título sin número sin cambiar el título del header
% 	#1	Título
\newcommand{\sectionanumheadless}[1]{
	\emptyvarerr{\sectionanumnoheadless}{#1}{Titulo no definido}
	\section*{#1}
	\addcontentsline{toc}{section}{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{section}}{}
	\setcounter{subsection}{0}
	\renewcommand{\thesubsection}{\arabic{subsection}}
	\global\def\GLOBALsectionanumenabled {true}
}

% Insertar un título sin número, sin indexar y sin cambiar el título del header
% 	#1	Título
\newcommand{\sectionanumnoiheadless}[1]{
	\emptyvarerr{\sectionanumnoiheadless}{#1}{Titulo no definido}
	\section*{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{section}}{}
	\setcounter{subsection}{0}
	\renewcommand{\thesubsection}{\arabic{subsection}}
	\global\def\GLOBALsectionanumenabled {true}
}

% Insertar un subtítulo sin número
% 	#1	Subtítulo
\newcommand{\subsectionanum}[1]{
	\emptyvarerr{\subsectionanum}{#1}{Subtitulo no definido}
	\subsection*{#1}
	\addcontentsline{toc}{subsection}{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsection}}{}
	\setcounter{subsubsection}{0}
	\renewcommand{\thesubsubsection}{\arabic{subsubsection}}
	\global\def\GLOBALsubsectionanumenabled {true}
}

% Insertar un subtítulo sin número y sin indexar
% 	#1	Subtítulo
\newcommand{\subsectionanumnoi}[1]{
	\emptyvarerr{\subsectionanumnoi}{#1}{Subtitulo no definido}
	\subsection*{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsection}}{}
	\setcounter{subsubsection}{0}
	\renewcommand{\thesubsubsection}{\arabic{subsubsection}}
	\global\def\GLOBALsubsectionanumenabled {true}
}

% Insertar un sub-subtítulo sin número
% 	#1	Sub-subtítulo
\newcommand{\subsubsectionanum}[1]{
	\emptyvarerr{\subsubsectionanum}{#1}{Sub-subtitulo no definido}
	\subsubsection*{#1}
	\addcontentsline{toc}{subsubsection}{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsubsection}}{}
	\setcounter{subsubsubsection}{0}
	\ifthenelse{\equal{\showdotaftersnum}{true}}{
		\renewcommand{\thesubsubsubsection}{\arabic{subsubsubsection}.}
	}{
		\renewcommand{\thesubsubsubsection}{\arabic{subsubsubsection}}
	}
}

% Insertar un sub-subtítulo sin número y sin indexar
% 	#1	Sub-subtítulo
\newcommand{\subsubsectionanumnoi}[1]{
	\emptyvarerr{\subsubsectionanumnoi}{#1}{Sub-subtitulo no definido}
	\subsubsection*{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsubsection}}{}
	\setcounter{subsubsubsection}{0}
	\ifthenelse{\equal{\showdotaftersnum}{true}}{
		\renewcommand{\thesubsubsubsection}{\arabic{subsubsubsection}.}
	}{
		\renewcommand{\thesubsubsubsection}{\arabic{subsubsubsection}}
	}
}

% Insertar un sub-sub-subtítulo sin número
% 	#1	Sub-sub-subtítulo
\newcommand{\subsubsubsectionanum}[1]{
	\emptyvarerr{\subsubsubsectionanum}{#1}{Sub-sub-subtitulo no definido}
	\subsubsubsection*{#1}
	\addcontentsline{toc}{subsubsubsection}{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsubsubsection}}{}
}

% Insertar un sub-sub-subtítulo sin número y sin indexar
% 	#1	Sub-sub-subtítulo
\newcommand{\subsubsubsectionanumnoi}[1]{
	\emptyvarerr{\subsubsubsectionanumnoi}{#1}{Sub-sub-subtitulo no definido}
	\subsubsection*{#1}
	\ifthenelse{\equal{\anumsecaddtocounter}{true}}{\stepcounter{subsubsubsection}}{}
}

% Cambia el título del encabezado (header)
%	#1	Título
\newcommand{\changeheadertitle}[1]{
	\emptyvarerr{\changeheadertitle}{#1}{Titulo no definido}
	\markboth{#1}{}
}

% Elimina el título del encabezado (header)
\newcommand{\clearheadertitle}{
	\markboth{}{}
}

% Insertar un título en un índice, sin número de página
%	#1	Margen superior en pt. (opcional)
%	#2	Título
\newcommand{\insertindextitle}[2][]{
	\emptyvarerr{\insertindextitle}{#2}{Titulo no definido}
	\ifx\hfuzz#1\hfuzz
		\addtocontents{toc}{\protect\addvspace{\indextitlemargin pt}}
	\else
		\addtocontents{toc}{\protect\addvspace{#1 pt}}
	\fi
	\addtocontents{toc}{\noindent\hyperref[swpn]{\textbf{#2}}}
}

% Insertar un título en un índice, con número de página
%	#1	Margen superior en pt. (opcional)
%	#2	Título
\newcommand{\insertindextitlepage}[2][]{
	\emptyvarerr{\insertindextitlepage}{#2}{Titulo no definido}
	\ifx\hfuzz#1\hfuzz
		\addtocontents{toc}{\protect\addvspace{\indextitlemargin pt}}
	\else
		\addtocontents{toc}{\protect\addvspace{#1 pt}}
	\fi
	\addcontentsline{toc}{section}{#2}
}

% Crea una sección en el índice y en el header
%	#1	Margen superior en pt. (opcional)
%	#2	Título
\newcommand{\createhiddensection}[2][]{
	\changeheadertitle{#2}
	\insertindextitlepage[#1]{#2}
}

% Crear un capítulo como una sección
%	#1	Título
\newcommand{\newchapter}[1]{
	\emptyvarerr{\newchapter}{#1}{Titulo no definido}
	\clearpage
	\stepcounter{section}
	\phantomsection
	\needspace{3\baselineskip}
	\vspace* {3cm}
	\noindent {\huge{\textbf{\nomchapter\ \thesection}}} \\
	\vspace* {0.5cm} \\
	\noindent {\Huge{\textbf{#1}}} \\
	\vspace {0.5cm} \\
	\addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}
	\markboth{#1}{}
}

% Insertar párrafo
\newcommand{\newp}{%
	\hbadness=10000 \vspace{\baselineskip} \par%
}

% Insertar párrafo
% 	#1	Párrafo
\newcommand{\newpar}[1]{%
	\hbadness=10000 #1 \newp%
}

% Insertar párrafo sin nueva línea al final
% 	#1	Párrafo
\newcommand{\newparnl}[1]{%
	#1 \par%
}

% Crea un salto de columna en el entorno multicol
\newcommand{\newcolumn}{%
	\checkinsidemulticol\vfill\null\columnbreak%
}

% Salto de página en entorno multicol
\newcommand{\newpagemulticol}{%
	\newcolumn\newcolumn\clearpage%
}

% Redimensiona un ítem
% 	#1	Tamaño del nuevo objeto (En linewidth)
%	#2	Objeto a redimensionar
\newcommand{\itemresize}[2]{%
	\emptyvarerr{\itemresize}{#1}{Tamano del nuevo objeto no definido}%
	\emptyvarerr{\itemresize}{#2}{Objeto a redimensionar no definido}%
	\resizebox{#1\linewidth}{!}{#2}%
}

% Crea una página vacía sin header o footer
\newcommand{\insertemptypage}{%
	\clearpage
	\setcounter{templatePageCounter}{\thepage}
	\pagenumbering{gobble}
	\null
	\thispagestyle{empty}
	\clearpage
	\pagenumbering{arabic}
	\setcounter{page}{\thetemplatePageCounter}
}

% Inserta una página vacía, aunque conserva header, footer y numeración
\newcommand{\insertblankpage}{%
	\clearpage
	\null
	\clearpage
}

% Añade un archivo pdf con el header
%	#1	Parámetros (opcional)
%	#2	Nombre del archivo pdf
\newcommand{\includehfpdf}[2][]{%
	\includepdf[pagecommand={\pagestyle{fancy}},#1]{#2}%
}

% Añade un archivo pdf con el header
%	#1	Parámetros (opcional)
%	#2	Nombre del archivo pdf
\newcommand{\includefullhfpdf}[2][]{%
	\includepdf[pages=-,pagecommand={\pagestyle{fancy}},#1]{#2}%
}

% Inserta un texto entre comillas
%	#1 	Texto
\newcommand{\quotes}[1]{%
	\enquote*{#1}%
}

% Inserta un texto entre comillas y negrita
%	#1 	Texto
\newcommand{\quotesbf}[1]{%
	\quotes{\textbf{#1}}%
}

% Inserta un texto entre comillas e itálico
%	#1 	Texto
\newcommand{\quotesit}[1]{%
	\quotes{\textit{#1}}%
}

% Inserta un texto entre comillas y typewriter
%	#1 	Texto
\newcommand{\quotesttt}[1]{%
	\quotes{\texttt{#1}}%
}

% Inserta un texto entre comillas dobles
%	#1 	Texto
\newcommand{\doublequotes}[1]{%
	\enquote{#1}%
}

% Inserta una cita con texto elevado
%	#1	Cita
\newcommand{\scite}[1]{%
	\textsuperscript{\cite{#1}}%
}

% Fuerza la indentación
\newcommand{\forceindent}{%
	~ \\ %
	
	\vspace{-2\baselineskip}%
}

% Inserta un texto con el formato de enlace
% 	#1 	Enlace
\newcommand{\hreftext}[1]{%
	\ifthenelse{\equal{\fonturl}{same}}{%
		#1%
	}{%
	\ifthenelse{\equal{\fonturl}{tt}}{%
		\texttt{#1}%
	}{%
	\ifthenelse{\equal{\fonturl}{rm}}{%
		\textrm{#1}%
	}{%
	\ifthenelse{\equal{\fonturl}{sf}}{%
		\textsf{#1}%
	}{}}}}%
}

% Inserta un email con un link cliqueable
%	#1 	Dirección email
\newcommand{\insertemail}[1]{%
	\href{mailto:#1}{\hreftext{#1}}%
}

% Inserta un teléfono celular
%	#1	Teléfono celular
\newcommand{\insertphone}[1]{%
	\href{tel:#1}{\hreftext{#1}}%
}

% Reinicia el número de ecuaciones
\newcommand{\restartequation}{%
	\setcounter{equation}{0}%
}

% Desactiva el margen de las leyendas
\newcommand{\disablecaptionmargin}{%
	\setcaptionmargincm{0}%
}

% Reinicia el margen de las leyendas
\newcommand{\resetcaptionmargin}{%
	\setcaptionmargincm{\captionlrmargin}%
}

% Modifica el color de las tablas
%	#1	Posición inicial del inicio de colores
\newcommand{\settablerowcolors}[1]{%
	\emptyvarerr{\settablerowcolors}{#1}{Posicion de fila no definida}
	
	% Usa colores normales
	\ifthenelse{\equal{\GLOBALtablerowcolorswitch}{false}}{
		\ifthenelse{\equal{\tablerowfirstcolor}{none}}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{#1}{}{}
			}{
				\rowcolors{#1}{\tablerowsecondcolor}{}
			}
		}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{#1}{}{\tablerowfirstcolor}
			}{
				\rowcolors{#1}{\tablerowsecondcolor}{\tablerowfirstcolor}
			}
		}
	% Usa colores alternados
	}{
		\ifthenelse{\equal{\tablerowfirstcolor}{none}}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{#1}{}{}
			}{
				\rowcolors{#1}{}{\tablerowsecondcolor}
			}
		}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{#1}{\tablerowfirstcolor}{}
			}{
				\rowcolors{#1}{\tablerowfirstcolor}{\tablerowsecondcolor}
			}
		}
	}
	
	% Actualiza el índice previo
	\global\def\GLOBALtablerowcolorindex {#1}
}

% Alterna los colores de las tablas a la última ejecución
\newcommand{\settablerowcolorslast}{
	% Usa colores normales
	\ifthenelse{\equal{\GLOBALtablerowcolorswitch}{false}}{
		\ifthenelse{\equal{\tablerowfirstcolor}{none}}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{\GLOBALtablerowcolorindex}{}{}
			}{
				\rowcolors{\GLOBALtablerowcolorindex}{\tablerowsecondcolor}{}
			}
		}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{\GLOBALtablerowcolorindex}{}{\tablerowfirstcolor}
			}{
				\rowcolors{\GLOBALtablerowcolorindex}{\tablerowsecondcolor}{\tablerowfirstcolor}
			}
		}
	% Usa colores alternados
	}{
		\ifthenelse{\equal{\tablerowfirstcolor}{none}}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{\GLOBALtablerowcolorindex}{}{}
			}{
				\rowcolors{\GLOBALtablerowcolorindex}{}{\tablerowsecondcolor}
			}
		}{
			\ifthenelse{\equal{\tablerowsecondcolor}{none}}{
				\rowcolors{\GLOBALtablerowcolorindex}{\tablerowfirstcolor}{}
			}{
				\rowcolors{\GLOBALtablerowcolorindex}{\tablerowfirstcolor}{\tablerowsecondcolor}
			}
		}
	}
}

% Activa el color de las filas de las tablas
%	#1	Posición inicial del inicio de colores
\newcommand{\enabletablerowcolor}[1][]{
	\ifx\hfuzz#1\hfuzz
		\settablerowcolors{2}
	\else
		\settablerowcolors{#1}
	\fi
}

% Desactiva el color de las filas de las tablas
\newcommand{\disabletablerowcolor}{\rowcolors{2}{}{}}

% Alterna los colores de las filas de las tablas
\newcommand{\switchtablerowcolors}{
	\ifthenelse{\equal{\GLOBALtablerowcolorswitch}{false}}{
		\global\def\GLOBALtablerowcolorswitch {true}
	}{
		\global\def\GLOBALtablerowcolorswitch {false}
	}
	\settablerowcolorslast
}

% Actualiza el padding de las celdas de las tablas
%	#1	Padding horizontal (em)
%	#2	Padding vertical (em)
\newcommand{\settablecellpadding}[2]{
	\emptyvarerr{\settablecellpadding}{#1}{Padding horizontal no definido}
	\emptyvarerr{\settablecellpadding}{#2}{Padding vertical no definido}
	\setlength{\tabcolsep}{#1 em} % Horizontal
	\def\arraystretch {#2} % Vertical
}

% Resetea el padding de las celdas de las tablas
\newcommand{\resettablecellpadding}{
	\settablecellpadding{\tablepaddingh}{\tablepaddingv}
}

% Cambia el tamaño de la página
%	#1	Orientacion de la página, puede ser 0 o 90. Por defecto es cero
%	#2	Ancho de la página (cm)
%	#3	Alto de la página (cm)
\newcommand{\changepagesize}[3][]{
	% \emptyvarerr{\changepagesize}{#1}{Orientacion de la pagina}
	\emptyvarerr{\changepagesize}{#2}{Ancho de la pagina no definida}
	\emptyvarerr{\changepagesize}{#3}{Altura de la pagina no definida}
	\ifthenelse{\equal{\compilertype}{lualatex}}{
		\throwwarning{Funcion no valida en compilador lualatex}
	}{
		\clearpage
		\ifthenelse{\equal{#1}{}}{
			\newgeometry{left=\pagemarginleft cm, top=\pagemargintop cm, right=\pagemarginright cm, bottom=\pagemarginbottom cm, paperwidth=#2 cm, paperheight=#3 cm}
		}{
		\ifthenelse{\equal{#1}{0}}{
			\newgeometry{left=\pagemarginleft cm, top=\pagemargintop cm, right=\pagemarginright cm, bottom=\pagemarginbottom cm, paperwidth=#2 cm, paperheight=#3 cm}
		}{
		\ifthenelse{\equal{#1}{90}}{
			\newgeometry{left=\pagemarginleft cm, top=\pagemargintop cm, right=\pagemarginright cm, bottom=\pagemarginbottom cm, paperwidth=#3 cm, paperheight=#2 cm}
		}{
			\throwbadconfig{Orientacion de pagina no valido}{\changepagesize}{0,90}}}
		}
	}
}

% Ofrece diferentes formatos de pagina
% https://www.prepressure.com/library/paper-size
%	#1	Indica la rotación, puede ser 0 o 90
%	#2	Formato de la pagina
\newcommand{\changepagesizeformat}[2][]{%
	\emptyvarerr{\changepagesizeformat}{#2}{Formato de pagina no definido}
	\ifthenelse{\equal{#2}{4A0}}{
		\changepagesize[#1]{168.2}{237.8}
	}{
	\ifthenelse{\equal{#2}{2A0}}{
		\changepagesize[#1]{118.9}{168.2}
	}{
	\ifthenelse{\equal{#2}{A0}}{
		\changepagesize[#1]{84.1}{118.9}
	}{
	\ifthenelse{\equal{#2}{A1}}{
		\changepagesize[#1]{59.4}{84.1}
	}{
	\ifthenelse{\equal{#2}{A2}}{
		\changepagesize[#1]{42.0}{84.1}
	}{
	\ifthenelse{\equal{#2}{A3}}{
		\changepagesize[#1]{29.7}{42.0}
	}{
	\ifthenelse{\equal{#2}{A4}}{
		\changepagesize[#1]{21.0}{29.7}
	}{
	\ifthenelse{\equal{#2}{A5}}{
		\changepagesize[#1]{14.8}{21.0}
	}{
	\ifthenelse{\equal{#2}{A6}}{
		\changepagesize[#1]{10.5}{14.8}
	}{
	\ifthenelse{\equal{#2}{letter}}{
		\changepagesize[#1]{21.59}{27.94}
	}{
	\ifthenelse{\equal{#2}{legal}}{
		\changepagesize[#1]{21.59}{35.6}
	}{
	\ifthenelse{\equal{#2}{foolscap}}{
		\changepagesize[#1]{20.3}{33.0}
	}{
	\ifthenelse{\equal{#2}{executive}}{
		\changepagesize[#1]{18.41}{26.67}
	}{
	\ifthenelse{\equal{#2}{ledger}}{
		\changepagesize[#1]{27.94}{43.18}
	}{
	\ifthenelse{\equal{#2}{tabloid}}{
		\changepagesize[#1]{43.18}{27.94}
	}{
	\ifthenelse{\equal{#2}{ANSIC}}{
		\changepagesize[#1]{55.9}{43.2}
	}{
	\ifthenelse{\equal{#2}{ANSID}}{
		\changepagesize[#1]{86.4}{55.9}
	}{
	\ifthenelse{\equal{#2}{ANSIE}}{
		\changepagesize[#1]{111.8}{86.4}
	}{
	\ifthenelse{\equal{#2}{B0}}{
		\changepagesize[#1]{100}{141.4}
	}{
	\ifthenelse{\equal{#2}{B1}}{
		\changepagesize[#1]{70.7}{100}
	}{
	\ifthenelse{\equal{#2}{B2}}{
		\changepagesize[#1]{50}{70.7}
	}{
	\ifthenelse{\equal{#2}{B3}}{
		\changepagesize[#1]{35.3}{50}
	}{
	\ifthenelse{\equal{#2}{B4}}{
		\changepagesize[#1]{25}{35.3}
	}{
	\ifthenelse{\equal{#2}{B5}}{
		\changepagesize[#1]{17.6}{25}
	}{
	\ifthenelse{\equal{#2}{B6}}{
		\changepagesize[#1]{12.5}{17.6}
	}{
		\throwbadconfig{Estilo de pagina no valido}{\changepagesizeformat}{4A0,2A0,A0,A1,A2,A3,A4,A5,A6,letter,legal,foolscap,executive,ledger,tabloid,ANSIC,ANSID,ANSIE,B0,B1,B2,B3,B4,B5,B6}}}}}}}}}}}}}}}}}}}}}}}}}
	}
}

% Crea variables para guardar configuraciones de columnas
\global\def\GLOBALtwocolumnap {l}
\global\def\GLOBALtwocolumnav {t}
\global\def\GLOBALtwocolumnbp {l}
\global\def\GLOBALtwocolumnbv {t}
\global\def\GLOBALthreecolumnap {l}
\global\def\GLOBALthreecolumnav {t}
\global\def\GLOBALthreecolumnbp {l}
\global\def\GLOBALthreecolumnbv {t}
\global\def\GLOBALthreecolumncp {l}
\global\def\GLOBALthreecolumncv {t}

% Chequea posición columna
%	#1	Valor posición (c, t, b)
\newcommand{\corecheckcolumnvvalue}[1]{%
	\ifthenelse{\equal{#1}{c}}{}{%
	\ifthenelse{\equal{#1}{t}}{}{%
	\ifthenelse{\equal{#1}{b}}{}{%
		\errmessage{LaTeX Warning: Posicion vertical columna invalido, valores esperados: c,t,b}%
	}}}%
}

% Chequea alineación columna
%	#1	Valor alineación (c, l, r)
\newcommand{\corecheckcolumnpvalue}[1]{%
	\ifthenelse{\equal{#1}{c}}{}{%
	\ifthenelse{\equal{#1}{l}}{}{%
	\ifthenelse{\equal{#1}{r}}{}{%
		\errmessage{LaTeX Warning: Alineacion columna invalida, valores esperados: c,l,r}%
	}}}%
}

% Configura las columnas dobles
%	#1	Posición vertical columna izquierda (c, t, b)
%	#2	Alineación horizontal columna izquierda (c, l, r)
%	#3	Posición vertical columna derecha (c, t, b)
%	#4	Alineación horizontal columna derecha (c, l, r)
\newcommand{\createtwocolumncfg}[4]{%
	\corecheckcolumnvvalue{#1}%
	\corecheckcolumnpvalue{#2}%
	\corecheckcolumnvvalue{#3}%
	\corecheckcolumnpvalue{#4}%
	\global\def\GLOBALtwocolumnav {#1}%
	\global\def\GLOBALtwocolumnap {#2}%
	\global\def\GLOBALtwocolumnbv {#3}%
	\global\def\GLOBALtwocolumnbp {#4}%
}

% Restaura la configuración de dos columnas
\newcommand{\resettwocolumncfg}{%
	\createtwocolumncfg{t}{l}{t}{l}%
}

% Configura las columnas triples
%	#1	Posición vertical columna izquierda (c, t, b)
%	#2	Alineación horizontal columna izquierda (c, l, r)
%	#3	Posición vertical columna central (c, t, b)
%	#4	Alineación horizontal columna central (c, l, r)
%	#5	Posición vertical columna derecha (c, t, b)
%	#6	Alineación horizontal columna derecha (c, l, r)
\newcommand{\createthreecolumncfg}[6]{%
	\corecheckcolumnvvalue{#1}%
	\corecheckcolumnpvalue{#2}%
	\corecheckcolumnvvalue{#3}%
	\corecheckcolumnpvalue{#4}%
	\corecheckcolumnvvalue{#5}%
	\corecheckcolumnpvalue{#6}%
	\global\def\GLOBALthreecolumnav {#1}%
	\global\def\GLOBALthreecolumnap {#2}%
	\global\def\GLOBALthreecolumnbv {#3}%
	\global\def\GLOBALthreecolumnbp {#4}%
	\global\def\GLOBALthreecolumncv {#3}%
	\global\def\GLOBALthreecolumncp {#4}%
}

% Restaura la configuración de tres columnas
\newcommand{\resetthreecolumncfg}{%
	\createthreecolumncfg{t}{l}{t}{l}{t}{l}%
}

% Crea dos columnas con contenido
%	#1	Altura de las columnas (opcional)
%	#2 	Dimensión de la columna izquierda (En linewidth)
%	#3	Dimensión de la columna derecha (En linewidth)
%	#4	Distancia entre columnas (En cm)
%	#5 	Contenido de la columna izquierda
%	#6	Contenido de la columna derecha
\newcommand{\createtwocolumn}[6][]{%
	\setcaptionmargincm{0}%
	\begin{samepage}%
	\begin{flushleft}%
		\vspace{-0.5\baselineskip}%
		\begin{minipage}{1\linewidth}%
			\begin{minipage}[t][#1][\GLOBALtwocolumnav]{#2\linewidth}%
				\ifthenelse{\equal{\GLOBALtwocolumnap}{c}}{%
					\begin{center}#5\end{center}%
				}{%
				\ifthenelse{\equal{\GLOBALtwocolumnap}{l}}{%
					\begin{raggedright}#5\end{raggedright}%
				}{%
				\ifthenelse{\equal{\GLOBALtwocolumnap}{r}}{%
					\hfill\begin{raggedleft}#5\end{raggedleft}%
				}{%
					\errmessage{LaTeX Warning: Alineacion columna izquierda incorrecta, valores esperados: c,l,r}
				}}}
			\end{minipage}%
			\hspace{#4 cm}%
			\begin{minipage}[t][#1][\GLOBALtwocolumnbv]{#3\linewidth}%
				\ifthenelse{\equal{\GLOBALtwocolumnbp}{c}}{%
					\begin{center}#6\end{center}%
				}{%
				\ifthenelse{\equal{\GLOBALtwocolumnbp}{l}}{%
					\begin{raggedright}#6\end{raggedright}%
				}{%
				\ifthenelse{\equal{\GLOBALtwocolumnbp}{r}}{%
					\hfill\begin{raggedleft}#6\end{raggedleft}%
				}{%
					\errmessage{LaTeX Warning: Alineacion columna derecha incorrecta, valores esperados: c,l,r}
				}}}
			\end{minipage}%
		\end{minipage}%
	\end{flushleft}%
	~ \vspace{-0.5\baselineskip}%
	\end{samepage}
	\setcaptionmargincm{\captionlrmargin}%
}

% Crea dos columnas idénticas
%	#1	Altura de las columnas (opcional)
%	#2 	Contenido de la columna izquierda
%	#3	Contenido de la columna derecha
\newcommand{\createhalfcolumn}[3][]{%
	\createtwocolumn[#1]{0.5}{0.5}{0}{#2}{#3}%
}

% Crea tres columnas con contenido
%	#1	Altura de las columnas (opcional)
%	#2 	Dimensión de la columna izquierda (En linewidth)
%	#3	Dimensión de la columna central (En linewidth)
%	#4	Dimensión de la columna derecha (En linewidth)
%	#5	Distancia entre columna 1-2 (En cm)
%	#6	Distancia entre columna 2-3 (En cm)
%	#7 	Contenido de la columna izquierda
%	#8	Contenido de la columna central
%	#9	Contenido de la columna derecha
\newcommand{\createthreecolumn}[9][]{%
	\setcaptionmargincm{0}%
	\begin{samepage}%
	\begin{flushleft}%
		\vspace{-0.5\baselineskip}%
		\begin{minipage}{1\linewidth}%
			\begin{minipage}[t][#1][\GLOBALthreecolumnav]{#2\linewidth}%
				\ifthenelse{\equal{\GLOBALthreecolumnap}{c}}{%
					\begin{center}#7\end{center}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumnap}{l}}{%
					\begin{raggedright}#7\end{raggedright}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumnap}{r}}{%
					\hfill\begin{raggedleft}#7\end{raggedleft}%
				}{%
					\errmessage{LaTeX Warning: Alineacion columna izquierda incorrecta, valores esperados: c,l,r}
				}}}
			\end{minipage}%
			\hspace{#5 cm}%
			\begin{minipage}[t][#1][\GLOBALthreecolumnbv]{#3\linewidth}%
				\ifthenelse{\equal{\GLOBALthreecolumnbp}{c}}{%
					\begin{center}#8\end{center}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumnbp}{l}}{%
					\begin{raggedright}#8\end{raggedright}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumnbp}{r}}{%
					\hfill\begin{raggedleft}#8\end{raggedleft}%
				}{%
					\errmessage{LaTeX Warning: Alineacion columna central incorrecta, valores esperados: c,l,r}
				}}}
			\end{minipage}%
			\hspace{#6 cm}%
			\begin{minipage}[t][#1][\GLOBALthreecolumncv]{#4\linewidth}%
				\ifthenelse{\equal{\GLOBALthreecolumncp}{c}}{%
					\begin{center}#9\end{center}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumncp}{l}}{%
					\begin{raggedright}#9\end{raggedright}%
				}{%
				\ifthenelse{\equal{\GLOBALthreecolumncp}{r}}{%
					\hfill\begin{raggedleft}#9\end{raggedleft}%
				}{%
					\errmessage{LaTeX Warning: Alineacion columna derecha incorrecta, valores esperados: c,l,r}
				}}}
			\end{minipage}%
		\end{minipage}%
	\end{flushleft}%
	~ \vspace{-0.5\baselineskip}%
	\end{samepage}
	\setcaptionmargincm{\captionlrmargin}%
}

% Crea tres columnas idénticas
%	#1 	Contenido de la columna izquierda
%	#2	Contenido de la columna central
%	#3	Contenido de la columna derecha
\newcommand{\createthirdcolumn}[3]{%
	\createthreecolumn{0.3333}{0.3333}{0.3333}{0}{0}{#1}{#2}{#3}%
}

% Crea una sección de referencias solo para bibtex
\newenvironment{references}{
	\ifthenelse{\equal{\stylecitereferences}{bibtex}}{ % Verifica configuraciones
	}{
		\throwerror{\references}{Solo se puede usar entorno references con estilo citas \noexpand\stylecitereferences=bibtex}
	}
	\phantomsection
	\addcontentsline{toc}{chapter}{\namereferences}
	\begin{thebibliography}{} % Inicia la bibliografía
		\ifthenelse{\equal{\bibtextextalign}{justify}}{ % Formato ajuste de línea
		}{
		\ifthenelse{\equal{\bibtextextalign}{left}}{
			\raggedright
		}{
		\ifthenelse{\equal{\bibtextextalign}{right}}{
			\raggedleft
		}{
		\ifthenelse{\equal{\bibtextextalign}{center}}{
			\centering
		}{
			\throwbadconfig{Ajuste de linea referencias bibtex desconocido}{\bibtextextalign}{justified,left,right,center}}}}
		}
	}
	{
	\end{thebibliography}
}

\newenvironment{anexo}{
	\begingroup % Inicia el grupo en nueva página y sección
	% \clearpage
	\phantomsection
	\changeheadertitle{\nomltappendixsection} % Cambia el nombre del header
	\global\def\GLOBALsectionalph {false} % Modifica formato de secciones con sección alph
	\bookmarksetup{
		numbered={true},
		openlevel={\thetemplateBookmarksLevelPrev}
	}
	\appendixtitleon
	\appendixtitletocon
	%\addappheadtotoc
	\bookmarksetupnext{level=part}
	\begin{appendices} % Crea la sección
		\ifthenelse{\equal{\showappendixsecindex}{true}}{}{
			\pdfbookmark{\nameappendixsection}{appendix} % Si false
		}
		% \setcounter{secnumdepth}{4}
		% \setcounter{tocdepth}{4}
		\ifthenelse{\equal{\appendixindepobjnum}{true}}{
			\counterwithin{equation}{chapter}
			\counterwithin{figure}{chapter}
			\counterwithin{lstlisting}{chapter}
			\counterwithin{table}{chapter}
		}
	}{
	\end{appendices}
	\global\def\GLOBALsectionalph {false} % Desactiva formato de secciones con sección alph
	\bookmarksetupnext{level={\thetemplateBookmarksLevelPrev}} % Restablece índice marcador
	\bookmarksetup{
		numbered={\cfgpdfsecnumbookmarks},
		openlevel={\cfgbookmarksopenlevel}
	}
	\endgroup
}

% Inicia código fuente con parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Parámetros
%	#4	Caption
\newcommand{\coreinitsourcecodep}[4]{
	\emptyvarerr{\coreinitsourcecodep}{#2}{Estilo de codigo no definido}
	\checkvalidsourcecodestyle{#2}
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\rightlinenumbers}{
	}
	\lstset{
		backgroundcolor=\color{\sourcecodebgcolor}
	}
	\ifthenelse{\equal{\codecaptiontop}{true}}{
		\ifx\hfuzz#4\hfuzz
			\ifx\hfuzz#3\hfuzz
				\lstset{
					escapeinside={(*@}{@*)},
					style=#2
				}
			\else
				\lstset{
					escapeinside={(*@}{@*)},
					style=#2,
					#3
				}
			\fi
		\else
			\ifx\hfuzz#3\hfuzz
				\lstset{
					caption={#4 #1},
					captionpos=t,
					escapeinside={(*@}{@*)},
					style=#2
				}
			\else
				\lstset{
					caption={#4 #1},
					captionpos=t,
					escapeinside={(*@}{@*)},
					style=#2,
					#3
				}
			\fi
		\fi
	}{
		\ifx\hfuzz#4\hfuzz
			\ifx\hfuzz#3\hfuzz
				\lstset{
					escapeinside={(*@}{@*)},
					style=#2
				}
			\else
				\lstset{
					escapeinside={(*@}{@*)},
					style=#2,
					#3
				}
			\fi
		\else
			\ifx\hfuzz#3\hfuzz
				\lstset{
					caption={#4 #1},
					captionpos=b,
					style=#2
				}
			\else
				\lstset{
					caption={#4 #1},
					captionpos=b,
					escapeinside={(*@}{@*)},
					style=#2,
					#3
				}
			\fi
		\fi	
	}
}

% Inserta código fuente con parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Parámetros
%	#4	Caption
\lstnewenvironment{sourcecodep}[4][]{
	\coreinitsourcecodep{#1}{#2}{#3}{#4}
}{
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\leftlinenumbers}{
	}
}

% Importa código fuente desde un archivo con parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Parámetros
%	#4	Archivo de código fuente
%	#5	Caption
\newcommand{\importsourcecodep}[5][]{
	\coreinitsourcecodep{#1}{#2}{#3}{#5}
	\inputlisting{#4}
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\leftlinenumbers}{
	}
}

% Inicia código fuente sin parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Caption
\newcommand{\coreinitsourcecode}[3]{
	\emptyvarerr{\coreinitsourcecode}{#2}{Estilo de codigo no definido}
	\checkvalidsourcecodestyle{#2}
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\rightlinenumbers}{
	}
	\lstset{
		backgroundcolor=\color{\sourcecodebgcolor}
	}
	\ifthenelse{\equal{\codecaptiontop}{true}}{
		\ifx\hfuzz#3\hfuzz
			\lstset{
				escapeinside={(*@}{@*)},
				style=#2
			}
		\else
			\lstset{
				escapeinside={(*@}{@*)},
				caption={#3 #1},
				captionpos=t,
				style=#2
			}
		\fi
	}{
		\ifx\hfuzz#3\hfuzz
			\lstset{
				escapeinside={(*@}{@*)},
				style=#2
			}
		\else
			\lstset{
				escapeinside={(*@}{@*)},
				caption={#3 #1},
				captionpos=b,
				style=#2
			}
		\fi
	}
}

% Inserta código fuente sin parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Caption
\lstnewenvironment{sourcecode}[3][]{
	\coreinitsourcecode{#1}{#2}{#3}
}{
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\leftlinenumbers}{
	}
}

% Importa código fuente desde un archivo sin parámetros
%	#1	Label (opcional)
%	#2	Estilo de código
%	#3	Archivo de código fuente
%	#4	Caption
\newcommand{\importsourcecode}[4][]{
	\coreinitsourcecode{#1}{#2}{#4}
	\lstinputlisting{#3}
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\leftlinenumbers}{
	}
}

% Itemize en negrita
%	#1	Parámetros opcionales
\newenvironment{itemizebf}[1][]{
	\begin{itemize}[font=\bfseries,#1]
	}{
	\end{itemize}
}

% Enumerate en negrita
%	#1	Parámetros opcionales
\newenvironment{enumeratebf}[1][]{
	\begin{enumerate}[font=\bfseries,#1]
	}{
	\end{enumerate}
}

% Crea una sección de resumen
%	#1	Tabla resumen
%	#2	Título de la tesis
%	#3	Título de la sección
%	#4	Etiqueta del marcador del pdf
\newenvironment{resumenenv}[4]{
	\clearpage
	\emptyvarerr{\resumenenv}{#1}{Tabla resumen no definida}
	\emptyvarerr{\resumenenv}{#2}{Titulo tesis no definido}
	\emptyvarerr{\resumenenv}{#3}{Titulo seccion no definida}
	\emptyvarerr{\resumenenv}{#4}{Etiqueta marcador del pdf}
	% Añade a los marcadores
	\ifthenelse{\equal{\addabstracttobookmarks}{true}}{
		\phantomsection
		\pdfbookmark{#3}{#4}}{
	}
	% Inserta la tabla resumen
	\ifthenelse{\equal{\showtableresumenenv}{true}}{
		\begin{flushright}
			\small
			#1
		\end{flushright}
		\vspace{0.75\baselineskip}
	}{
		\vspace*{0.5\baselineskip}
	}
	% Título
	\begin{center}
		\textcolor{\titlecolor}{\MakeUppercase{\textbf{#2}}}
	\end{center} \newp
	\ifthenelse{\equal{\showtableresumenenv}{true}}{
		\vspace{-\baselineskip}
	}{
		\vspace{-0.5\baselineskip}
	}
	}{%
	\vfill\null
	\clearpage
	\ifthenelse{\equal{\addemptypagespredoc}{true}}{
		\vfill
		\checkoddpage
		\ifoddpage
		\else
			\insertblankpage
		\fi}{
	}
}

% Llama al entorno de resumen
\newenvironment{resumen}{
	\begin{resumenenv}{\tablaresumen}{\titulotesis}{\nameabstract}{abstractbookmark}
	}{
	\end{resumenenv}
}

% Crea una sección de dedicatoria
\newenvironment{dedicatoria}{
	\clearpage\null
	\phantomsection
	% \ifthenelse{\equal{\adddedictobookmarks}{true}}{
	% 	\pdfbookmark{\nameadedic}{contents}}{
	% }
	\vspace{\stretch{1}}
	\begin{flushright}
		\itshape}{
	\end{flushright}
	\vspace{\stretch{2}}
	\null
	\ifthenelse{\equal{\addemptypagespredoc}{true}}{
		\insertblankpage}{
	}
}

% Crea una sección de agradecimientos
\newenvironment{agradecimientos}{
	\clearpage
	\chapter*{\nameagradec}
	\ifthenelse{\equal{\addagradectobookmarks}{true}}{
		\phantomsection
		\pdfbookmark{\nameagradec}{acknowledgments}}{
	}
	\forceindent
	}{
	\clearpage
	\ifthenelse{\equal{\addemptypagespredoc}{true}}{
		\insertblankpage}{
	}
}

% Crea una sección de imágenes múltiples
%	#1	Label (opcional)
%	#2	Caption
\newenvironment{images}[2][]{%
	% Modifica globales
	\def\envimageslabelvar {#1}
	\def\envimagescaptionvar {#2}
	\global\def\GLOBALenvimageinitialized {true}
	\global\def\GLOBALenvimageadded {false}
	
	% Configura caption y márgenes
	\vspace{\marginimagetop cm}%
	\setcaptionmargincm{\captionmarginmultimg}%
	
	% Inicia la figura
	\begin{samepage}%
	\begin{figure}[H] \centering%
		\thisfloatpagestyle{fancy}%
		\vspace{\marginimagemulttop cm}%
		}{%
		\setcaptionmargincm{\captionlrmargin}%
		\ifthenelse{\equal{\envimagescaptionvar}{}}{ % \ifx\hfuzz no sirve
			\vspace{\captionlessmarginimage cm}%
		}{%
			\ifthenelse{\equal{\captionmarginimages}{0}}{}{\vspace{\captionmarginimages cm}}%
			\caption{\envimagescaptionvar\envimageslabelvar}%
		}%
	\end{figure}%

	% Restablece caption y márgenes
	\setcaptionmargincm{\captionlrmargin}%
	\vspace{\marginimagebottom cm}%
	\end{samepage}
	
	% Restablece globales
	\global\def\GLOBALenvimageinitialized {false}
}

% Crea una sección de imágenes múltiples completa dentro de un multicol
%	#1	Label (opcional)
%	#2	Posición de la imagen, "bottom", "top"
%	#3	Caption
\newenvironment{imagesmc}[3][]{
	% Modifica globales
	\def\envimageslabelvar {#1}
	\def\envimagesmcpos {#2}
	\def\envimagescaptionvar {#3}
	\global\def\GLOBALenvimageinitialized {true}
	\global\def\GLOBALenvimageadded {false}
	\checkinsidemulticol%
	
	% Configura caption y márgenes
	\setcaptionmargincm{\captionmarginmultimg} % Eso es para los wrapfig
	
	% Inicia la figura
	\ifthenelse{\equal{#2}{bottom}}{%
		\begin{figure*}[hb] \centering%
	}{%
	\ifthenelse{\equal{#2}{top}}{%
		\begin{figure*}[ht] \centering%
	}{%
		\errmessage{LaTeX Warning: Posicion de imagen invalida, valores esperados: bottom,top}
		\stop
	}}%
		\thisfloatpagestyle{fancy}%
		\vspace{\marginimagemulttop cm}%
	}{%
		\setcaptionmargincm{\captionlrmargin}%
		\ifthenelse{\equal{\envimagescaptionvar}{}}{ % \ifx\hfuzz no sirve
			\vspace{\captionlessmarginimage cm}%
		}{%
			\ifthenelse{\equal{\captionmarginimagesmc}{0}}{}{\vspace{\captionmarginimagesmc cm}}
			\caption{\envimagescaptionvar\envimageslabelvar}%
		}%
	\end{figure*}%
	
	% Restablece caption y márgenes
	\setcaptionmargincm{\captionlrmargin}%
	
	% Restablece globales
	\global\def\GLOBALenvimageinitialized {false}
}

% -----------------------------------------------------------------------------
% IMPORTACIÓN DE ESTILOS
% -----------------------------------------------------------------------------
% Definición de colores
\colorlet{numb}{magenta!60!black}
\colorlet{punct}{red!60!black}
\definecolor{delim}{RGB}{20,105,176}
\definecolor{dkcyan}{RGB}{0,123,167}
\definecolor{dkgray}{RGB}{90,90,90}
\definecolor{dkgreen}{RGB}{0,150,0}
\definecolor{gray}{RGB}{127,127,127}
\definecolor{lbrown}{RGB}{255,252,249}
\definecolor{lgray}{RGB}{240,240,240}
\definecolor{mauve}{RGB}{150,0,210}
\definecolor{ocre}{RGB}{243,102,25}

% ABAP
\lstdefinestyle{abap}{
	language=ABAP
}

% Ada
\lstdefinestyle{ada}{
	language=[2005]Ada
}

% Assembler
\lstdefinelanguage[x64]{Assembler}[x86masm]{Assembler}{
	morekeywords={
		CDQE,CMPSQ,CMPXCHG16B,CQO,IRETQ,JRCXZ,LODSQ,MOVSXD,POPFQ,PUSHFQ,r8,r8b,r8d,r8w,r9,r9b,r9d,r9w,r10,r10b,r10d,r10w,r11,r11b,r11d,r11w,r12,r12b,r12d,r12w,r13,r13b,r13d,r13w,r14,r14b,r14d,r14w,r15,r15b,r15d,r15w,rax,rbp,rbx,rcx,rdi,RDTSCP,rdx,rsi,rsp,SCASQ,STOSQ,SWAPGS
	}
}
\lstdefinestyle{assemblerx64}{
	language=[x64]Assembler
}
\lstdefinestyle{assemblerx86}{
	language=[x86masm]Assembler
}

% Awk
\lstdefinestyle{awk}{
	language=[gnu]Awk
}

% Bash
\lstdefinestyle{bash}{
	language=bash,
	breakatwhitespace=false,
	morecomment=[l]{rem},
	morecomment=[s]{::}{::},
	morekeywords={
		call,cp,dig,gcc,git,grep,ls,mv,python,rm,sudo,vim
	},
	sensitive=false
}

% Basic
\lstdefinestyle{basic}{
	language=[Visual]Basic
}

% C
\lstdefinestyle{c}{
	language=C,
	breakatwhitespace=false,
	keepspaces=true
}

% Caml
\lstdefinestyle{caml}{
	language=[light]Caml
}

% CMake
\lstdefinestyle{cmake}{
	language=[gnu] make,
	keywordstyle=[2]\color{dkcyan},
	morekeywords=[1]{
		add_custom_command,add_custom_target,add_definitions,add_executable,add_library,cmake_minimum_required,cmake_policy,configure_file,cuda_add_library,cuda_include_directories,else,elseif,endforeach,endfunction,endif,endmacro,execute_process,file,find_package,find_path,find_program,foreach,function,get_directory_property,get_filename_component,get_filename_component,get_source_file_property,if,include,include_directories,link_directories,list,macro,mark_as_advanced,message,option,project,set,set_property,set_target_properties,string,target_link_libraries,unset
	},
	morekeywords=[2]{
		APPEND,CACHE,CMAKE_MODULE_PATH,COMMENT,COMPILE_DEFINITIONS,DEPENDS,DESTINATION,ENDIF,FATAL_ERROR,FIND_LIBRARY,FORCE,GLOB,GREATER,IF,INCLUDE_DIRECTORIES,IS_ABSOLUTE,LESS,LINK_PRIVATE,LIST,MAIN_DEPENDENCY,MAKE_DIRECTORY,MARK_AS_ADVANCED,MATCHALL,MATCHES,NOT,OFF,ON,OUTPUT,PARENT_SCOPE,PRE_BUILD_COMMAND,PRE_LINK,PROPERTIES,REGEX,REQUIRED,SET,TARGET,TOUPPER,UNIX,VERSION,VERSION_EQUAL,VERSION_LESS,WIN32,WORKING_DIRECTORY
	}
}

% Cobol
\lstdefinestyle{cobol}{
	language=Cobol
}

% C++
\lstdefinestyle{cpp}{
	language=C++,
	breakatwhitespace=false
}

% C#
\lstdefinestyle{csharp}{
	language=csh,
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morekeywords={
		abstract,as,base,bool,break,byte,case,catch,char,checked,class,const,continue,decimal,default,delegate,do,double,else,enum,event,explicit,extern,false,finally,fixed,float,for,foreach,goto,if,implicit,in,int,interface,internal,is,lock,long,namespace,new,null,object,operator,out,override,params,private,protected,public,readonly,ref,return,sbyte,sealed,short,sizeof,stackalloc,static,string,struct,switch,this,throw,true,try,typeof,uint,ulong,unchecked,unsafe,ushort,using,virtual,void,volatile,while
	}
}

% CSS
\lstdefinelanguage{CSS}{
	morecomment=[s]{/*}{*/},
	morekeywords={
		-moz-binding,-moz-border-bottom-colors,-moz-border-left-colors,-moz-border-radius,-moz-border-radius-bottomleft,-moz-border-radius-bottomright,-moz-border-radius-topleft,-moz-border-radius-topright,-moz-border-right-colors,-moz-border-top-colors,-moz-opacity,-moz-outline,-moz-outline-color,-moz-outline-style,-moz-outline-width,-moz-user-focus,-moz-user-input,-moz-user-modify,-moz-user-select,-replace,-set-link-source,-use-link-source,accelerator,azimuth,background,background-attachment,background-color,background-image,background-position,background-position-x,background-position-y,background-repeat,behavior,border,border-bottom,border-bottom-color,border-bottom-style,border-bottom-width,border-collapse,border-color,border-left,border-left-color,border-left-style,border-left-width,border-right,border-right-color,border-right-style,border-right-width,border-spacing,border-style,border-top,border-top-color,border-top-style,border-top-width,border-width,bottom,caption-side,clear,clip,color,content,counter-increment,counter-reset,cue,cue-after,cue-before,cursor,direction,display,elevation,empty-cells,filter,float,font,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,height,ime-mode,include-source,layer-background-color,layer-background-image,layout-flow,layout-grid,layout-grid-char,layout-grid-char-spacing,layout-grid-line,layout-grid-mode,layout-grid-type,left,letter-spacing,line-break,line-height,list-style,list-style-image,list-style-position,list-style-type,margin,margin-bottom,margin-left,margin-right,margin-top,marker-offset,marks,max-height,max-width,min-height,min-width,orphans,outline,outline-color,outline-style,outline-width,overflow,overflow-X,overflow-Y,padding,padding-bottom,padding-left,padding-right,padding-top,page,page-break-after,page-break-before,page-break-inside,pause,pause-after,pause-before,pitch,pitch-range,play-during,position,quotes,richness,right,ruby-align,ruby-overhang,ruby-position,scrollbar-3d-light-color,scrollbar-arrow-color,scrollbar-base-color,scrollbar-dark-shadow-color,scrollbar-face-color,scrollbar-highlight-color,scrollbar-shadow-color,scrollbar-track-color,size,speak,speak-header,speak-numeral,speak-punctuation,speech-rate,stress,table-layout,text-align,text-align-last,text-autospace,text-decoration,text-indent,text-justify,text-kashida-space,text-overflow,text-shadow,text-transform,text-underline-position,top,unicode-bidi,vertical-align,visibility,voice-family,volume,white-space,widows,width,word-break,word-spacing,word-wrap,writing-mode,z-index,zoom
	},
	morestring=[s]{:}{;},
	sensitive=true
}
\lstdefinestyle{css}{
	language=CSS,
	breakatwhitespace=true
}

% CSV
\lstdefinestyle{csv}{
	language={}
}

% CUDA
\lstdefinestyle{cuda}{
	language=C++,
	breakatwhitespace=false,
	emph={
		cudaFree,cudaMalloc,__device__,__global__,__host__,__shared__,__syncthreads
	},
	emphstyle=\color{dkcyan}\ttfamily,
	morecomment=[l][\color{magenta}]{\#},
	moredelim=[s][\ttfamily]{<<<}{>>>}
}

% Dart
\lstdefinestyle{dart}{
	language=Java,
	emph=[2]{
		findAllElements,findElements
	},
	morekeywords={
		*,get,library,List,num,set,String,var
	}
}

% Docker
\lstdefinelanguage{docker}{
	comment=[l]{\#},
	keywords={
		ADD,CMD,COPY,ENTRYPOINT,ENV,EXPOSE,FROM,LABEL,MAINTAINER,ONBUILD,RUN,STOPSIGNAL,USER,VOLUME,WORKDIR
	},
	morestring=[b]',
	morestring=[b]"
}
\lstdefinestyle{docker}{
	language=docker,
	breakatwhitespace=true
}

% Elisp
\lstdefinestyle{elisp}{
	language=elisp
}

% Elixir
\lstdefinestyle{elixir}{
	 morekeywords={
		 case,catch,def,do,else,false,use,alias,receive,timeout,defmacro,defp,for,if,import,defmodule,defprotocol,nil,defmacrop,defoverridable,defimpl,super,fn,raise,true,try,end,with,unless
	},
	otherkeywords={
		<-,->, |>, \%\{, \}, \{, \, (, )
	},
	morecomment=[l]{\#},
	morecomment=[n]{/*}{*/},
	morecomment=[s][\color{purple}]{:}{\ },
	morestring=[s][\color{mauve}]"",
	sensitive=true
}

% Erlang
\lstdefinestyle{erlang}{
	language=erlang
}

% Fortran-95
\lstdefinestyle{fortran}{
	language=[95]Fortran,
	breakatwhitespace=false
}

% F#
\lstdefinestyle{fsharp}{
	morecomment=[l][\color{dkgreen}]{///},
	morecomment=[l][\color{dkgreen}]{//},
	morecomment=[s][\color{dkgreen}]{{(*}{*)}},
	morestring=[b]",
	morekeywords={
		abstract,and,Application,Array,Async,async,begin,cloud,do,else,end,false,finally,for,fun,function,if,in,inherit,interface,let,List,match,member,module,mutable,namespace,new,of,open,rec,return,Seq,static,System,then,true,try,type,use,while,with,yield
	},
	otherkeywords={
		by,do!,from,let!,order,return!,select,use!,var,where,yield!
	},
	sensitive=true
}

% GLSL
\lstdefinelanguage{GLSL}{
	alsoletter={\#},
	morekeywords=[1]{
		attribute,bool,break,bvec2,bvec3,bvec4,case,centroid,const,continue,default,discard,do,else,false,flat,float,for,highp,if,in,inout,int,invariant,isampler1D,isampler1DArray,isampler2D,isampler2DArray,isampler2DMS,isampler2DMSArray,isampler2DRect,isampler3D,isamplerBuffer,isamplerCube,ivec2,ivec3,ivec4,layout,lowp,mat2,mat2x2,mat2x3,mat2x4,mat3,mat3x2,mat3x3,mat3x4,mat4,mat4x2,mat4x3,mat4x4,mediump,noperspective,out,precision,return,sampler1D,sampler1DArray,sampler1DArrayShadow,sampler1DShadow,sampler2D,sampler2DArray,sampler2DArrayShadow,sampler2DMS,sampler2DMSArray,sampler2DRect,sampler2DRectShadow,sampler2DShadow,sampler3D,samplerBuffer,samplerCube,samplerCubeShadow,smooth,struct,switch,true,uint,uniform,usampler1D,usampler1DArray,usampler2D,usampler2DArray,usampler2DMS,usampler2DMSArray,usampler2DRect,usampler3D,usamplerBuffer,usamplerCube,uvec2,uvec3,uvec4,varying,vec2,vec3,vec4,void,while
	},
	morekeywords=[2]{
		abs,acos,acosh,all,any,asin,asinh,atan,atan,atanh,ceil,clamp,cos,cosh,cross,degrees,determinant,dFdx,dFdy,distance,dot,EmitVertex,EndPrimitive,equal,exp,exp2,faceforward,floatBitsToInt,floatBitsToUint,floor,fract,fwidth,greaterThan,greaterThanEqual,intBitsToFloat,inverse,inversesqrt,isinf,isnan,length,lessThan,lessThanEqual,log,log2,matrixCompMult,max,min,mix,mod,modf,noise1,noise2,noise3,noise4,normalize,not,notEqual,outerProduct,pow,radians,reflect,refract,round,roundEven,shadow1D,shadow1DLod,shadow1DProj,shadow1DProjLod,shadow2D,shadow2DLod,shadow2DProj,shadow2DProjLod,sign,sin,sinh,smoothstep,sqrt,step,tan,tanh,texelFetch,texelFetchOffset,texture,texture1D,texture1DProj,texture1DProjLod,texture2D,texture2DLod,texture2DProj,texture2DProjLod,texture3D,texture3DLod,texture3DProj,texture3DProjLod,textureCube,textureCubeLod,textureGrad,textureGradOffset,textureLod,textureLodOffset,textureOffset,textureProj,textureProjGrad,textureProjGradOffset,textureProjLod,textureProjLodOffset,textureProjOffset,textureSize,transpose,trunc,uintBitsToFloat
	},
	morekeywords=[3]{
		\#version,core,gl_ClipDistance,gl_ClipDistance,gl_ClipVertex,gl_DepthRange,gl_FragColor,gl_FragCoord,gl_FragData,gl_FragDepth,gl_FrontFacing,gl_InstanceID,gl_Layer,gl_MaxClipDistances,gl_MaxCombinedTextureImageUnits,gl_MaxDrawBuffers,gl_MaxDrawBuffers,gl_MaxFragmentInputComponents,gl_MaxFragmentUniformComponents,gl_MaxGeometryInputComponents,gl_MaxGeometryOutputComponents,gl_MaxGeometryOutputVertices,gl_MaxGeometryOutputVertices,gl_MaxGeometryTextureImageUnits,gl_MaxGeometryTotalOutputComponents,gl_MaxGeometryUniformComponents,gl_MaxGeometryVaryingComponents,gl_MaxTextureImageUnits,gl_MaxVaryingComponents,gl_MaxVaryingFloats,gl_MaxVertexAttribs,gl_MaxVertexOutputComponents,gl_MaxVertexTextureImageUnits,gl_MaxVertexUniformComponents,gl_PerVertex,gl_PointCoord,gl_PointSize,gl_Position,gl_PrimitiveID,gl_VertexID
	},
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/}
}
\lstdefinestyle{glsl}{
	language=GLSL,
	keywordstyle=[3]\color{dkcyan}\ttfamily,
	prebreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	sensitive=true,
	upquote=true
}

% Gnuplot
\lstdefinestyle{gnuplot}{
	language=Gnuplot
}

% Go
\lstdefinestyle{go}{
	language=Go
}

% Haskell
\lstdefinestyle{haskell}{
	language=haskell,
	morecomment=[l]\%
}

% HTML5
\lstdefinelanguage{HTML5}{
	language=html,
	alsoletter={<>=-},
	morecomment=[s]{<!--}{-->},
	ndkeywords={
		% General
		=,
		% Atributos HTML
		accept-charset=,accept=,accesskey=,action=,align=,alt=,async=,autocomplete=,autofocus=,autoplay=,autosave=,bgcolor=,border=,buffered=,challenge=,charset=,checked=,cite=,class=,code=,codebase=,color=,cols=,colspan=,content=,contenteditable=,contextmenu=,controls=,coords=,data=,datetime=,default=,defer=,dir=,dirname=,disabled=,download=,draggable=,dropzone=,enctype=,for=,form=,formaction=,headers=,height=,hidden=,high=,href=,hreflang=,http-equiv=,icon=,id=,ismap=,itemprop=,keytype=,kind=,label=,lang=,language=,list=,loop=,low=,manifest=,max=,maxlength=,media=,method=,min=,multiple=,name=,novalidate=,open=,optimum=,pattern=,ping=,placeholder=,poster=,preload=,pubdate=,radiogroup=,readonly=,rel=,required=,reversed=,rows=,rowspan=,sandbox=,scope=,scoped=,seamless=,selected=,shape=,size=,sizes=,span=,spellcheck=,src=,srcdoc=,srclang=,start=,step=,style=,summary=,tabindex=,target=,title=,type=,usemap=,value=,width=,wrap=,
		% Propiedades CSS
		-moz-binding:,-moz-border-bottom-colors:,-moz-border-left-colors:,-moz-border-radius-bottomleft:,-moz-border-radius-bottomright:,-moz-border-radius-topleft:,-moz-border-radius-topright:,-moz-border-radius:,-moz-border-right-colors:,-moz-border-top-colors:,-moz-opacity:,-moz-outline-color:,-moz-outline-style:,-moz-outline-width:,-moz-outline:,-moz-transform:,-moz-user-focus:,-moz-user-input:,-moz-user-modify:,-moz-user-select:,-replace:,-set-link-source:,-use-link-source:,accelerator:,azimuth:,background-attachment:,background-color:,background-image:,background-position-x:,background-position-y:,background-position:,background-repeat:,background:,behavior:,border-bottom-color:,border-bottom-style:,border-bottom-width:,border-bottom:,border-collapse:,border-color:,border-left-color:,border-left-style:,border-left-width:,border-left:,border-right-color:,border-right-style:,border-right-width:,border-right:,border-spacing:,border-style:,border-top-color:,border-top-style:,border-top-width:,border-top:,border-width:,border:,bottom:,caption-side:,clear:,clip:,color:,content:,counter-increment:,counter-reset:,cue-after:,cue-before:,cue:,cursor:,direction:,display:,elevation:,empty-cells:,filter:,float:,font-family:,font-size-adjust:,font-size:,font-stretch:,font-style:,font-variant:,font-weight:,font:,height:,ime-mode:,include-source:,layer-background-color:,layer-background-image:,layout-flow:,layout-grid-char-spacing:,layout-grid-char:,layout-grid-line:,layout-grid-mode:,layout-grid-type:,layout-grid:,left:,letter-spacing:,line-break:,line-height:,list-style-image:,list-style-position:,list-style-type:,list-style:,margin-bottom:,margin-left:,margin-right:,margin-top:,margin:,marker-offset:,marks:,max-height:,max-width:,min-height:,min-width:,orphans:,outline-color:,outline-style:,outline-width:,outline:,overflow-X:,overflow-Y:,overflow:,padding-bottom:,padding-left:,padding-right:,padding-top:,padding:,page-break-after:,page-break-before:,page-break-inside:,page:,pause-after:,pause-before:,pause:,pitch-range:,pitch:,play-during:,position:,quotes:,richness:,right:,ruby-align:,ruby-overhang:,ruby-position:,scrollbar-3d-light-color:,scrollbar-arrow-color:,scrollbar-base-color:,scrollbar-dark-shadow-color:,scrollbar-face-color:,scrollbar-highlight-color:,scrollbar-shadow-color:,scrollbar-track-color:,size:,speak-header:,speak-numeral:,speak-punctuation:,speak:,speech-rate:,stress:,table-layout:,text-align-last:,text-align:,text-autospace:,text-decoration:,text-indent:,text-justify:,text-kashida-space:,text-overflow:,text-shadow:,text-transform:,text-underline-position:,top:,transform:,transition-duration:,transition-property:,transition-timing-function:,unicode-bidi:,vertical-align:,visibility:,voice-family:,volume:,white-space:,widows:,width:,word-break:,word-spacing:,word-wrap:,writing-mode:,z-index:,zoom:
	},
	otherkeywords={
		<,</,>,</a,<a,</a>,</abbr,<abbr,</abbr>,</address,<address,</address>,</area,<area,</area>,</area,<area,</area>,</article,<article,</article>,</aside,<aside,</aside>,</audio,<audio,</audio>,</audio,<audio,</audio>,</b,<b,</b>,</base,<base,</base>,</bdi,<bdi,</bdi>,</bdo,<bdo,</bdo>,</blockquote,<blockquote,</blockquote>,</body,<body,</body>,</br,<br,</br>,</button,<button,</button>,</canvas,<canvas,</canvas>,</caption,<caption,</caption>,</cite,<cite,</cite>,</code,<code,</code>,</col,<col,</col>,</colgroup,<colgroup,</colgroup>,</data,<data,</data>,</datalist,<datalist,</datalist>,</dd,<dd,</dd>,</del,<del,</del>,</details,<details,</details>,</dfn,<dfn,</dfn>,</div,<div,</div>,</dl,<dl,</dl>,</dt,<dt,</dt>,</em,<em,</em>,</embed,<embed,</embed>,</fieldset,<fieldset,</fieldset>,</figcaption,<figcaption,</figcaption>,</figure,<figure,</figure>,</footer,<footer,</footer>,</form,<form,</form>,</h1,<h1,</h1>,</h2,<h2,</h2>,</h3,<h3,</h3>,</h4,<h4,</h4>,</h5,<h5,</h5>,</h6,<h6,</h6>,</head,<head,</head>,</header,<header,</header>,</hr,<hr,</hr>,</html,<html,</html>,</i,<i,</i>,</iframe,<iframe,</iframe>,</img,<img,</img>,</input,<input,</input>,</ins,<ins,</ins>,</kbd,<kbd,</kbd>,</keygen,<keygen,</keygen>,</label,<label,</label>,</legend,<legend,</legend>,</li,<li,</li>,</link,<link,</link>,</main,<main,</main>,</map,<map,</map>,</mark,<mark,</mark>,</math,<math,</math>,</menu,<menu,</menu>,</menuitem,<menuitem,</menuitem>,</meta,<meta,</meta>,</meter,<meter,</meter>,</nav,<nav,</nav>,</noscript,<noscript,</noscript>,</object,<object,</object>,</ol,<ol,</ol>,</optgroup,<optgroup,</optgroup>,</option,<option,</option>,</output,<output,</output>,</p,<p,</p>,</param,<param,</param>,</pre,<pre,</pre>,</progress,<progress,</progress>,</q,<q,</q>,</rp,<rp,</rp>,</rt,<rt,</rt>,</ruby,<ruby,</ruby>,</s,<s,</s>,</samp,<samp,</samp>,</script,<script,</script>,</section,<section,</section>,</select,<select,</select>,</small,<small,</small>,</source,<source,</source>,</span,<span,</span>,</strong,<strong,</strong>,</style,<style,</style>,</summary,<summary,</summary>,</sup,<sup,</sup>,</svg,<svg,</svg>,</table,<table,</table>,</tbody,<tbody,</tbody>,</td,<td,</td>,</template,<template,</template>,</textarea,<textarea,</textarea>,</tfoot,<tfoot,</tfoot>,</th,<th,</th>,</thead,<thead,</thead>,</time,<time,</time>,</title,<title,</title>,</tr,<tr,</tr>,</track,<track,</track>,</u,<u,</u>,</ul,<ul,</ul>,</var,<var,</var>,</video,<video,</video>,</wbr,<wbr,</wbr>,/>,<!
	},
	sensitive=true,
	tag=[s]
}
\lstdefinestyle{html}{
	language=HTML5,
	alsodigit={.:;},
	alsolanguage=JavaScript,
	firstnumber=1,
	ndkeywordstyle=\color{dkgreen}\bfseries,
	numberfirstline=true
}

% INI, Archivos de configuraciones
\lstdefinestyle{ini}{
	language={},
	commentstyle=\color{gray}\ttfamily,
	keywordstyle={\color{black}\bfseries},
	morecomment=[l]{;},
	morecomment=[l]{\#},
	morecomment=[s][\color{dkgreen}\bfseries]{[}{]},
	morekeywords={},
	otherkeywords={=,:}
}

% Java
\lstdefinestyle{java}{
	language=Java,
	breakatwhitespace=true,
	keepspaces=true
}

% Javascript
\lstdefinelanguage{JavaScript}{
	comment=[l]{//},
	keepspaces=true,
	keywords={
		break,else,false,for,function,if,in,new,null,return,true,typeof,var,while
	},
	morecomment=[s]{/*}{*/},
	morestring=[b]',
	morestring=[b]",
	morestring=[b]`,
	ndkeywords={
		await,async,case,catch,class,const,default,do,enum,export,extends,finally,from,implements,import,instanceof,let,static,super,switch,then,this,throw,try
	},
	ndkeywordstyle=\color{blue}\bfseries,
	sensitive=false
}
\lstdefinestyle{javascript}{
	language=JavaScript
}

% JSON
\lstdefinestyle{json}{
	literate=*{0}{{{\color{numb}0}}}{1}{1}{{{\color{numb}1}}}{1}{2}
	{{{\color{numb}2}}}{1}{3}{{{\color{numb}3}}}{1}{4}{{{\color{numb}4}}}
	{1}{5}{{{\color{numb}5}}}{1}{6}{{{\color{numb}6}}}{1}{7}{{{\color{numb}7}}}
	{1}{8}{{{\color{numb}8}}}{1}{9}{{{\color{numb}9}}}{1}{:}
	{{{\color{punct}{:}}}}{1}{,}{{{\color{punct}{,}}}}{1}{\{}
	{{{\color{delim}{\{}}}}{1}{\}}{{{\color{delim}{\}}}}}
	{1}{[}{{{\color{delim}{[}}}}{1}{]}{{{\color{delim}{]}}}}{1},
	tabsize=2
}

% Julia
\lstdefinestyle{julia}{
	keywordsprefix=\@,
	morecomment=[l]{\#},
	morekeywords={
		abstract,Any,applicable,assert,baremodule,begin,bitstype,Bool,break,catch,ccall,Complex64,Complex128,const,continue,convert,dlopen,dlsym,do,edit,else,elseif,end,eps,error,exit,export,finalizer,Float32,Float64,for,function,global,hash,if,im,immutable,import,importall,in,Inf,Int,Int8,Int16,Int32,Int64,invoke,is,isa,isequal,let,load,local,macro,method_exists,module,Nan,new,None,Nothing,ntuple,pi,promote,promote_type,quote,realmax,realmin,return,sizeof,subtype,system,throw,try,tuple,type,typealias,typemax,typemin,typeof,uid,Uint,Uint8,Uint16,Uint32,Uint64,using,while,whos
	},
	morestring=[b]',
	morestring=[b]",
	sensitive=true
}

% Kotlin
\lstdefinestyle{kotlin}{
	comment=[l]{//},
	emph={delegate,filter,first,firstOrNull,forEach,lazy,map,mapNotNull,println,
		return@},
	emphstyle={\color{blue}},
	keywords={
		abstract,actual,as,as?,break,by,class,companion,continue,data,do,dynamic,else,enum,expect,false,final,for,fun,get,if,import,in,interface,internal,is,null,object,override,package,private,public,return,set,super,suspend,this,throw,true,try,typealias,val,var,vararg,when,where,while
	},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={
		@Deprecated,@JvmField,@JvmName,@JvmOverloads,@JvmStatic,@JvmSynthetic,Array,Byte,Double,Float,Int,Integer,Iterable,Long,Runnable,Short,String
	},
	ndkeywordstyle=\color{BurntOrange}\bfseries,
	sensitive=true
}

% LaTeX
\lstdefinestyle{latex}{
	language=TeX,
	morekeywords={
		aacos,aasin,aatan,acos,addimage,addimageanum,addimageboxed,align,asin,atan,begin,bibitem,bibliography,bigstrut,boldmath,bookmarksetup,boxed,cancelto,caption,changeheadertitle,checkmark,checkvardefined,cite,clearpage,dd,degree,eqref,equal,frac,fracnpartial,fullcite,hline,href,ifthenelse,imageshspace,imagesnewline,imagesvspace,includefullhfpdf,includehfpdf,insertalign,insertalignanum,insertaligncaptioned,insertaligncaptioned,insertaligncaptionedanum,insertaligned,insertalignedanum,insertalignedcaptioned,insertalignedcaptionedanum,insertemail,insertemptypage,inserteqimage,insertequation,insertequationanum,insertequationcaptioned,insertequationcaptionedanum,insertgather,insertgatheranum,insertgathercaptioned,insertgathercaptionedanum,insertgathered,insertgatheredanum,insertgatheredcaptioned,insertgatheredcaptionedanum,insertimage,insertimageleft,insertimageright,insertindextitle,insertindextitlepage,insertphone,isundefined,itemresize,label,LaTeX,lipsum,lpow,makeatletter,makeatother,newcommand,newcounter,newp,newpage,pow,quotes,ref,renewcommand,section,sectionanum,setcounter,setlength,shortcite,sourcecode,sourcecodep,subsection,subsectionanum,subsubsection,subsubsectionanum,subsubsubsection,subsubsubsection,subsubsubsectionanum,textbf,textit,textregistered,textsuperscript,texttt,throwbadconfig,unboldmath,url,xspace
	}
}

% Lisp
\lstdefinestyle{lisp}{
	language=Lisp,
	morekeywords={if}
}

% LLVM
\lstdefinestyle{llvm}{
	language=LLVM
}

% Lua
\lstdefinestyle{lua}{
	language={[5.3]Lua}
}

% Make
\lstdefinestyle{make}{
	language=[gnu] make
}

% Maple
\lstdefinelanguage{Maple}{
	morecomment=[l]\#,
	morekeywords={
		and,assuming,break,by,catch,description,do,done,elif,else,end,error,export,fi,finally,for,from,global,if,implies,in,intersect,local,minus,mod,module,next,not,o,option,options,or,proc,quit,read,restart,return,save,stop,subset,then,to,try,union,use,uses,with,while,xor
	},
	morestring=[b]",
	morestring=[d],
	sensitive=true
} 
\lstdefinestyle{maple}{
	language=Maple
}

% Mathematica
\lstdefinestyle{mathematica}{
	language=Mathematica
}

% Matlab
\lstdefinestyle{matlab}{
	language=Matlab,
	deletekeywords={fft},
	keepspaces=true,
	morecomment=[l]\%,
	morecomment=[n]{\%\{\^^M}{\%\}\^^M},
	morekeywords={
		addOptional,box,break,catch,cell,classdef,continue,deal,double,end,factorial,for,gradient,hessian,if,isa,ltitr,matlab2tikz,methods,minor,movegui,normcdf,normpdf,on,ones,parse,persistent,poissrnd,properties,repmat,solve,strcat,subs,syms,try,var,warning,xlim,ylim
	}
}

% Mercury
\lstdefinestyle{mercury}{
	language=Mercury
}

% Modula-2
\lstdefinestyle{modula2}{
	language=Modula-2
}

% Objective-C
\lstdefinestyle{objectivec}{
	language=[Objective]C,
	breakatwhitespace=false,
	keepspaces=true,
	moredirectives={
		import
	},
	morekeywords={
		@catch,@class,@dynamic,@encode,@end,@finally,@implementation,@interface,@package,@private,@property,@protected,@protocol,@public,@selector,@synchronized,@synthesize,@throw,@try,assign,BOOL,bycopy,byref,Class,copy,id,IMP,in,inout,Nil,nil,NO,nonatomic,oneway,out,readonly,readwrite,retain,SEL,self,super,YES,_cmd
	}
}

% Octave
\lstdefinestyle{octave}{
	language=Octave,
	keepspaces=true,
	morecomment=[l]\%,
	morecomment=[n]{\%\{\^^M}{\%\}\^^M}
}

% OpenCL
\lstdefinestyle{opencl}{
	language=C++,
	breakatwhitespace=false,
	emph={
		bool2,bool3,bool4,bool8,bool16,char2,char3,char4,char8,char16,complex,constant,event_t,float2,float3,float4,float8,float16,global,half2,half3,half4,half8,half16,image2d_t,image3d_t,imaginary,int2,int3,int4,int8,int16,kernel,local,long2,long3,long4,long8,long16,private,quad,quad2,quad3,quad4,quad8,quad16,sampler_t,short2,short3,short4,short8,short16,uchar2,uchar3,uchar4,uchar8,uchar16,uint2,uint3,uint4,uint8,uint16,ulong2,ulong3,ulong4,ulong8,ulong16,ushort2,ushort3,ushort4,ushort8,ushort16,__constant,__global,__kernel,__local,__private
	},
	emphstyle=\color{dkcyan}\ttfamily,
	morecomment=[l][\color{magenta}]{\#}
}

% OpenSees
\lstdefinestyle{opensees}{
	language=tcl,
	breakatwhitespace=false,
	emph=[1]{
		-accel,-beamUniform,-dir,-dof,-ele,-eleRange,-file,-height,-increment,-initial,-iNode,-integration,-iterate,-jNode,-kNode,-mass,-mat,-matConcrete,-matShear,-matSteel,-max,-maxDim,-maxEta,-maxIter,-min,-minEta,-ndf,-ndm,-node,-nodeRange,-numSublevels,-numSubSteps,-perpDirn,-region,-rho,-sections,-thick,-time,-tol,-type,-width
	},
	emphstyle=[1]\color{black}\bfseries\em,
	keepspaces=true,
	morecomment=[l]{\#},
	morekeywords={
		algorithm,analysis,analyze,constraints,deformation,disp,eleLoad,element,equalDOF,fix,fixX,fixY,fixZmodel,geomTransf,initialize,integrator,layer,loadConst,mass,model,node,numberer,patch,pattern,printA,PySimple1Gen,reaction,recorder,region,rigidDiaphragm,section,system,test,uniaxialMaterial,wipe,wipeAnalysis
	},
	ndkeywords={
		9_4_QuadUP,20_8_BrickUP,AC3D8,Aggregator,ArcLength,ASI3D8,AV3D4,AxialSp,AxialSpHD,BandGeneral,BARSLIP,BasicBuilder,bbarBrick,bbarBrickUP,bbarQuad,bbarQuadUP,BeamColumnJoint,BeamContact2D,BeamContact3D,BeamEndContact3D,BFGS,Bilin,BilinearOilDamper,Bond_SP01,BoucWen,Brick20N,brickUP,Broyden,BWBN,Cast,CatenaryCable,CentralDifference,CFSSSWP,CFSWSWP,Concrete01,Concrete01WithSITC,Concrete02,Concrete03,Concrete04,Concrete06,Concrete07,ConcreteCM,ConcreteD,ConfinedConcrete01,constraintsTypeGravity,Corotational,corotTruss,corotTrussSection,CoupledZeroLength,DeformedShape,dispBeamColumn,dispBeamColumnInt,DisplacementControl,Dodd_Restrepo,Drift,ECC01,Elastic,elasticBeamColumn,ElasticBilin,ElasticMultiLinear,ElasticPP,ElasticPPGap,ElasticTimoshenkoBeam,ElasticTubularJoint,elastomericBearingBoucWen,elastomericBearingPlasticity,ElastomericX,Element,EnergyIncr,enhancedQuad,ENT,Explicitdifference,Fatigue,flatSliderBearing,forceBeamColumn,forceBeamColumn,FourNodeTetrahedron,FPBearingPTV,FRPConfinedConcrete,GeneralizedAlpha,Hardening,HDR,HHT,HyperbolicGapMaterial,Hysteretic,ImpactMaterial,InitStrainMaterial,InitStressMaterial,Joint2D,KikuchiAikenHDR,KikuchiAikenLRB,KikuchiBearing,KrylovNewton,Lagrange,LeadRubberX,LimitState,Linear,LoadControl,LoadControl,MinMax,MinUnbalDispNorm,mkdir,ModElasticBeam2d,ModifiedNewton,ModIMKPeakOriented,ModIMKPinching,MultiLinear,multipleShearSpring,MVLEM,Newmark,Newton,NewtonLineSearch,Node,NodeNumbers,nonlinearBeamColumn,NormDispIncr,numberer,Parallel,PathIndependentMaterial,pattern,PDelta,Pinching4,PinchingLimitStateMaterial,Plain,PyLiq1,PySimple1,quad,quadr,quadUP,QzSimple1,RambergOsgoodSteel,rayleigh,RCM,rect,ReinforcingSteel,RJWatsonEqsBearing,SAWS,SecantNewton,SelfCentering,Series,SFI_MVLEM,ShallowFoundationGen,ShellDKGQ,ShellDKGT,ShellMITC4,ShellNL,ShellNLDKGQ,ShellNLDKGT,SimpleContact2D,SimpleContact3D,singleFPBearing,SparseGeneral,SSPbrick,SSPbrickUP,SSPquad,SSPquadUP,Static,stdBrick,Steel01,Steel01,Steel02,Steel4,SteelMPF,straight,SurfaceLoad,TFP,Transient,TRBDF2,tri31,TripleFrictionPendulum,truss,trussSection,twoNodeLink,TzLiq1,TzSimple1,UniformExcitation,ViewScale,Viscous,ViscousDamper,VS3D4,YamamotoBiaxialHDR,zeroLength,zeroLengthContact,zeroLengthContactNTS2D,zeroLengthImpact3D,zeroLengthImpact3D,zeroLengthInterface2D,zeroLengthND,zeroLengthSection
	},
	ndkeywordstyle=\color{dkcyan}\ttfamily
}

% Pascal
\lstdefinestyle{pascal}{
	language=Pascal,
	morecomment=[l]{//},
	sensitive=false
}

% Perl
\lstdefinestyle{perl}{
	language=Perl,
	alsoletter={\%},
	breakatwhitespace=false,
	keepspaces=true
}

% PHP
\lstdefinestyle{php}{
	language=php,
	emph=[1]{
		php
	},
	emph=[2]{
		if,and,or,else
	},
	emph=[3]{
		abstract,as,const,else,elseif,endfor,endforeach,endif,extends,final,for,foreach,global,if,implements,private,protected,public,static,var
	},
	emphstyle=[1]\color{black},
	emphstyle=[2]\color{blue},
	keywords={
		abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,finally,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,yield,__halt_compiler
	},
	showlines=true,
	upquote=true
}

% Texto plano
\lstdefinestyle{plaintext}{
	language={},
	keepspaces=true,
	postbreak={},
	tabsize=4
}

% Postscript
\lstdefinestyle{postscript}{
	language=PostScript,
	keepspaces=true
}

% Powershell
% https://github.com/rmainer/latex-listings-powershell/blob/master/src/latex-listings-powershell.tex
\lstdefinestyle{powershell}{
	alsodigit={-},
	morecomment=[l]{\#},
	morecomment=[n]{<\#}{\#>},
	morekeywords={
		Add-Content,Add-PSSnapin,Clear-Content,Clear-History,Clear-Host,Clear-Item,Clear-ItemProperty,Clear-Variable,Compare-Object,Connect-PSSession,Convert-Path,ConvertFrom-String,Copy-Item,Copy-ItemProperty,Disable-PSBreakpoint,Disconnect-PSSession,Enable-PSBreakpoint,Enter-PSSession,Exit-PSSession,Export-Alias,Export-Csv,Export-PSSession,ForEach-Object,Format-Custom,Format-Hex,Format-List,Format-Table,Format-Wide,Get-Alias,Get-ChildItem,Get-Clipboard,Get-Command,Get-ComputerInfo,Get-Content,Get-History,Get-Item,Get-ItemProperty,Get-ItemPropertyValue,Get-Job,Get-Location,Get-Member,Get-Module,Get-Process,Get-PSBreakpoint,Get-PSCallStack,Get-PSDrive,Get-PSSession,Get-PSSnapin,Get-Service,Get-TimeZone,Get-Unique,Get-Variable,Get-WmiObject,Group-Object,help,Import-Alias,Import-Csv,Import-Module,Import-PSSession,Invoke-Command,Invoke-Expression,Invoke-History,Invoke-Item,Invoke-RestMethod,Invoke-WebRequest,Invoke-WmiMethod,Measure-Object,mkdir,Move-Item,Move-ItemProperty,New-Alias,New-Item,New-Module,New-PSDrive,New-PSSession,New-PSSessionConfigurationFile,New-Variable,Out-GridView,Out-Host,Out-Printer,Pop-Location,powershell_ise.exe,Push-Location,Receive-Job,Receive-PSSession,Remove-Item,Remove-ItemProperty,Remove-Job,Remove-Module,Remove-PSBreakpoint,Remove-PSDrive,Remove-PSSession,Remove-PSSnapin,Remove-Variable,Remove-WmiObject,Rename-Item,Rename-ItemProperty,Resolve-Path,Resume-Job,Select-Object,Select-String,Set-Alias,Set-Clipboard,Set-Content,Set-Item,Set-ItemProperty,Set-Location,Set-PSBreakpoint,Set-TimeZone,Set-Variable,Set-WmiInstance,Show-Command,Sort-Object,Start-Job,Start-Process,Start-Service,Start-Sleep,Stop-Job,Stop-Process,Stop-Service,Suspend-Job,Tee-Object,Trace-Command,Wait-Job,Where-Object,Write-Output
	},
	morekeywords={
		Do,Else,For,ForEach,Function,If,In,Until,While
	},
	morestring=[b]{"},
	morestring=[b]{'},
	morestring=[s]{@'}{'@},
	morestring=[s]{@"}{"@},
	sensitive=false
}

% Prolog
\lstdefinestyle{prolog}{
	language=Prolog
}

% Promela
\lstdefinestyle{promela}{
	language=Promela
}

% Pseudocódigo
\lstdefinestyle{pseudocode}{
	language={},
	backgroundcolor=\color{white},
	breakatwhitespace=false,
	commentstyle=\color{gray}\upshape,
	frame=tb,
	keepspaces=true,
	keywords={
		and,be,begin,break,datatype,do,elif,else,end,for,foreach,fun,function,if,in,input,let,not,null,or,output,pop,procedure,push,repeat,return,swap,until,while,xor
	},
	keywordstyle=\color{black}\bfseries,
	mathescape=true,
	morecomment=[l]{//},
	morecomment=[l]{\#},
	morecomment=[s]{/*}{*/},
	morecomment=[s]{/**}{*/},
	sensitive=false,
	stringstyle=\color{dkgray}\bfseries\em
}

% Python
\lstdefinelanguage{pythonEXTENDED}{
	language=Python,
	breakatwhitespace=false,
	emph={
		AbstractSet,Any,AsyncContextManager,AsyncGenerator,AsyncIterable,AsyncIterator,Awaitable,AwaitableGenerator,BinaryIO,ByteString,Callable,Collection,Container,ContextManager,Coroutine,Dict,False,ForwardRef,Generator,GenericMeta,Hashable,IO,ItemsView,Iterable,Iterator,KeysView,List,Mapping,MappingView,Match,Meta,MutableMapping,MutableSequence,MutableSet,NamedTuple,None,Pattern,Reversible,Sequence,Sized,SupportInts,SupportsAbs,SupportsBytes,SupportsComplex,SupportsFloat,SupportsIndex,SupportsRound,TextIO,True,Tuple,TypeAlias,TYPE_CHECKING,Union,ValuesView,__add__,__and__,__eq__,__floordiv__,__ge__,__gt__,__init__,__le__,__lt__,__main__,__mod__,__mul__,__name__,__ne__,__or__,__pow__,__repr__,__str__,__sub__,__truediv__,__xor__
	},
	emphstyle=\color{dkcyan}\ttfamily,
	keepspaces=true,
	morecomment=[s][\color{BurntOrange}]{@}{\ },
	morekeywords={
		as,assert,close,listdir,self,sorted,split,strip,with
	}
}
\lstdefinestyle{python}{
	language=pythonEXTENDED
}

% Q#
\lstdefinestyle{qsharp}{
	mathescape=true,
	morecomment=[l]{//},
	morecomment=[l][\color{dkgreen}]{///},
	morekeywords={
		Adj,Adjoint,adjoint,and,apply,as,auto,BigInt,body,Bool,borrowing,Controlled,controlled,Ctl,distribute,Double,elif,else,fail,false,fixup,for,function,if,in,Int,intrinsic,invert,is,let,mutable,namespace,new,newtype,not,One,open,operation,or,Pauli,PauliI,PauliX,PauliY,PauliZ,Qubit,Range,repeat,Result,return,self,set,String,true,Unit,until,using,while,within,Zero
	},
	morekeywords=[2]{
		Assert,AssertProb,CCNOT,CNOT,Exp,ExpFrac,H,I,M,Measure,Message,R,R1,R1Frac,Random,Reset,ResetAll,RFrac,Rx,Ry,Rz,S,SWAP,T,X,Y,Z
	},
	sensitive=true
}

% R
\lstdefinestyle{r}{
	language=R,
	alsoletter={.<-},
	alsoother={._$},
	deletekeywords={
		df,data,frame,length,as,character
	},
	morecomment=[l]\#,
	morestring=[d]',
	morestring=[d]",
	otherkeywords={
		!,!=,~,$,*,\&,\%/\%,\%*\%,\%\%,<-,<<-,/
	}
}

% Racket
\lstdefinestyle{racket}{
	alsoletter={',`,-,/,>,<,\#,\%},
	morekeywords=[1]{
		define,define-macro,define-stream,define-syntax,lambda,stream-lambda
	},
	morekeywords=[2]{
		->,always_publish,and,\#',\#\%module-begin,\#lang,\#`,begin,begin-for-syntax,Boolean,call-with-current-continuation,call-with-input-file,call-with-output-file,callback,call/cc,case,cond,define-context,define-controller,define-struct/contract,define/contract,delay,do,else,environment,eval,fold,for,for-each,force,get,if,implement,in-range,Integer,label,let,let*,let*-values,let-syntax,let-values,letrec,letrec-syntax,map,maybe_publish,message-box,module,new,not,or,or/c,parent,provide,quasiquote,query,quote,rename-out,require,send,submod,syntax,syntax-case,syntax-rules,unquote,unquote-splicing,when,when-provided,when-required,with-syntax
	},
	morekeywords=[3]{
		export,import
	},
	morecomment=[l]{;},
	moredelim=**[is][\color{lgray}]{<<@<<}{>>@>>},
	moredelim=**[is][\itshape\color{mauve}]{<<;<<}{>>;>>},
	morecomment=[s]{\#|}{|\#},
	morestring=[s]{"}{"},
	sensitive=true
}

% Reil
\lstdefinestyle{reil}{
	comment=[l]{;},
	keywords=[1]{
		ADD,add,and,AND,BISZ,bisz,bsh,BSH,div,DIV,jcc,JCC,LDM,ldm,MOD,mod,mul,MUL,nop,NOP,or,OR,stm,STM,STR,str,sub,SUB,undef,UNDEF,unkn,UNKN,XOR,xor
	},
	keywords=[3]{
		ah,AH,al,AL,AX,ax,bh,BH,BL,bl,bp,BP,bpl,BPL,BX,bx,ch,CH,cl,CL,cx,CX,DH,dh,di,DI,dil,DIL,dl,DL,DX,dx,EAX,eax,EBP,ebp,ebx,EBX,ECX,ecx,EDI,edi,edx,EDX,esi,ESI,esp,ESP,r8,R8,r8b,R8B,r8d,R8D,r8w,R8W,r9,R9,R9B,r9b,R9D,r9d,r9w,R9W,r10,R10,R10B,r10b,R10D,r10d,r10w,R10W,r11,R11,r11b,R11B,r11d,R11D,R11W,r11w,R12,r12,R12B,r12b,r12d,R12D,r12w,R12W,R13,r13,r13b,R13B,R13D,r13d,R13W,r13w,r14,R14,R14B,r14b,r14d,R14D,R14W,r14w,r15,R15,r15b,R15B,r15d,R15D,R15W,r15w,RAX,rax,rbp,RBP,rbx,RBX,RCX,rcx,RDI,rdi,rdx,RDX,RSI,rsi,RSP,rsp,SI,si,SIL,sil,SP,sp,spl,SPL
	},
	sensitive=true
}

% Ruby
\lstdefinestyle{ruby}{
	language=Ruby,
	breakatwhitespace=true,
	morestring=[s][]{\#\{}{\}},
	morestring=*[d]{"},
	sensitive=true
}

% Rust
\lstdefinelanguage{Rust}{
	sensitive,
	alsodigit={},
	alsoletter={!},
	alsoother={},
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	moredelim=[s][{\itshape\color[rgb]{0,0,0.75}}]{\#[}{]},
	morekeywords=[2]{ % Traits
		Add,AddAssign,Any,AsciiExt,AsInner,AsInnerMut,AsMut,AsRawFd,AsRawHandle,AsRawSocket,AsRef,Binary,BitAnd,BitAndAssign,Bitor,BitOr,BitOrAssign,BitXor,BitXorAssign,Borrow,BorrowMut,Boxed,BoxPlace,BufRead,BuildHasher,CastInto,CharExt,Clone,CoerceUnsized,CommandExt,Copy,Debug,DecodableFloat,Default,Deref,DerefMut,DirBuilderExt,DirEntryExt,Display,Div,DivAssign,DoubleEndedIterator,DoubleEndedSearcher,Drop,EnvKey,Eq,Error,ExactSizeIterator,ExitStatusExt,Extend,FileExt,FileTypeExt,Float,Fn,FnBox,FnMut,FnOnce,Freeze,From,FromInner,FromIterator,FromRawFd,FromRawHandle,FromRawSocket,FromStr,FullOps,FusedIterator,Generator,Hash,Hasher,Index,IndexMut,InPlace,Int,Into,IntoCow,IntoInner,IntoIterator,IntoRawFd,IntoRawHandle,IntoRawSocket,IsMinusOne,IsZero,Iterator,JoinHandleExt,LargeInt,LowerExp,LowerHex,MetadataExt,Mul,MulAssign,Neg,Not,Octal,OpenOptionsExt,Ord,OsStrExt,OsStringExt,Packet,PartialEq,PartialOrd,Pattern,PermissionsExt,Place,Placer,Pointer,Product,Put,RangeArgument,RawFloat,Read,Rem,RemAssign,Seek,Shl,ShlAssign,Shr,ShrAssign,Sized,SliceConcatExt,SliceExt,SliceIndex,Stats,Step,StrExt,Sub,SubAssign,Sum,Sync,TDynBenchFn,Terminal,Termination,ToOwned,ToSocketAddrs,ToString,Try,TryFrom,TryInto,UnicodeStr,Unsize,UpperExp,UpperHex,WideInt,Write
	},
	morekeywords=[2]{
		Send
	},
	morekeywords=[3]{ % Primitivas
		bool,char,f32,f64,i8,i16,i32,i64,isize,str,u8,u16,u32,u64,unit,usize,i128,u128
	},
	morekeywords=[4]{ % Valor y tipo de constructores
		Err,false,None,Ok,Some,true
	},
	morekeywords=[5]{ % Identificadores
		assert!,assert_eq!,assert_ne!,cfg!,column!,compile_error!,concat!,concat_idents!,debug_assert!,debug_assert_eq!,debug_assert_ne!,env!,eprint!,eprintln!,file!,format!,format_args!,include!,include_bytes!,include_str!,line!,module_path!,option_env!,panic!,print!,println!,select!,stringify!,thread_local!,try!,unimplemented!,unreachable!,vec!,write!,writeln!
	},
	morekeywords={ % Palabras reservadas
		abstract,alignof,become,box,do,final,macro,offsetof,override,priv, proc,pure,sizeof,typeof,unsized,virtual,yield
	},
	morekeywords={
		as,const,let,move,mut,ref,static
	},
	morekeywords={
		break,continue,else,for,if,in,loop,match,return,while
	},
	morekeywords={
		crate,extern,mod,pub,super
	},
	morekeywords={
		dyn,enum,fn,impl,Self,self,struct,trait,type,union,use,where
	},
	morekeywords={
		unsafe
	},
	morestring=[b]{"}
}
\lstdefinestyle{rust}{
	language=Rust,
	keywordstyle=[2]\color[rgb]{0.75,0,0}, % Traits
	keywordstyle=[3]\color[rgb]{0,0.5,0}, % Primitivas
	keywordstyle=[4]\color[rgb]{0,0.5,0}, % Valor y tipo de constructores
	keywordstyle=[5]\color[rgb]{0,0,0.75} % Macros
}

% Scala
\lstdefinestyle{scala}{
	language=scala,
	breakatwhitespace=true,
	morecomment=[l]{//},
	morecomment=[n]{/*}{*/},
	morekeywords={
		abstract,case,catch,class,def,do,else,extends,false,final,finally,for,if,implicit,import,match,mixin,new,null,object,override,package,private,protected,requires,return,sealed,super,this,throw,trait,true,try,type,val,var,while,with,yield
	},
	morestring=[b]',
	morestring=[b]",
	morestring=[b]""",
	otherkeywords={
		=>,<-,<\%,<:,>:,\#,@
	}
}

% Scheme
\lstdefinestyle{scheme}{
	language=Lisp,
	morecomment=[l]{;},
	morekeywords={
		and,begin,case,case-lambda,cond,cond-expand,define,delay,delay-force,do,else,force,guard,if,lambda,let,let*,let*-values,let-syntax,let-values,letrec,letrec*,letrec-syntax,make-parameter,make-promise,map,or,parameterize,promise?,quasiquote,quote,set!,syntax-rules,unless,when
	},
	morestring=[b]"
}

% Scilab
\lstdefinestyle{scilab}{
	language=Scilab
}

% Simula
\lstdefinestyle{simula}{
	language=Simula
}

% SPARQL
\lstdefinestyle{sparql}{
	language=SPARQL
}

% SQL
\lstdefinestyle{sql}{
	language=SQL,
	breakatwhitespace=true
}

% Swift
\lstdefinestyle{swift}{
	language=Swift
}

% TCL
\lstdefinestyle{tcl}{
	language=tcl,
	breakatwhitespace=false,
	keepspaces=true,
	morecomment=[l]{\#}
}

% Visual Basic
\lstdefinestyle{vbscript}{
	language=[Visual]Basic,
	extendedchars=true
}

% Verilog
\lstdefinestyle{verilog}{
	language=Verilog
}

% VDHL
\lstdefinelanguage{VHDL}{
	morekeywords=[1]{
		ALL,all,and,architecture,begin,downto,end,entity,in,is,library,Not,of,or,out,port,use
	},
	morekeywords=[2]{
		IEEE,NUMERIC_STD,STD_LOGIC,std_logic,STD_LOGIC_1164,STD_LOGIC_ARITH,STD_LOGIC_UNSIGNED,STD_LOGIC_VECTOR,std_logic_vector
	},
	morecomment=[l]--
}
\lstdefinestyle{vhdl}{
	language=VHDL
}

% XML
\lstdefinelanguage{XML}{
	morecomment=[s]{<?}{?>},
	morekeywords={
		encoding,type,version,xmlns
	},
	morestring=[b]",
	morestring=[s]{>}{<}
}
\lstdefinestyle{xml}{
	language=XML,
	tabsize=2
}

% -----------------------------------------------------------------------------
% Configuración de códigos fuente
% -----------------------------------------------------------------------------
\lstset{
	aboveskip=0.75em,
	basicstyle={\sourcecodefonts\sourcecodefontf\color{\maintextcolor}},
	belowskip=1em,
	breaklines=true,
	columns=fullflexible,
	commentstyle=\color{dkgreen}\upshape,
	extendedchars=true,
	fontadjust=true,
	% fancyvrb=false,
	identifierstyle=\color{\maintextcolor},
	keepspaces=true,
	keywordstyle=\color{blue},
	literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
		{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1 {à}{{\`a}}1
		{è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1 {À}{{\`A}}1 {È}{{\'E}}1
		{Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1 {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1
		{ö}{{\"o}}1 {ü}{{\"u}}1 {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1
		{Ü}{{\"U}}1 {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
		{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1 {œ}{{\oe}}1
		{Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1 {ű}{{\H{u}}}1
		{Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1 {ç}{{\c c}}1 {Ç}{{\c C}}1
		{ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1 {€}{{\EUR}}1 {£}{{\pounds}}1
		{ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?``}}1 {¡}{{!``}}1 {«}{{\guillemotleft}}1
		{»}{{\guillemotright}}1 {°}{{\textdegree}}1 {∢}{{$\sphericalangle$}}1
		{¬}{{$\neg$}}1 {¨}{{\textasciidieresis}}1 {ã}{{\~a}}1 {Ã}{{\~a}}1
		{õ}{{\~o}}1 {Õ}{{\~O}}1 {Ð}{{\DJ}}1 {Ø}{{\O}}1 {Ý}{{\'Y}}1
		{¹}{{\textsuperscript{1}}}1 {²}{{\textsuperscript{2}}}1
		{³}{{\textsuperscript{3}}}1 {⁴}{{\textsuperscript{4}}}1
		{⁵}{{\textsuperscript{5}}}1 {⁶}{{\textsuperscript{6}}}1
		{⁷}{{\textsuperscript{7}}}1 {⁸}{{\textsuperscript{8}}}1
		{⁹}{{\textsuperscript{9}}}1 {⁰}{{\textsuperscript{0}}}1
		{ᵃ}{{\textsuperscript{a}}}1 {ᵇ}{{\textsuperscript{b}}}1
		{ᶜ}{{\textsuperscript{c}}}1 {ᵈ}{{\textsuperscript{d}}}1
		{ᵉ}{{\textsuperscript{e}}}1 {ᶠ}{{\textsuperscript{f}}}1
		{ᵍ}{{\textsuperscript{g}}}1 {ʰ}{{\textsuperscript{h}}}1
		{ᶦ}{{\textsuperscript{i}}}1 {ʲ}{{\textsuperscript{j}}}1
		{ᵏ}{{\textsuperscript{k}}}1 {ˡ}{{\textsuperscript{l}}}1
		{ᵐ}{{\textsuperscript{m}}}1 {ⁿ}{{\textsuperscript{n}}}1
		{ᵒ}{{\textsuperscript{o}}}1 {ᵖ}{{\textsuperscript{p}}}1
		{ᵠ}{{\textsuperscript{q}}}1 {ʳ}{{\textsuperscript{r}}}1
		{ˢ}{{\textsuperscript{s}}}1 {ᵗ}{{\textsuperscript{t}}}1
		{ᵘ}{{\textsuperscript{u}}}1 {ᵛ}{{\textsuperscript{v}}}1
		{ʷ}{{\textsuperscript{w}}}1 {ˣ}{{\textsuperscript{x}}}1
		{ʸ}{{\textsuperscript{y}}}1 {ᶻ}{{\textsuperscript{z}}}1
		{α}{{$\alpha$}}1 {ά}{{$\dot \alpha$}}1 {Γ}{{$\Gamma$}}1 {Þ}{{$\Thorn$}}1
		{γ}{{$\gamma$}}1 {Δ}{{$\Delta$}}1 {δ}{{$\delta$}}1 {þ}{{$\thorn$}}1
		{ε}{{$\epsilon$}}1 {έ}{{$\dot \epsilon$}}1 {ζ}{{$\zeta$}}1
		{η}{{$\eta$}}1 {ή}{{$\dot \eta$}}1 {Θ}{{$\Theta$}}1
		{θ}{{$\theta$}}1 {ι}{{$\iota$}}1 {ί}{{$\dot \iota$}}1
		{Ϊ}{{$\ddot I$}}1 {ϊ}{{$\ddot \iota$}}1 {ΐ}{{$\dddot \iota$}}1
		{κ}{{$\kappa$}}1 {Λ}{{$\Lambda$}}1 {λ}{{$\lambda$}}1
		{μ}{{$\mu$}}1 {ν}{{$\nu$}}1 {Ξ}{{$\Xi$}}1 {ξ}{{$\xi$}}1
		{ό}{{$\dot o$}}1 {Π}{{$\Pi$}}1 {π}{{$\pi$}}1 {ρ}{{$\rho$}}1
		{Σ}{{$\Sigma$}}1 {σ}{{$\sigma$}}1 {ς}{{$\varsigma$}}1 {τ}{{$\tau$}}1
		{υ}{{$\upsilon$}}1 {ύ}{{$\dot \upsilon$}}1 {Ϋ}{{$\ddot Y$}}1
		{ϋ}{{$\ddot \upsilon$}}1 {ΰ}{{$\dddot \upsilon$}}1
		{Φ}{{$\Phi$}}1 {φ}{{$\phi$}}1 {Ψ}{{$\Psi$}}1 {ψ}{{$\psi$}}1
		{Ω}{{$\Omega$}}1 {ω}{{$\omega$}}1 {ώ}{{$\dot \omega$}}1
		{“}{{``}}1 {”}{{''}}1 {…}{{$\ldots$}}1 {`}{\`}1,
	numbers=left,
	numbersep={\sourcecodenumbersep pt},
	numberstyle=\tiny\color{dkgray},
	postbreak=\mbox{$\hookrightarrow$\space},
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	stepnumber=1,
	stringstyle=\color{mauve},
	tabsize={\sourcecodetabsize}
}

% -----------------------------------------------------------------------------
% Chequeo de estilos, cualquier nuevo estilo añadirlo a esta lista
% -----------------------------------------------------------------------------
\newcommand{\checkvalidsourcecodestyle}[1]{%
	\ifthenelse{\equal{#1}{abap}}{}{%
	\ifthenelse{\equal{#1}{ada}}{}{%
	\ifthenelse{\equal{#1}{assemblerx64}}{}{%
	\ifthenelse{\equal{#1}{assemblerx86}}{}{%
	\ifthenelse{\equal{#1}{awk}}{}{%
	\ifthenelse{\equal{#1}{bash}}{}{%
	\ifthenelse{\equal{#1}{basic}}{}{%
	\ifthenelse{\equal{#1}{c}}{}{%
	\ifthenelse{\equal{#1}{caml}}{}{%
	\ifthenelse{\equal{#1}{cmake}}{}{%
	\ifthenelse{\equal{#1}{cobol}}{}{%
	\ifthenelse{\equal{#1}{cpp}}{}{%
	\ifthenelse{\equal{#1}{csharp}}{}{%
	\ifthenelse{\equal{#1}{css}}{}{%
	\ifthenelse{\equal{#1}{csv}}{}{%
	\ifthenelse{\equal{#1}{cuda}}{}{%
	\ifthenelse{\equal{#1}{dart}}{}{%
	\ifthenelse{\equal{#1}{docker}}{}{%
	\ifthenelse{\equal{#1}{elisp}}{}{%
	\ifthenelse{\equal{#1}{elixir}}{}{%
	\ifthenelse{\equal{#1}{erlang}}{}{%
	\ifthenelse{\equal{#1}{fortran}}{}{%
	\ifthenelse{\equal{#1}{fsharp}}{}{%
	\ifthenelse{\equal{#1}{glsl}}{}{%
	\ifthenelse{\equal{#1}{gnuplot}}{}{%
	\ifthenelse{\equal{#1}{go}}{}{%
	\ifthenelse{\equal{#1}{haskell}}{}{%
	\ifthenelse{\equal{#1}{html}}{}{%
	\ifthenelse{\equal{#1}{ini}}{}{%
	\ifthenelse{\equal{#1}{java}}{}{%
	\ifthenelse{\equal{#1}{javascript}}{}{%
	\ifthenelse{\equal{#1}{json}}{}{%
	\ifthenelse{\equal{#1}{julia}}{}{%
	\ifthenelse{\equal{#1}{kotlin}}{}{%
	\ifthenelse{\equal{#1}{latex}}{}{%
	\ifthenelse{\equal{#1}{lisp}}{}{%
	\ifthenelse{\equal{#1}{llvm}}{}{%
	\ifthenelse{\equal{#1}{lua}}{}{%
	\ifthenelse{\equal{#1}{make}}{}{%
	\ifthenelse{\equal{#1}{maple}}{}{%
	\ifthenelse{\equal{#1}{mathematica}}{}{%
	\ifthenelse{\equal{#1}{matlab}}{}{%
	\ifthenelse{\equal{#1}{mercury}}{}{%
	\ifthenelse{\equal{#1}{modula2}}{}{%
	\ifthenelse{\equal{#1}{objectivec}}{}{%
	\ifthenelse{\equal{#1}{octave}}{}{%
	\ifthenelse{\equal{#1}{opencl}}{}{%
	\ifthenelse{\equal{#1}{opensees}}{}{%
	\ifthenelse{\equal{#1}{pascal}}{}{%
	\ifthenelse{\equal{#1}{perl}}{}{%
	\ifthenelse{\equal{#1}{php}}{}{%
	\ifthenelse{\equal{#1}{plaintext}}{}{%
	\ifthenelse{\equal{#1}{postscript}}{}{%
	\ifthenelse{\equal{#1}{powershell}}{}{%
	\ifthenelse{\equal{#1}{prolog}}{}{%
	\ifthenelse{\equal{#1}{promela}}{}{%
	\ifthenelse{\equal{#1}{pseudocode}}{}{%
	\ifthenelse{\equal{#1}{python}}{}{%
	\ifthenelse{\equal{#1}{qsharp}}{}{%
	\ifthenelse{\equal{#1}{r}}{}{%
	\ifthenelse{\equal{#1}{racket}}{}{%
	\ifthenelse{\equal{#1}{reil}}{}{%
	\ifthenelse{\equal{#1}{ruby}}{}{%
	\ifthenelse{\equal{#1}{rust}}{}{%
	\ifthenelse{\equal{#1}{scala}}{}{%
	\ifthenelse{\equal{#1}{scheme}}{}{%
	\ifthenelse{\equal{#1}{scilab}}{}{%
	\ifthenelse{\equal{#1}{simula}}{}{%
	\ifthenelse{\equal{#1}{sparql}}{}{%
	\ifthenelse{\equal{#1}{sql}}{}{%
	\ifthenelse{\equal{#1}{swift}}{}{%
	\ifthenelse{\equal{#1}{tcl}}{}{%
	\ifthenelse{\equal{#1}{vbscript}}{}{%
	\ifthenelse{\equal{#1}{verilog}}{}{%
	\ifthenelse{\equal{#1}{vhdl}}{}{%
	\ifthenelse{\equal{#1}{xml}}{}{%
		\errmessage{LaTeX Warning: Estilo de codigo desconocido. Valores esperados: abap,ada,assemblerx64,assemblerx86,awk,bash,basic,c,caml,cmake,cobol,cpp,csharp,css,csv,cuda,dart,docker,elisp,elixir,erlang,fortran,fsharp,glsl,gnuplot,go,haskell,html,ini,java,javascript,json,julia,kotlin,latex,lisp,llvm,lua,make,maple,mathematica,matlab,mercury,modula2,objectivec,octave,opencl,opensees,pascal,perl,php,plaintext,postscript,powershell,prolog,promela,pseudocode,python,qsharp,r,racket,reil,ruby,rust,scala,scheme,scilab,simula,sparql,sql,swift,tcl,vbscript,verilog,vhdl,xml}%
		\stop%
	}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}%
}

% Crea un entorno de código inline
%	#1	Estilo de código
%	#2	Código a insertar
\newcommand{\inlinesourcecode}[2]{%
	\inlinesourcecodeboxed[NOCOLOR]{#1}{#2}%
}

% Crea un entorno de código inline dentro de un recuadro de color
%	#1	Color del recuadro
%	#2	Estilo de código
%	#3	Código a insertar
\newcommand{\inlinesourcecodeboxed}[3][]{%
	\checkvalidsourcecodestyle{#2}%
	\ifthenelse{\equal{#1}{}}{%
		\Colorbox{\sourcecodebgcolor}{\lstinline[style=#2]!#3!}%
	}{%
	\ifthenelse{\equal{#1}{NOCOLOR}}{%
		\lstinline[style=#2]!#3!%
	}{%
		\Colorbox{#1}{\lstinline[style=#2]!#3!}%
	}}%
}

% Inserta una referencia en un código fuente
% 	#1	Referencia
\newcommand{\coderef}[1]{%
	\ensuremath{\text{\ref{#1}}}
}

% Inserta una referencia en un código fuente
% 	#1	Referencia
\newcommand{\codeeqref}[1]{%
	\ensuremath{\text{(\ref{#1})}}
}

% -----------------------------------------------------------------------------
% Estilo de enumeración en griego
% -----------------------------------------------------------------------------
\RequirePackage{enumitem}
\makeatletter
\def\greek#1{\expandafter\@greek\csname c@#1\endcsname}
\def\Greek#1{\expandafter\@Greek\csname c@#1\endcsname}
\def\@greek#1{%
	\ifcase#1%
		\or $\alpha$%
		\or $\beta$%
		\or $\gamma$%
		\or $\delta$%
		\or $\epsilon$%
		\or $\zeta$%
		\or $\eta$%
		\or $\theta$%
		\or $\iota$%
		\or $\kappa$%
		\or $\lambda$%
		\or $\mu$%
		\or $\nu$%
		\or $\xi$%
		\or $o$%
		\or $\pi$%
		\or $\rho$%
		\or $\sigma$%
		\or $\tau$%
		\or $\upsilon$%
		\or $\phi$%
		\or $\chi$%
		\or $\psi$%
		\or $\omega$%
	\fi%
}
\def\@Greek#1{%
	\ifcase#1%
		\or $\mathrm{A}$%
		\or $\mathrm{B}$%
		\or $\Gamma$%
		\or $\Delta$%
		\or $\mathrm{E}$%
		\or $\mathrm{Z}$%
		\or $\mathrm{H}$%
		\or $\Theta$%
		\or $\mathrm{I}$%
		\or $\mathrm{K}$%
		\or $\Lambda$%
		\or $\mathrm{M}$%
		\or $\mathrm{N}$%
		\or $\Xi$%
		\or $\mathrm{O}$%
		\or $\Pi$%
		\or $\mathrm{P}$%
		\or $\Sigma$%
		\or $\mathrm{T}$%
		\or $\mathrm{Y}$%
		\or $\Phi$%
		\or $\mathrm{X}$%
		\or $\Psi$%
		\or $\Omega$%
	\fi%
}
\makeatother
\AddEnumerateCounter{\greek}{\@greek}{24}
\AddEnumerateCounter{\Greek}{\@Greek}{12}

% -----------------------------------------------------------------------------
% CONFIGURACIÓN INICIAL DEL DOCUMENTO
% -----------------------------------------------------------------------------
% Se revisa si las variables no han sido borradas
\def\temaatratar {}
\def\titulodelinforme {\titulotesis}
\def\subtituloinforme {\subtitulotesis}
\def\autordeldocumento {\autortesis}
\def\addemptypagetwosides {false}
\def\predocpageromannumber {true}
\def\predocresetpagenumber {true}
\def\indexnewpagec {false}
\def\indexnewpagef {false}
\def\indexnewpaget {false}
\def\indexnewpagee {false}
\def\showindex {true}
\def\showindexofcontents {true}
\def\codigodelcurso {}
\def\nombredelcurso {}
\def\fontsizetitlei {\fontsizetitle}
\def\styletitlei {\styletitle}

\checkvardefined{\autordeldocumento}
\checkvardefined{\departamentouniversidad}
\checkvardefined{\imagendepartamentoparams}
\checkvardefined{\localizacionuniversidad}
\checkvardefined{\nombredelcurso}
\checkvardefined{\nombrefacultad}
\checkvardefined{\nombreuniversidad}
\checkvardefined{\temaatratar}
\checkvardefined{\titulodelinforme}

% -----------------------------------------------------------------------------
% Se añade \xspace a las variables
% -----------------------------------------------------------------------------
\makeatletter
	\g@addto@macro\autordeldocumento\xspace
	\g@addto@macro\codigodelcurso\xspace
	\g@addto@macro\departamentouniversidad\xspace
	\g@addto@macro\localizacionuniversidad\xspace
	\g@addto@macro\nombredelcurso\xspace
	\g@addto@macro\nombrefacultad\xspace
	\g@addto@macro\nombreuniversidad\xspace
	\g@addto@macro\temaatratar\xspace
	\g@addto@macro\titulodelinforme\xspace
\makeatother

\ifthenelse{\equal{\subtituloinforme}{}}{
	\def\tituloinformehf {\titulodelinforme}
}{
	\def\tituloinformehf {\subtituloinforme}
}

% -----------------------------------------------------------------------------
% Verifica tamaños de fuentes
% -----------------------------------------------------------------------------
\corecheckfontsize{\captionfontsize}
\corecheckfontsize{\subcaptionfsize}

% -----------------------------------------------------------------------------
% Se activan números en menú marcadores del pdf
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\cfgpdfsecnumbookmarks}{true}}{
	\bookmarksetup{numbered}}{
}

% -----------------------------------------------------------------------------
% Se define metadata del pdf
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\cfgshowbookmarkmenu}{true}}{
	\def\cfgpdfpagemode {UseOutlines}
	}{
	\def\cfgpdfpagemode {UseNone}
}
\ifthenelse{\equal{\usepdfmetadata}{true}}{
	\def\pdfmetainfoautor {\autordeldocumento}
	\def\pdfmetainfocodigodelcurso {\codigodelcurso}
	\def\pdfmetainfonombredelcurso {\nombredelcurso}
	\def\pdfmetainfotema {\temaatratar}
	\def\pdfmetainfotitulo {\titulotesis}
	\def\pdfmetainfounidepto {\departamentouniversidad}
	\def\pdfmetainfounifacultad {\nombrefacultad}
	\def\pdfmetainfouninombre {\nombreuniversidad}
	\def\pdfmetainfouniubicacion {\localizacionuniversidad}
	\author{\pdfmetainfoautor}
	\title{\pdfmetainfotitulo}
}{
	\def\pdfmetainfoautor {}
	\def\pdfmetainfocodigodelcurso {}
	\def\pdfmetainfonombredelcurso {}
	\def\pdfmetainfotema {}
	\def\pdfmetainfotitulo {}
	\def\pdfmetainfounidepto {}
	\def\pdfmetainfounifacultad {}
	\def\pdfmetainfouninombre {}
	\def\pdfmetainfouniubicacion {}
}
\hypersetup{
	keeppdfinfo,
	bookmarksopen={\cfgpdfbookmarkopen},
	bookmarksopenlevel={\cfgbookmarksopenlevel},
	bookmarkstype={toc},
	pdfauthor={\pdfmetainfoautor},
	pdfcenterwindow={\cfgpdfcenterwindow},
	pdfcopyright={\cfgpdfcopyright},
	pdfcreator={LaTeX},
	pdfdisplaydoctitle={\cfgpdfdisplaydoctitle},
	pdfencoding={unicode},
	pdffitwindow={\cfgpdffitwindow},
	pdfinfo={
		Curso.Codigo={\pdfmetainfocodigodelcurso},
		Curso.Nombre={\pdfmetainfonombredelcurso},
		Documento.Autor={\pdfmetainfoautor},
		Documento.Tema={\pdfmetainfotema},
		Documento.Titulo={\pdfmetainfotitulo},
		Template.Autor.Alias={ppizarror},
		Template.Autor.Email={pablo@ppizarror.com},
		Template.Autor.Nombre={Pablo Pizarro R.},
		Template.Autor.Web={https://ppizarror.com},
		Template.Codificacion={UTF-8},
		Template.Fecha={01/09/2021},
		Template.Latex.Compilador={pdflatex},
		Template.Licencia.Tipo={MIT},
		Template.Licencia.Web={https://opensource.org/licenses/MIT},
		Template.Nombre={Template-Tesis},
		Template.Tipo={Normal},
		Template.Version.Dev={2.4.1-1-THS},
		Template.Version.Hash={1448A697573146FDEA3E38F423EDCA1A},
		Template.Version.Release={2.4.1},
		Template.Web.Dev={https://github.com/Template-Latex/Template-Tesis},
		Template.Web.Manual={https://latex.ppizarror.com/tesis},
		Universidad.Departamento={\pdfmetainfounidepto},
		Universidad.Facultad={\pdfmetainfounifacultad},
		Universidad.Nombre={\pdfmetainfouninombre},
		Universidad.Ubicacion={\pdfmetainfouniubicacion}
	},
	pdfkeywords={\cfgpdfkeywords},
	pdfmenubar={\cfgpdfmenubar},
	pdfpagelayout={\cfgpdflayout},
	pdfpagemode={\cfgpdfpagemode},
	pdfproducer={Template-Tesis v2.4.1 | (Pablo Pizarro R.) ppizarror.com},
	pdfremotestartview={Fit},
	pdfstartpage={1},
	pdfstartview={\cfgpdfpageview},
	pdfsubject={\pdfmetainfotema},
	pdftitle={\pdfmetainfotitulo},
	pdftoolbar={\cfgpdftoolbar}
}

% -----------------------------------------------------------------------------
% Establece la carpeta de imágenes por defecto
% -----------------------------------------------------------------------------
\graphicspath{{./\defaultimagefolder}}

% -----------------------------------------------------------------------------
% Elimina el espacio vertical de los flotantes
% -----------------------------------------------------------------------------
\makeatletter
\ifthenelse{\equal{\fpremovetopbottomcenter}{true}}{
	\setlength{\@fptop}{0pt}
	\setlength{\@fpbot}{0pt}
}{}
\makeatother

% -----------------------------------------------------------------------------
% Definición de valores e dimensiones
% -----------------------------------------------------------------------------
\renewcommand{\baselinestretch}{\documentinterline} % Ajuste del entrelineado
\setlength{\headheight}{64 pt} % Tamaño de la cabecera sin fancyhdr
% \setcounter{MaxMatrixCols}{20} % Número máximo de columnas en matrices
\setlength{\footnotemargin}{\marginfootnote pt} % Margen del footnote
\setlength{\columnsep}{\columnsepwidth em} % Separación entre columnas
\ifthenelse{\equal{\showlinenumbers}{true}}{
	\setlength{\linenumbersep}{0.50cm}
	\renewcommand\linenumberfont{\normalfont\tiny\color{\linenumbercolor}}
	}{
}

% -----------------------------------------------------------------------------
% Posición inicial de los objetos
% -----------------------------------------------------------------------------
\floatplacement{figure}{\imagedefaultplacement}
\floatplacement{table}{\tabledefaultplacement}
\floatplacement{tikz}{\tikzdefaultplacement}

% -----------------------------------------------------------------------------
% Configuración de los colores
% -----------------------------------------------------------------------------
\color{\maintextcolor} % Color principal
\arrayrulecolor{\tablelinecolor} % Color de las líneas de las tablas
\sethlcolor{\highlightcolor} % Color del subrayado por defecto
\ifthenelse{\equal{\showborderonlinks}{true}}{
	% Color de links con borde
	\hypersetup{
		citebordercolor=\numcitecolor,
		linkbordercolor=\linkcolor,
		urlbordercolor=\urlcolor
	}
}{
	% Color de links sin borde
	\hypersetup{ % No reorganizar
		hidelinks,
		colorlinks=true,
		citecolor=\numcitecolor,
		linkcolor=\linkcolor,
		urlcolor=\urlcolor
	}
}
\ifthenelse{\equal{\colorpage}{white}}{}{
	\pagecolor{\colorpage}
}

% -----------------------------------------------------------------------------
% Configuración de las leyendas
% -----------------------------------------------------------------------------
% Márgenes de las leyendas por defecto
\setcaptionmargincm{\captionlrmargin}
\ifthenelse{\equal{\captiontextbold}{true}}{ % Texto en negrita en etiquetas
	\renewcommand{\captiontextbold}{bf}}{
	\renewcommand{\captiontextbold}{}
}
\ifthenelse{\equal{\captiontextsubnumbold}{true}}{ % Número en negritas
	\renewcommand{\captiontextsubnumbold}{bf}}{
	\renewcommand{\captiontextsubnumbold}{}
}

% Se configura el texto de los caption
\captionsetup{
	font={\captionfontsize},
	labelfont={color=\captioncolor, \captiontextbold},
	labelformat={\captionlabelformat},
	labelsep={\captionlabelsep},
	textfont={color=\captiontextcolor},
	singlelinecheck=on
}

% Configura texto de los subcaption
\captionsetup*[subfigure]{
	font={\subcaptionfsize},
	labelfont={color=\captioncolor, \captiontextsubnumbold},
	labelformat={\subcaptionlabelformat},
	labelsep={\subcaptionlabelsep},
	% listofformat={subparens},
	lofdepth=1,
	textfont={color=\captiontextcolor},
	singlelinecheck=on
}
\captionsetup*[subtable]{
	font={\subcaptionfsize},
	labelfont={color=\captioncolor, \captiontextsubnumbold},
	labelformat={\subcaptionlabelformat},
	labelsep={\subcaptionlabelsep},
	% listofformat={subparens},
	lofdepth=1,
	textfont={color=\captiontextcolor},
	singlelinecheck=on
}

\makeatletter
\renewcommand\p@subfigure{\thefigure\captionsubchar}
\renewcommand\p@subtable{\thetable\captionsubchar}
\makeatother

% Configuración de márgenes en las figuras
\floatsetup[figure]{
	captionskip=\captiontbmarginfigure pt
}

% Configuración de márgenes en las tablas
\floatsetup[table]{
	captionskip=\captiontbmargintable pt
}

% Caption superior en figuras
\ifthenelse{\equal{\figurecaptiontop}{true}}{
	\floatsetup[figure]{position=above}}{
}

% Caption superior en tablas
\ifthenelse{\equal{\tablecaptiontop}{true}}{
	\floatsetup[table]{position=top}
	}{
	\floatsetup[table]{position=bottom}
}

% Alineado de leyendas
\ifthenelse{\equal{\captionalignment}{justified}}{ % Leyenda justificada
	\captionsetup{
		format=plain,
		justification=justified
	}
}{
\ifthenelse{\equal{\captionalignment}{centered}}{ % Leyenda centrada
	\captionsetup{
		justification=centering
	}
}{
\ifthenelse{\equal{\captionalignment}{left}}{ % Leyenda alineada a la izquierda
	\captionsetup{
		justification=raggedright,
		singlelinecheck=false
	}
}{
\ifthenelse{\equal{\captionalignment}{right}}{ % Leyenda alineada a la derecha
	\captionsetup{
		justification=raggedleft,
		singlelinecheck=false
	}
}{
	\throwbadconfig{Posicion de leyendas desconocida}{\captionalignment}{justified,centered,left,right}}}}
}

% -----------------------------------------------------------------------------
% Configuración de referencias y citas
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\stylecitereferences}{natbib}}{
	\def\twocolumnreferencesmargin{-0.35cm}
	\bibliographystyle{\natbibrefstyle}
	\setlength{\bibsep}{\natbibrefsep pt}
	\newcommand{\shortcite}[1]{\citep{#1}}
	\newcommand{\fullcite}[1]{\citet{#1}}
	% Caracteres citas
	\setcitestyle{open={\natbibrefcitecharopen},close={\natbibrefcitecharclose}}
	% Separador citas
	\ifthenelse{\equal{\natbibrefcitesepcomma}{true}}{
		\setcitestyle{comma}
	}{
		\setcitestyle{semicolon}
	}
	% Tipo citas
	\ifthenelse{\equal{\natbibrefcitetype}{numbers}}{
		\setcitestyle{numbers}
	}{
	\ifthenelse{\equal{\natbibrefcitetype}{authoryear}}{
		\setcitestyle{authoryear}
	}{
	\ifthenelse{\equal{\natbibrefcitetype}{super}}{
		\setcitestyle{super}
	}{
		\throwbadconfig{Tipo cita natbib desconocido}{\natbibrefcitetype}{numbers,authoryear,super}}}
	}
}{
\ifthenelse{\equal{\stylecitereferences}{apacite}}{
	\def\twocolumnreferencesmargin{-0.39cm}
	\bibliographystyle{\apacitestyle}
	\setlength{\bibitemsep}{\apaciterefsep pt}
	\newcommand{\citep}[1]{\fullcite{#1}}
	\newcommand{\citet}[1]{\shortcite{#1}}
}{
\ifthenelse{\equal{\stylecitereferences}{bibtex}}{
	\def\twocolumnreferencesmargin{-0.35cm}
	\bibliographystyle{\bibtexstyle}
	\newlength{\bibitemsep}
	\setlength{\bibitemsep}{.2\baselineskip plus .05\baselineskip minus .05\baselineskip}
	\newlength{\bibparskip}\setlength{\bibparskip}{0pt}
	\ifthenelse{\equal{\bibtexindexbibliography}{true}}{
		\let\oldbibliography\bibliography
		\renewcommand{\bibliography}[1]{
			\clearpage
			\phantomsection
			\addcontentsline{toc}{chapter}{\namereferences} % bibtex tesis en chapter
			\oldbibliography{#1}}}{
	}
	\let\oldthebibliography\thebibliography
	\renewcommand\thebibliography[1]{
		\oldthebibliography{#1}
		\setlength{\parskip}{\bibitemsep}
		\setlength{\itemsep}{\bibparskip}
	}
	\setlength{\bibitemsep}{\bibtexrefsep pt}
}{
\ifthenelse{\equal{\stylecitereferences}{custom}}{
	\coretemplatemessage{Usando estilo citas referencias custom, importar librerias y configuraciones posterior al llamado de template.tex en archivo principal}
}{
	\throwbadconfig{Estilo citas desconocido}{\stylecitereferences}{bibtex,apacite,natbib,custom}}}}
}

% Crea referencias enumeradas en apacite
\makeatletter
\ifthenelse{\equal{\stylecitereferences}{apacite}}{
	\ifthenelse{\equal{\apaciterefnumber}{true}}{
		\newcounter{apaciteNumberCounter}
		\renewcommand{\theapaciteNumberCounter}{% Formato de número
			\apaciterefcitecharopen\arabic{apaciteNumberCounter}\apaciterefcitecharclose
		}
		\patchcmd{\@lbibitem}{\item[}{\item[\stepcounter{apaciteNumberCounter}{\hss\llap{\theapaciteNumberCounter}\quad}}{}{}
		\setlength{\bibleftmargin}{2.54em}
		\setlength{\bibindent}{-0.54em}
	}{}
}{}
\makeatother

% Desactiva la URL de apacite
\ifthenelse{\equal{\stylecitereferences}{apacite}}{
	\ifthenelse{\equal{\apaciteshowurl}{false}}{
		\renewenvironment{APACrefURL}[1][]{}{}
		\AtBeginEnvironment{APACrefURL}{\renewcommand{\url}[1]{}}
		\renewcommand{\doiprefix}{doi:~\kern-1pt}
	}{}
}{}

% Referencias en 2 columnas
\makeatletter
\ifthenelse{\equal{\twocolumnreferences}{true}}{
	\renewenvironment{thebibliography}[1]
	{\begin{multicols}{2}[\chapter*{\refname}]
		\@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}
		\list{\@biblabel{\@arabic\c@enumiv}}
		{\settowidth\labelwidth{\@biblabel{#1}}
			\leftmargin\labelwidth
			\advance\leftmargin\labelsep
			\@openbib@code
			\usecounter{enumiv}
			\let\p@enumiv\@empty
			\renewcommand\theenumiv{\@arabic\c@enumiv}}
		\sloppy
		\clubpenalty 4000
		\@clubpenalty \clubpenalty
		\widowpenalty 4000
		\sfcode`\.\@m}
		{\def\@noitemerr
		{\@latex@warning{Ambiente `thebibliography' no definido}}
		\endlist\end{multicols}}}{}
\makeatother

% -----------------------------------------------------------------------------
% Configuración anexo
% -----------------------------------------------------------------------------
\patchcmd{\appendices}{\quad}{\sectionappendixlastchar\quad}{}{}

% -----------------------------------------------------------------------------
% Se añade listings (código fuente) a tocloft
% -----------------------------------------------------------------------------
\begingroup
	\makeatletter
	\let\newcounter\@gobble\let\setcounter\@gobbletwo
	\globaldefs\@ne\let\c@loldepth\@ne
	\newlistof{listings}{lol}{\lstlistlistingname}
	\newlistentry{lstlisting}{lol}{0}
	\makeatother
\endgroup

% -----------------------------------------------------------------------------
% Crea índice de ecuaciones
% -----------------------------------------------------------------------------
\newcommand{\listindexequationsname}{\nomlteqn}
\newlistof{myindexequations}{equ}{\listindexequationsname}
\newcommand{\myindexequations}[1]{
	\addcontentsline{equ}{myindexequations}{\protect\numberline{\theequation}#1}
}
\setcounter{templateIndexEquations}{0}
\DeclareTotalCounter{templateIndexEquations}

% -----------------------------------------------------------------------------
% Reconfiguración de tamaño de páginas
% -----------------------------------------------------------------------------
\makeatletter
	\def\ifGm@preamble#1{\@firstofone}
	\appto\restoregeometry{
		\pdfpagewidth=\paperwidth
		\pdfpageheight=\paperheight}
	\apptocmd\newgeometry{
		\pdfpagewidth=\paperwidth
		\pdfpageheight=\paperheight}{}{}
\makeatother

% -----------------------------------------------------------------------------
% Configuración de hbox y vbox
% -----------------------------------------------------------------------------
\hfuzz=200pt
\vfuzz=200pt
\hbadness=\maxdimen
\vbadness=\maxdimen
% \sloppy Sloppy arruina portadas al exigir "justify", desde 6.4.2 se desactiva

% -----------------------------------------------------------------------------
% Configura las fuentes
% -----------------------------------------------------------------------------
\makeatletter
\def\Hv@scale {.95}
\makeatother

% -----------------------------------------------------------------------------
% Configuraciones de las tablas
% -----------------------------------------------------------------------------
\makeatletter % Reinicia el número de cada fila en todas las tablas
\preto\tabular{\global\rownum=\z@}
\preto\tabularx{\global\rownum=\z@}
\makeatother

% -----------------------------------------------------------------------------
% Se activa el modo estricto de revisión de números de página
% -----------------------------------------------------------------------------
\strictpagecheck

% -----------------------------------------------------------------------------
% Actualización margen títulos
% -----------------------------------------------------------------------------
\titlespacing{\section}{0pt}{20pt}{10pt}
\titlespacing{\subsection}{0pt}{15pt}{10pt}

% -----------------------------------------------------------------------------
% Se activa el word-wrap para textos con \texttt{}
% -----------------------------------------------------------------------------
\ttfamily \hyphenchar\the\font=`\-
\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks%
	\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%
	\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%
	\do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%
	\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%
	\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%
	\do\Y\do\Z%
}

% -----------------------------------------------------------------------------
% Se define el tipo de texto de los url
% -----------------------------------------------------------------------------
\urlstyle{\fonturl}

% -----------------------------------------------------------------------------
% Configuraciones del motor de compilación
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\compilertype}{pdf2latex}}{
	% Nivel de compresión
	\pdfcompresslevel=\pdfcompilecompression
	
	% El óptimo es 2, según
	% https://texdoc.org/serve/pdftex-a.pdf/0 p.20
	\pdfdecimaldigits=2
	
	% Inclusión de PDF
	\pdfinclusionerrorlevel=0
	
	% Versión
	\pdfminorversion=\pdfcompileversion
	
	% Compresión de objetos
	\pdfobjcompresslevel=\pdfcompileobjcompression
}{
\ifthenelse{\equal{\compilertype}{xelatex}}{
}{
\ifthenelse{\equal{\compilertype}{lualatex}}{
}{
	\throwbadconfig{Compilador desconocido}{\compilertype}{pdf2latex,xelatex,lualatex}}}
}

% -----------------------------------------------------------------------------
% Crea las sub-sub-sub-secciones
% -----------------------------------------------------------------------------
\newcounter{subsubsubsection}[subsubsection]
\ifthenelse{\equal{\showdotaftersnum}{true}}{ % Agrega punto tras el número
	\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}.}
	\renewcommand{\theparagraph}{\thesubsubsubsection.\arabic{paragraph}.}
}{
	\renewcommand{\thesubsubsubsection}{\thesubsubsection.\arabic{subsubsubsection}}
	\renewcommand{\theparagraph}{\thesubsubsubsection.\arabic{paragraph}}
}

% Límite máximo profundidad
\setcounter{secnumdepth}{4}

% Agrega compatibilidad de sub-sub-sub-secciones al TOC
\makeatletter
	\def\toclevel@subsubsubsection {4}
	\def\toclevel@paragraph {5}
	\def\toclevel@subparagraph {6}
	\renewcommand\paragraph{\@startsection{paragraph}{5}{\z@}
		{3.25ex \@plus 1ex \@minus .2ex}
		{-1em}
		{\normalfont\normalsize\bfseries}}
	\renewcommand\subparagraph{\@startsection{subparagraph}{6}{\parindent}
		{3.25ex \@plus 1ex \@minus .2ex}
		{-1em}
		{\normalfont\normalsize\bfseries}}
	\ifthenelse{\equal{\showdotaftersnum}{true}}{
		\def\l@subsubsubsection {\@dottedtocline{4}{7.83em}{4.15em}} % Incremento 0.77+3.35 a 3.35
		\def\l@paragraph {\@dottedtocline{5}{11.98em}{4.92em}}
		\def\l@subparagraph {\@dottedtocline{6}{14.65em}{5.69em}}
	}{
		\def\l@subsubsubsection {\@dottedtocline{4}{6.97em}{4em}}
		\def\l@paragraph {\@dottedtocline{5}{10.97em}{5em}}
		\def\l@subparagraph {\@dottedtocline{6}{14em}{6em}}
	}
\makeatother

% -----------------------------------------------------------------------------
% Profundidad del índice y bookmarks pdf
% -----------------------------------------------------------------------------
\setcounter{tocdepth}{\indexdepth}

% -----------------------------------------------------------------------------
% Restauración número footnote
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\footnoterestart}{none}}{
	\counterwithout*{footnote}{chapter}
}{
\ifthenelse{\equal{\footnoterestart}{sec}}{
	\counterwithin*{footnote}{section}
}{
\ifthenelse{\equal{\footnoterestart}{ssec}}{
	\counterwithin*{footnote}{subsection}
}{
\ifthenelse{\equal{\footnoterestart}{sssec}}{
	\counterwithin*{footnote}{subsubsection}
}{
\ifthenelse{\equal{\footnoterestart}{ssssec}}{
	\counterwithin*{footnote}{subsubsubsection}
}{
\ifthenelse{\equal{\footnoterestart}{page}}{
	\counterwithin*{footnote}{page}
}{
\ifthenelse{\equal{\footnoterestart}{chap}}{
	\counterwithin*{footnote}{chapter}
}{
	\throwbadconfig{Formato reinicio numero footnote desconocido}{\footnoterestart}{none,chap,page,sec,ssec,sssec,ssssec}}}}}}}
}

% -----------------------------------------------------------------------------
% Restauración número ecuación, NOTA: NO hace nada, sólo se modifica en title.tex
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\equationrestart}{none}}{
}{
\ifthenelse{\equal{\equationrestart}{chap}}{
}{
\ifthenelse{\equal{\equationrestart}{sec}}{
}{
\ifthenelse{\equal{\equationrestart}{ssec}}{
}{
\ifthenelse{\equal{\equationrestart}{sssec}}{
}{
\ifthenelse{\equal{\equationrestart}{ssssec}}{
}{
	\throwbadconfig{Formato reinicio numero ecuacion desconocido}{\equationrestart}{none,chap,sec,ssec,sssec,ssssec}}}}}}
}

% -----------------------------------------------------------------------------
% Configuración elementos matemáticos
% -----------------------------------------------------------------------------
\newtheoremstyle{miestilo}{\baselineskip}{3pt}{\itshape}{}{\bfseries}{}{.5em}{}
\newtheoremstyle{miobs}{\baselineskip}{3pt}{}{}{\bfseries}{}{.5em}{}
\theoremstyle{miestilo}

% Configura números
\ifthenelse{\equal{\showsectioncaptionmat}{none}}{
	\newtheorem{defn}{\namemathdefn}
	\newtheorem{teo}{\namemaththeorem}
	\newtheorem{cor}{\namemathcol}
	\newtheorem{lema}{\namemathlem}
	\newtheorem{prop}{\namemathprp}
}{
\ifthenelse{\equal{\showsectioncaptionmat}{chap}}{
	\newtheorem{defn}{\namemathdefn}[chapter]
	\newtheorem{teo}{\namemaththeorem}[chapter]
	\newtheorem{cor}{\namemathcol}[chapter]
	\newtheorem{lema}{\namemathlem}[chapter]
	\newtheorem{prop}{\namemathprp}[chapter]
}{
\ifthenelse{\equal{\showsectioncaptionmat}{sec}}{
	\newtheorem{defn}{\namemathdefn}[section]
	\newtheorem{teo}{\namemaththeorem}[section]
	\newtheorem{cor}{\namemathcol}[section]
	\newtheorem{lema}{\namemathlem}[section]
	\newtheorem{prop}{\namemathprp}[section]
}{
\ifthenelse{\equal{\showsectioncaptionmat}{ssec}}{
	\newtheorem{defn}{\namemathdefn}[subsection]
	\newtheorem{teo}{\namemaththeorem}[subsection]
	\newtheorem{cor}{\namemathcol}[subsection]
	\newtheorem{lema}{\namemathlem}[subsection]
	\newtheorem{prop}{\namemathprp}[subsection]
}{
\ifthenelse{\equal{\showsectioncaptionmat}{sssec}}{
	\newtheorem{defn}{\namemathdefn}[subsubsection]
	\newtheorem{teo}{\namemaththeorem}[subsubsection]
	\newtheorem{cor}{\namemathcol}[subsubsection]
	\newtheorem{lema}{\namemathlem}[subsubsection]
	\newtheorem{prop}{\namemathprp}[subsubsection]
}{
\ifthenelse{\equal{\showsectioncaptionmat}{ssssec}}{
	\newtheorem{defn}{\namemathdefn}[subsubsubsection]
	\newtheorem{teo}{\namemaththeorem}[subsubsubsection]
	\newtheorem{cor}{\namemathcol}[subsubsubsection]
	\newtheorem{lema}{\namemathlem}[subsubsubsection]
	\newtheorem{prop}{\namemathprp}[subsubsubsection]
}{
	\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptionmat}{none,chap,sec,ssec,sssec,ssssec}}}}}}
}
\theoremstyle{miobs}
\newtheorem*{ej}{\namemathej}
\newtheorem*{obs}{\namemathobs}

% -----------------------------------------------------------------------------
% Configuraciones del idioma
% -----------------------------------------------------------------------------
% Desactiva caracteres acentuados en operaciones matemáticas
\unaccentedoperators

% -----------------------------------------------------------------------------
% Configura número de objetos en el final del documento
% -----------------------------------------------------------------------------
\AtEndDocument{
	\addtocounter{equation}{\value{templateEquations}}
	\addtocounter{figure}{\value{templateFigures}}
	\addtocounter{lstlisting}{\value{templateListings}}
	\addtocounter{table}{\value{templateTables}}
}

% -----------------------------------------------------------------------------
% Formato de columnas
% -----------------------------------------------------------------------------
% Centrado
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{\CColor}[2]{>{\columncolor{#1}\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#2}}

\newcolumntype{P}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{\PColor}[2]{>{\columncolor{#1}\centering\let\newline\\\arraybackslash\hspace{0pt}}p{#2}}

\newcolumntype{B}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}b{#1}}
\newcolumntype{\BColor}[2]{>{\columncolor{#1}\centering\let\newline\\\arraybackslash\hspace{0pt}}b{#2}}

% Izquierda
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{\LColor}[2]{>{\columncolor{#1}\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#2}}
\newcolumntype{T}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{\TColor}[2]{>{\columncolor{#1}\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#2}}
\newcolumntype{F}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}b{#1}}
\newcolumntype{\FColor}[2]{>{\columncolor{#1}\raggedright\let\newline\\\arraybackslash\hspace{0pt}}b{#2}}

% Derecha
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{\RColor}[2]{>{\columncolor{#1}\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#2}}
\newcolumntype{H}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{\HColor}[2]{>{\columncolor{#1}\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}p{#2}}
\newcolumntype{G}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}b{#1}}
\newcolumntype{\GColor}[2]{>{\columncolor{#1}\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}b{#2}}

% -----------------------------------------------------------------------------
% Parcha el entorno multicols
% -----------------------------------------------------------------------------
\let\SOURCEcaptionlrmargin\captionlrmargin
\BeforeBeginEnvironment{multicols}{%
	\def\captionlrmargin {\captionlrmarginmc}%
	\global\def\GLOBALenvmulticol {true}%
	\setcaptionmargincm{\captionlrmargin}%
}
\AfterEndEnvironment{multicols}{%
	\def\captionlrmargin {\SOURCEcaptionlrmargin}%
	\global\def\GLOBALenvmulticol {false}%
	\setcaptionmargincm{\captionlrmargin}%
}

% -----------------------------------------------------------------------------
% Configura estilos de listas
% -----------------------------------------------------------------------------
% Enumerate
\renewcommand{\labelenumi}{\senumerti}
\renewcommand{\labelenumii}{\senumertii}
\renewcommand{\labelenumiii}{\senumertiii}
\renewcommand{\labelenumiv}{\senumertiv}

% Itemize
\renewcommand{\labelitemi}{\sitemizei}
\renewcommand{\labelitemii}{\sitemizeii}
\renewcommand{\labelitemiii}{\sitemizeiii}
\renewcommand{\labelitemiv}{\sitemizeiv}

% -----------------------------------------------------------------------------
% Estilos de capítulos
% -----------------------------------------------------------------------------
\ifthenelse{\equal{\chapterstyle}{style1}}{
	% Default
}{
\ifthenelse{\equal{\chapterstyle}{style2}}{
	\definecolor{gray75}{gray}{0.75}
	\newcommand{\hsp}{\hspace{20pt}}
	\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}
}{
\ifthenelse{\equal{\chapterstyle}{style3}}{
	\usepackage[Sonny]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style4}}{
	\usepackage[Lenny]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style5}}{
	\usepackage[Glenn]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style6}}{
	\usepackage[Conny]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style7}}{
	\usepackage[Rejne]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style8}}{
	\usepackage[Bjarne]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style9}}{
	\usepackage[Bjornstrup]{fncychap}
}{
\ifthenelse{\equal{\chapterstyle}{style10}}{
	\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter.\hspace{20pt}}{0pt}{\Huge\bfseries}
}{
\ifthenelse{\equal{\chapterstyle}{style11}}{
	\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hspace{20pt}}{0pt}{\Huge\bfseries}
}{
\ifthenelse{\equal{\chapterstyle}{style12}}{
	\titleformat{\chapter}[hang]{\Huge\bfseries}{}{0pt}{\Huge\bfseries}
}{
	\throwbadconfigondoc{Estilo de capitulo incorrecto}{\chapterstyle}{style1 .. style12}}}}}}}}}}}}
}

% -----------------------------------------------------------------------------
% PORTADA
% -----------------------------------------------------------------------------
\newcommand{\templatePortrait}{
	
	% Configura la página
	\clearpage
	\def\arraystretch {\tablepaddingv} % Ajusta espaciamiento de las tablas
	\renewcommand{\thepage}{\nameportraitpage}
	\setpagemargincm{\pagemarginleftportrait}{\pagemargintop}{\pagemarginright}{\pagemarginbottom}

	\pagestyle{fancy}
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\renewcommand{\footrulewidth}{0pt}

	% Logo de la universidad
	\hspace*{-0.5cm} % Necesario para centrar el logo con el título
	\coreinsertkeyimage{\imagendepartamentoparams}{\imagendepartamento}
	\hspace*{0.05cm}
	\begin{minipage}{0.8\linewidth}
		\MakeUppercase \nombreuniversidad ~ \\
		\MakeUppercase \nombrefacultad ~ \\
		\MakeUppercase \departamentouniversidad
		\vspace*{1.6cm}\mbox{}
	\end{minipage}

	% Importada la portada
	\portada
	
	% Ajusta la fuente
	\normalfont
	
}

% -----------------------------------------------------------------------------
% CONFIGURACIÓN DE PÁGINA Y ENCABEZADOS
% -----------------------------------------------------------------------------
\newcommand{\templatePagecfg}{
	
	% -------------------------------------------------------------------------
	% Numeración de páginas
	% -------------------------------------------------------------------------
	\clearpage
	\ifthenelse{\equal{\predocpageromannumber}{true}}{ % Si se usan números romanos en el pre-documento
		\ifthenelse{\equal{\predocpageromanupper}{true}}{
			\pagenumbering{Roman}
		}{
			\pagenumbering{roman}
		}}{
		\pagenumbering{arabic}
	}
	\setcounter{page}{1}
	\setcounter{footnote}{0}
	
	% -------------------------------------------------------------------------
	% Márgenes de páginas y tablas
	% -------------------------------------------------------------------------
	\setpagemargincm{\pagemarginleft}{\pagemargintop}{\pagemarginright}{\pagemarginbottom}
	\resettablecellpadding
	
	% -------------------------------------------------------------------------
	% Se define el punto decimal
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\pointdecimal}{true}}{
		\decimalpoint}{
	}
	
	% -------------------------------------------------------------------------
	% Definición de nombres de objetos
	% -------------------------------------------------------------------------
	\renewcommand{\appendixname}{\nomltappendixsection} % Nombre del anexo (título)
	\renewcommand{\appendixpagename}{\nameappendixsection} % Nombre del anexo en índice
	\renewcommand{\appendixtocname}{\nameappendixsection} % Nombre del anexo en índice
	\renewcommand{\chaptername}{\nomchapter}  % Nombre de los capítulos
	\renewcommand{\contentsname}{\nomltcont} % Nombre del índice
	\renewcommand{\figurename}{\nomltwfigure} % Nombre de la leyenda de las fig.
	\renewcommand{\listfigurename}{\nomltfigure} % Nombre del índice de figuras
	\renewcommand{\listtablename}{\nomlttable} % Nombre del índice de tablas
	\renewcommand{\lstlistingname}{\nomltwsrc} % Nombre leyenda del código fuente
	\renewcommand{\lstlistlistingname}{\nomltsrc} % Nombre índice código fuente
	\renewcommand{\refname}{\namereferences} % Nombre de las referencias (bibtex)
	\renewcommand{\bibname}{\namereferences} % Nombre de las referencias (natbib)
	\renewcommand{\tablename}{\nomltwtable} % Nombre de la leyenda de tablas
	
	% -------------------------------------------------------------------------
	% Estilo de títulos
	% -------------------------------------------------------------------------
	\sectionfont{\color{\titlecolor} \fontsizetitle \styletitle \selectfont}
	\chaptertitlefont{\color{\chaptercolor} \fontsizechapter \stylechapter \selectfont}
	\subsectionfont{\color{\subtitlecolor} \fontsizesubtitle \stylesubtitle \selectfont}
	\subsubsectionfont{\color{\subsubtitlecolor} \fontsizesubsubtitle \stylesubsubtitle \selectfont}
	\titleformat{\subsubsubsection}{\color{\ssstitlecolor} \normalfont \fontsizessstitle \stylessstitle}{\thesubsubsubsection}{1em}{}
	\titlespacing*{\subsubsubsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
	\def\bibfont {\fontsizerefbibl} % Tamaño de fuente de las referencias
	
	% -------------------------------------------------------------------------
	% Estilo citas
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\stylecitereferences}{apacite}}{
		\renewcommand{\BOthers}[1]{\apacitebothers\hbox{}}
	}{}
	
	% -------------------------------------------------------------------------
	% Se crean los header-footer
	% -------------------------------------------------------------------------
	\fancyheadoffset{0pt} % Desactiva el offset de los header-footer
	\def\hfheaderimageparamsA {height=\baselineskip} % Tamaño de las imágenes del encabezado estilo 3/13
	\ifthenelse{\equal{\hfstyle}{style1}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style1-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[LE,RO]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[RE,LO]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style1-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[LO,RE]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[RO,LE]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style2}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style2-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[LE,RO]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[RE,LO]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style1-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[LO,RE]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[RO,LE]{\small \thepage}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style3}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushleft}
					\end{minipage}
				}
			}{
				\fancyhead[L]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\fancyhead[R]{%
				\coreinsertkeyimage{\hfheaderimageparamsA}{\imagendepartamento}%
				\vspace{-0.15cm}%
			}
			\fancyfoot[C]{\thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style4}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[C]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style5}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushleft}
							\codigodelcurso \nombredelcurso
						\end{flushleft}
					\end{minipage}
				}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushright}
								\nouppercase{\rightmark}
							\end{flushright}
						\end{minipage}
					}
				}{}
			}{
				\fancyhead[L]{\codigodelcurso \nombredelcurso}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{\nouppercase{\rightmark}}
				}{}
			}
			\fancyfoot[L]{\departamentouniversidad, \nombreuniversidad}
			\fancyfoot[R]{\small \thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style5-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushleft}
							\codigodelcurso \nombredelcurso
						\end{flushleft}
					\end{minipage}
				}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushright}
								\nouppercase{\rightmark}
							\end{flushright}
						\end{minipage}
					}
				}{}
			}{
				\fancyhead[L]{\codigodelcurso \nombredelcurso}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{\nouppercase{\rightmark}}
				}{}
			}
			\fancyfoot[LO,RE]{\departamentouniversidad, \nombreuniversidad}
			\fancyfoot[RO,LE]{\small \thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style5-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushleft}
							\codigodelcurso \nombredelcurso
						\end{flushleft}
					\end{minipage}
				}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushright}
								\nouppercase{\rightmark}
							\end{flushright}
						\end{minipage}
					}
				}{}
			}{
				\fancyhead[L]{\codigodelcurso \nombredelcurso}
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[R]{\nouppercase{\rightmark}}
				}{}
			}
			\fancyfoot[LE,RO]{\departamentouniversidad, \nombreuniversidad}
			\fancyfoot[RE,LO]{\small \thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style6}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[L]{\departamentouniversidad}
			\fancyfoot[C]{\thepage}
			\fancyfoot[R]{\nombreuniversidad}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style7}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[C]{\thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style8}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[R]{\thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style8-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[RO,LE]{\thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style8-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[RE,LO]{\thepage}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style9}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[L]{\small \textit{\tituloinformehf}}
			\fancyfoot[R]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style9-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[RE,LO]{\small \textit{\tituloinformehf}}
			\fancyfoot[RO,LE]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style9-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[RO,LE]{\small \textit{\tituloinformehf}}
			\fancyfoot[RE,LO]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style10}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushleft}
								\nouppercase{\rightmark}
							\end{flushleft}
						\end{minipage}
					}
				}{}
				\fancyhead[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\tituloinformehf}
						\end{flushright}
					\end{minipage}
				}
			}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{\nouppercase{\rightmark}}
				}{}
				\fancyhead[R]{\small \textit{\tituloinformehf}}
			}
			\fancyfoot[L]{}
			\fancyfoot[R]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style10-i}}{ % Impar izquierdo
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushleft}
								\nouppercase{\rightmark}
							\end{flushleft}
						\end{minipage}
					}
				}{}
				\fancyhead[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\tituloinformehf}
						\end{flushright}
					\end{minipage}
				}
			}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{\nouppercase{\rightmark}}
				}{}
				\fancyhead[R]{\small \textit{\tituloinformehf}}
			}
			\fancyfoot[L]{}
			\fancyfoot[RE,LO]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style10-d}}{ % Impar derecho
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushleft}
								\nouppercase{\rightmark}
							\end{flushleft}
						\end{minipage}
					}
				}{}
				\fancyhead[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\tituloinformehf}
						\end{flushright}
					\end{minipage}
				}
			}{
				\ifthenelse{\equal{\disablehfrightmark}{false}}{
					\fancyhead[L]{\nouppercase{\rightmark}}
				}{}
				\fancyhead[R]{\small \textit{\tituloinformehf}}
			}
			\fancyfoot[L]{}
			\fancyfoot[LE,RO]{\small \thepage}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style11}}{ % Similar a 1
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{\small \thepage \nomnpageof \pageref{LastPage}}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyfoot[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\tituloinformehf}
						\end{flushleft}
					\end{minipage}
				}
				\fancyfoot[R]{
					\begin{minipage}[t]{\hfwidthcourse\linewidth}
						\begin{flushright}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyfoot[L]{\small \textit{\tituloinformehf}}
				\fancyfoot[R]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style12}}{ % Similar a 6
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\fancyfoot[L]{\departamentouniversidad}
			\fancyfoot[C]{\thepage \nomnpageof \pageref{LastPage}}
			\fancyfoot[R]{\nombreuniversidad}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\setlength{\headheight}{49pt}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style13}}{ % Similar a 3
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\small \textit{\codigodelcurso \nombredelcurso}
						\end{flushleft}
					\end{minipage}
				}
			}{
				\fancyhead[L]{\small \textit{\codigodelcurso \nombredelcurso}}
			}
			\fancyhead[R]{%
				\coreinsertkeyimage{\hfheaderimageparamsA}{\imagendepartamento}%
				\vspace{-0.15cm}%
			}
			\fancyfoot[C]{\thepage \nomnpageof \pageref{LastPage}}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style14}}{ % Similar a 4
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[C]{\small \thepage \nomnpageof \pageref{LastPage}}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style15}}{ % Similar a 1
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\ifthenelse{\equal{\disablehfrightmark}{false}}{
				\fancyhead[L]{\nouppercase{\rightmark}}
			}{}
			\fancyhead[R]{}
			\fancyfoot[L]{
				\small \codigodelcurso \nombredelcurso
			}
			\fancyfoot[R]{
				\small \thepage
			}
			\renewcommand{\headrulewidth}{0.5pt}
			\renewcommand{\footrulewidth}{0.5pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
	\ifthenelse{\equal{\hfstyle}{style16}}{
		\pagestyle{fancy}
		\newcommand{\COREstyledefinition}{
			\fancyhf{}
			\renewcommand{\headrulewidth}{0pt}
			\renewcommand{\footrulewidth}{0pt}
		}
		\renewcommand{\sectionmark}[1]{\markboth{##1}{}}
		\COREstyledefinition
	}{
		\throwbadconfigondoc{Estilo de header-footer incorrecto}{\hfstyle}{style1 .. style16}}}}}}}}}}}}}}}}}}}}}}}}}}}}
	}
	\fancypagestyle{plain}{
		\fancyheadoffset{0pt}
		\COREstyledefinition
	}
	
	% -------------------------------------------------------------------------
	% Muestra los números de línea
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\linenumbers}{
	}
	% Añade página en blanco
	\ifthenelse{\equal{\addemptypagespredoc}{true}}{
		\insertblankpage}{
	}

	% -------------------------------------------------------------------------
	% Configura el nombre del abstract
	% -------------------------------------------------------------------------
	\ifthenelse{\isundefined{\abstractname}}{
		\newcommand{\abstractname}{\nameabstract}
		\throwwarning{La variable \noexpand\abstractname no existe, lo que indica que la libreria babel no se ha cargado. Si ha desactivado la configuracion \noexpand\usespanishbabel debe cargar manualmente la libreria babel con algun otro idioma, como por ejemplo \noexpand\usepackage[english]{babel}, o bien define en true la configuracion \noexpand\useenglishbabel}
	}{
		\renewcommand{\abstractname}{\nameabstract}
	}
	
}

% -----------------------------------------------------------------------------
% TABLA DE CONTENIDOS - ÍNDICE
% -----------------------------------------------------------------------------
\newcommand{\templateIndex}{

	% -------------------------------------------------------------------------
	% Inicio índice, desactiva espacio entre objetos
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\objectchaptermargin}{false}}{
		\let\origaddvspace\addvspace
		\renewcommand{\addvspace}[1]{}
	}{}
	
	% -------------------------------------------------------------------------
	% Crea nueva página y establece estilo de títulos
	% -------------------------------------------------------------------------
	\clearpage
	\begingroup
	\sectionfont{\color{\indextitlecolor} \fontsizetitlei \styletitlei \selectfont}
	
	% -------------------------------------------------------------------------
	% Salta de página si está imprimiendo por ambas caras
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\addemptypagetwosides}{true}}{
		\checkoddpage
		\ifoddpage
		\else
			\clearpage
			\null
			\thispagestyle{empty}
			\clearpage
			\addtocounter{page}{-1}
		\fi}{
	}
	
	% -------------------------------------------------------------------------
	% Añade la entrada del índice a los marcadores del pdf
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\addindextobookmarks}{true}}{
		\phantomsection
		\pdfbookmark{\nomltcont}{contents}}{
	}
	\tocloftpagestyle{fancy}
	
	% -------------------------------------------------------------------------
	% Configuración del punto en índice
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\showdotaftersnum}{true}}{
		\def\cftchapaftersnum {.}
		\def\cftsecaftersnum {.}
		\def\cftsubsecaftersnum {.}
		\def\cftsubsubsecaftersnum {.}
		\def\cftsubsubsubsecaftersnum {.}
		}{
	}{}
	
	% -------------------------------------------------------------------------
	% Configuración carácter número de página
	% -------------------------------------------------------------------------
	\renewcommand{\cftdot}{\charnumpageindex}
	
	% -------------------------------------------------------------------------
	% Configuración del punto en número de objetos
	% -------------------------------------------------------------------------
	\def\cftfigaftersnum {\charafterobjectindex\enspace} % Figuras
	\def\cftsubfigaftersnum {\charafterobjectindex\enspace} % Subfiguras
	\def\cfttabaftersnum {\charafterobjectindex\enspace} % Tablas
	\def\cftlstlistingaftersnum {\charafterobjectindex\enspace} % Códigos fuente
	\def\cftmyindexequationsaftersnum {\charafterobjectindex\enspace} % Ecuaciones
	
	% -------------------------------------------------------------------------
	% Desactiva los números de línea
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\nolinenumbers}{
	}
	
	% -------------------------------------------------------------------------
	% Cambia tabulación índice de objetos para alinear con contenidos
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\objectindexindent}{true}}{
		\setlength{\cfttabindent}{1.5em}
		\setlength{\cftfigindent}{1.5em}
		\setlength{\cftsubfigindent}{1.5em}
		\def\cftlstlistingindent {1.5em}
	}{
		\setlength{\cfttabindent}{0em}
		\setlength{\cftfigindent}{0em}
		\setlength{\cftsubfigindent}{0em}
		\def\cftlstlistingindent {0em}
	}
	
	% -------------------------------------------------------------------------
	% Calcula tamaño del margen de los números en objetos del índice
	% -------------------------------------------------------------------------
	% Código fuente
	\ifthenelse{\equal{\showsectioncaptioncode}{none}}{
		\def\cftdefautnumwidthcode {3.0em} % Añade +0.7em
		\def\cftdefaultnumwidthromancode {5.25em} % Añade +0.5em para no overflow
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sec}}{
		\def\cftdefautnumwidthcode {3.7em}
		\def\cftdefaultnumwidthromancode {5.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssec}}{
		\def\cftdefautnumwidthcode {4.4em}
		\def\cftdefaultnumwidthromancode {6.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sssec}}{
		\def\cftdefautnumwidthcode {5.1em}
		\def\cftdefaultnumwidthromancode {6.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssssec}}{
		\def\cftdefautnumwidthcode {5.8em}
		\def\cftdefaultnumwidthromancode {7.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{chap}}{
		\def\cftdefautnumwidthcode {3.0em}
		\def\cftdefaultnumwidthromancode {5.25em}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptioncode}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Código fuente
	\ifthenelse{\equal{\showsectioncaptioneqn}{none}}{
		\def\cftdefautnumwidtheqn {3.0em} % Añade +0.7em
		\def\cftdefaultnumwidthromaneqn {5.25em} % Añade +0.5em para no overflow
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{sec}}{
		\def\cftdefautnumwidtheqn {3.7em}
		\def\cftdefaultnumwidthromaneqn {5.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssec}}{
		\def\cftdefautnumwidtheqn {4.4em}
		\def\cftdefaultnumwidthromaneqn {6.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{sssec}}{
		\def\cftdefautnumwidtheqn {5.1em}
		\def\cftdefaultnumwidthromaneqn {6.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssssec}}{
		\def\cftdefautnumwidtheqn {5.8em}
		\def\cftdefaultnumwidthromaneqn {7.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{chap}}{
		\def\cftdefautnumwidtheqn {3.0em}
		\def\cftdefaultnumwidthromaneqn {5.25em}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptioneqn}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Figuras
	\ifthenelse{\equal{\showsectioncaptionfig}{none}}{
		\def\cftdefautnumwidthfig {3.0em} % Añade +0.7em
		\def\cftdefaultnumwidthromanfig {5.25em} % Añade +0.5em
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{sec}}{
		\def\cftdefautnumwidthfig {3.7em}
		\def\cftdefaultnumwidthromanfig {5.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{ssec}}{
		\def\cftdefautnumwidthfig {4.4em}
		\def\cftdefaultnumwidthromanfig {6.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{sssec}}{
		\def\cftdefautnumwidthfig {5.1em}
		\def\cftdefaultnumwidthromanfig {6.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{ssssec}}{
		\def\cftdefautnumwidthfig {5.8em}
		\def\cftdefaultnumwidthromanfig {7.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{chap}}{
		\def\cftdefautnumwidthfig {3.0em}
		\def\cftdefaultnumwidthromanfig {5.25em}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptionfig}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Tablas
	\ifthenelse{\equal{\showsectioncaptiontab}{none}}{
		\def\cftdefautnumwidthtab {3.0em} % Añade +0.7em
		\def\cftdefaultnumwidthromantab {5.25em} % Añade +0.5em
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{sec}}{
		\def\cftdefautnumwidthtab {3.7em}
		\def\cftdefaultnumwidthromantab {5.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{ssec}}{
		\def\cftdefautnumwidthtab {4.4em}
		\def\cftdefaultnumwidthromantab {6.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{sssec}}{
		\def\cftdefautnumwidthtab {5.1em}
		\def\cftdefaultnumwidthromantab {6.75em}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{ssssec}}{
		\def\cftdefautnumwidthtab {5.8em}
		\def\cftdefaultnumwidthromantab {7.25em}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{chap}}{
		\def\cftdefautnumwidthtab {3.0em}
		\def\cftdefaultnumwidthromantab {5.25em}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptiontab}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Configuración identado de títulos de objetos después del número
	\def\cftfignumwidth {\cftdefautnumwidth}
	% \def\cftsubfignumwidth {\cftdefautnumwidth}
	\def\cfttabnumwidth {\cftdefautnumwidth}
	\def\cftlstlistingnumwidth {\cftdefautnumwidth}
	
	% Código fuente
	\ifthenelse{\equal{\captionnumcode}{arabic}}{ % No hace nada (default)
		\def\cftlstlistingnumwidth {\cftdefautnumwidthcode}
	}{
		\ifthenelse{\equal{\captionnumcode}{roman}}{
			\def\cftlstlistingnumwidth {\cftdefaultnumwidthromancode}
		}{
		\ifthenelse{\equal{\captionnumcode}{Roman}}{
			\def\cftlstlistingnumwidth {\cftdefaultnumwidthromancode}
		}{
			\def\cftlstlistingnumwidth {\cftdefautnumwidthcode}
		}}
	}
	
	% Ecuaciones
	\ifthenelse{\equal{\captionnumequation}{arabic}}{ % No hace nada (default)
		\def\cftmyindexequationsnumwidth {\cftdefautnumwidtheqn}
	}{
		\ifthenelse{\equal{\captionnumequation}{roman}}{
			\def\cftmyindexequationsnumwidth {\cftdefaultnumwidthromaneqn}
		}{
		\ifthenelse{\equal{\captionnumequation}{Roman}}{
			\def\cftmyindexequationsnumwidth {\cftdefaultnumwidthromaneqn}
		}{
			\def\cftmyindexequationsnumwidth {\cftdefautnumwidtheqn}
		}}
	}
	
	% Figuras
	\ifthenelse{\equal{\captionnumfigure}{arabic}}{ % No hace nada (default)
		\def\cftfignumwidth {\cftdefautnumwidthfig}
	}{
		\ifthenelse{\equal{\captionnumfigure}{roman}}{
			\def\cftfignumwidth {\cftdefaultnumwidthromanfig}
		}{
			\ifthenelse{\equal{\captionnumfigure}{Roman}}{
				\def\cftfignumwidth {\cftdefaultnumwidthromanfig}
			}{
				\def\cftfignumwidth {\cftdefautnumwidthfig}
			}}
	}
	
	% Tablas
	\ifthenelse{\equal{\captionnumtable}{arabic}}{ % No hace nada (default)
		\def\cfttabnumwidth {\cftdefautnumwidthtab}
	}{
		\ifthenelse{\equal{\captionnumtable}{roman}}{
			\def\cfttabnumwidth {\cftdefaultnumwidthromantab}
		}{
			\ifthenelse{\equal{\captionnumtable}{Roman}}{
				\def\cfttabnumwidth {\cftdefaultnumwidthromantab}
			}{
				\def\cfttabnumwidth {\cftdefautnumwidthtab}
			}}
	}
	
	% -------------------------------------------------------------------------
	% Genera las funciones para los índices
	% -------------------------------------------------------------------------
	\newcommand{\LoIf}{ % Lista de figuras
		\iftotalfigures
			\ifthenelse{\equal{\indexnewpagef}{true}}{\clearpage}{}
			\ifthenelse{\equal{\addindextobookmarks}{true}}{
				\ifthenelse{\equal{\addindexsubtobookmarks}{true}}{
					\phantomsection
					\belowpdfbookmark{\nomltfigure}{clof}}{}}{
			}
			\listoffigures
		\fi
	}
	\newcommand{\LoIt}{ % Tablas
		\iftotaltables
			\ifthenelse{\equal{\indexnewpaget}{true}}{\clearpage}{}
			\ifthenelse{\equal{\addindextobookmarks}{true}}{
				\ifthenelse{\equal{\addindexsubtobookmarks}{true}}{
					\phantomsection
					\belowpdfbookmark{\nomlttable}{clot}}{}}{
			}
			\listoftables
		\fi
	}
	\newcommand{\LoIc}{ % Códigos fuente (listings)
		\iftotallstlistings
			\ifthenelse{\equal{\indexnewpagec}{true}}{\clearpage}{}
			\ifthenelse{\equal{\addindextobookmarks}{true}}{
				\ifthenelse{\equal{\addindexsubtobookmarks}{true}}{
					\phantomsection
					\belowpdfbookmark{\nomltsrc}{clsrc}}{}}{
			}
			\lstlistoflistings
		\fi
	}
	\newcommand{\LoIe}{ % Ecuaciones
		\iftotaltemplateIndexEquationss
			\ifthenelse{\equal{\indexnewpagee}{true}}{\clearpage}{}
			\ifthenelse{\equal{\addindextobookmarks}{true}}{
				\ifthenelse{\equal{\addindexsubtobookmarks}{true}}{
					\phantomsection
					\belowpdfbookmark{\nomlteqn}{cleqn}}{}}{
			}
			\listofmyindexequations
		\fi
	}
	
	% -------------------------------------------------------------------------
	% Índice de contenidos
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\showindexofcontents}{true}}{
		\tableofcontents
	}{}
	
	% -------------------------------------------------------------------------
	% Índice de objetos
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\indexstyle}{ftc}}{%
		\LoIf\LoIt\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{}}{%
	}{%
	\ifthenelse{\equal{\indexstyle}{e}}{%
		\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{c}}{%
		\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{f}}{%
		\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{t}}{%
		\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{ec}}{%
		\LoIe\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ce}}{%
		\LoIc\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{ef}}{%
		\LoIe\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{fe}}{%
		\LoIf\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{et}}{%
		\LoIe\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{te}}{%
		\LoIt\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{cf}}{%
		\LoIc\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{fc}}{%
		\LoIf\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ct}}{%
		\LoIc\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{tc}}{%
		\LoIt\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ft}}{%
		\LoIf\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{tf}}{%
		\LoIt\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{ecf}}{%
		\LoIe\LoIc\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{efc}}{%
		\LoIe\LoIf\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{cef}}{%
		\LoIc\LoIe\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{cfe}}{%
		\LoIc\LoIf\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{fec}}{%
		\LoIf\LoIe\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{fce}}{%
		\LoIf\LoIc\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{ect}}{%
		\LoIe\LoIc\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{etc}}{%
		\LoIe\LoIt\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{cet}}{%
		\LoIc\LoIe\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{cte}}{%
		\LoIc\LoIt\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{tec}}{%
		\LoIt\LoIe\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{tce}}{%
		\LoIt\LoIc\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{eft}}{%
		\LoIe\LoIf\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{etf}}{%
		\LoIe\LoIt\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{fet}}{%
		\LoIf\LoIe\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{fte}}{%
		\LoIf\LoIt\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{tef}}{%
		\LoIt\LoIe\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{tfe}}{%
		\LoIt\LoIf\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{cft}}{%
		\LoIc\LoIf\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{ctf}}{%
		\LoIc\LoIt\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{fct}}{%
		\LoIf\LoIc\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{tcf}}{%
		\LoIt\LoIc\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{tfc}}{%
		\LoIt\LoIf\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ecft}}{%
		\LoIe\LoIc\LoIf\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{ectf}}{%
		\LoIe\LoIc\LoIt\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{efct}}{%
		\LoIe\LoIf\LoIc\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{eftc}}{%
		\LoIe\LoIf\LoIt\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{etcf}}{%
		\LoIe\LoIt\LoIc\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{etfc}}{%
		\LoIe\LoIt\LoIf\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ceft}}{%
		\LoIc\LoIe\LoIf\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{cetf}}{%
		\LoIc\LoIe\LoIt\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{cfet}}{%
		\LoIc\LoIf\LoIe\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{cfte}}{%
		\LoIc\LoIf\LoIt\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{ctef}}{%
		\LoIc\LoIt\LoIe\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{ctfe}}{%
		\LoIc\LoIt\LoIf\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{fect}}{%
		\LoIf\LoIe\LoIc\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{fetc}}{%
		\LoIf\LoIe\LoIt\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{fcet}}{%
		\LoIf\LoIc\LoIe\LoIt
	}{
	\ifthenelse{\equal{\indexstyle}{fcte}}{%
		\LoIf\LoIc\LoIt\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{ftec}}{%
		\LoIf\LoIt\LoIe\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{ftce}}{%
		\LoIf\LoIt\LoIc\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{tecf}}{%
		\LoIt\LoIe\LoIc\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{tefc}}{%
		\LoIt\LoIe\LoIf\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{tcef}}{%
		\LoIt\LoIc\LoIe\LoIf
	}{
	\ifthenelse{\equal{\indexstyle}{tcfe}}{%
		\LoIt\LoIc\LoIf\LoIe
	}{
	\ifthenelse{\equal{\indexstyle}{tfec}}{%
		\LoIt\LoIf\LoIe\LoIc
	}{
	\ifthenelse{\equal{\indexstyle}{tfce}}{%
		\LoIt\LoIf\LoIc\LoIe
	}{
		\throwbadconfig{Estilo desconocido del indice}{\indexstyle}{ftc,,e,c,f,t,ec,ce,ef,fe,et,te,cf,fc,ct,tc,ft,tf,ecf,efc,cef,cfe,fec,fce,ect,etc,cet,cte,tec,tce,eft,etf,fet,fte,tef,tfe,cft,ctf,fct,tcf,tfc,ecft,ectf,efct,eftc,etcf,etfc,ceft,cetf,cfet,cfte,ctef,ctfe,fect,fetc,fcet,fcte,ftec,ftce,tecf,tefc,tcef,tcfe,tfec,tfce}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}
	}
	
	% -------------------------------------------------------------------------
	% Termina el bloque de índice
	% -------------------------------------------------------------------------
	\endgroup

	% -------------------------------------------------------------------------
	% Final del índice, restablece el espacio
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\objectchaptermargin}{false}}{
		\renewcommand{\addvspace}[1]{\origaddvspace{##1}}
	}{}

	% -------------------------------------------------------------------------
	% Se añade una página en blanco
	% -------------------------------------------------------------------------
	\clearpage
	\ifthenelse{\equal{\addemptypagetwosides}{true}}{
		\vfill
		\checkoddpage
		\ifoddpage
			\clearpage
			\null
			\thispagestyle{empty}
			\clearpage
			\addtocounter{page}{-1}
		\else
		\fi}{
	}
	
}

% -----------------------------------------------------------------------------
% CONFIGURACIONES FINALES
% -----------------------------------------------------------------------------
\newcommand{\templateFinalcfg}{
	
	% -------------------------------------------------------------------------
	% Se restablecen headers y footers
	% -------------------------------------------------------------------------
	\markboth{}{}
	\clearpage
	% Actualiza headers
	\ifthenelse{\equal{\disablehfrightmark}{false}}{
		% Define funciones generales
		\def\COREhfstyledefA { % 1, 2, 4, 9, 11, 14, 15
			\fancypagestyle{plain}{\fancyhead[L]{\nouppercase{\leftmark}}}
			\fancyhead[L]{\nouppercase{\leftmark}}
		}
		\def\COREhfstyledefB { % 5
			\fancypagestyle{plain}{
				\ifthenelse{\equal{\hfwidthwrap}{true}}{
					\fancyhead[R]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushright}
								\nouppercase{\leftmark}
							\end{flushright}
						\end{minipage}
					}
				}{
					\fancyhead[R]{\nouppercase{\leftmark}}
				}
			}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[R]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushright}
							\nouppercase{\leftmark}
						\end{flushright}
					\end{minipage}
				}
			}{
				\fancyhead[R]{\nouppercase{\leftmark}}
			}
		}
		\def\COREhfstyledefC { % 10
			\fancypagestyle{plain}{
				\ifthenelse{\equal{\hfwidthwrap}{true}}{
					\fancyhead[L]{
						\begin{minipage}[t]{\hfwidthtitle\linewidth}
							\begin{flushleft}
								\nouppercase{\leftmark}
							\end{flushleft}
						\end{minipage}
					}
				}{
					\fancyhead[L]{\nouppercase{\leftmark}}
				}
			}
			\ifthenelse{\equal{\hfwidthwrap}{true}}{
				\fancyhead[L]{
					\begin{minipage}[t]{\hfwidthtitle\linewidth}
						\begin{flushleft}
							\nouppercase{\leftmark}
						\end{flushleft}
					\end{minipage}
				}
			}{
				\fancyhead[L]{\nouppercase{\leftmark}}
			}
		}
		% Actualiza los header-footer
		\ifthenelse{\equal{\hfstyle}{style1}}{
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style1-i}}{ % Impar izquierdo
			\fancypagestyle{plain}{\fancyhead[LE,RO]{\nouppercase{\leftmark}}}
			\fancyhead[LE,RO]{\nouppercase{\leftmark}}
		}{
		\ifthenelse{\equal{\hfstyle}{style1-d}}{ % Impar derecho
			\fancypagestyle{plain}{\fancyhead[LO,RE]{\nouppercase{\leftmark}}}
			\fancyhead[LO,RE]{\nouppercase{\leftmark}}
		}{
		\ifthenelse{\equal{\hfstyle}{style2}}{
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style2-i}}{ % Impar izquierdo
			\fancypagestyle{plain}{\fancyhead[LE,RO]{\nouppercase{\leftmark}}}
			\fancyhead[LE,RO]{\nouppercase{\leftmark}}
		}{
		\ifthenelse{\equal{\hfstyle}{style2-d}}{ % Impar derecho
			\fancypagestyle{plain}{\fancyhead[LO,RE]{\nouppercase{\leftmark}}}
			\fancyhead[LO,RE]{\nouppercase{\leftmark}}
		}{
		\ifthenelse{\equal{\hfstyle}{style4}}{
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style5}}{
			\COREhfstyledefB
		}{
		\ifthenelse{\equal{\hfstyle}{style5-d}}{ % Impar derecho
			\COREhfstyledefB
		}{
		\ifthenelse{\equal{\hfstyle}{style5-i}}{ % Impar izquierdo
			\COREhfstyledefB
		}{
		\ifthenelse{\equal{\hfstyle}{style9}}{
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style9-d}}{ % Impar derecho
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style9-i}}{ % Impar izquierdo
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style10}}{
			\COREhfstyledefC
		}{
		\ifthenelse{\equal{\hfstyle}{style10-d}}{ % Impar derecho
			\COREhfstyledefC
		}{
		\ifthenelse{\equal{\hfstyle}{style10-i}}{ % Impar izquierdo
			\COREhfstyledefC
		}{
		\ifthenelse{\equal{\hfstyle}{style11}}{ % Similar a 1
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style14}}{ % Similar a 4
			\COREhfstyledefA
		}{
		\ifthenelse{\equal{\hfstyle}{style15}}{ % Similar a 1
			\COREhfstyledefA
		}{
			% No se encontró el header-footer, no hace nada
		}}}}}}}}}}}}}}}}}}}
	}{
	}
	
	% -------------------------------------------------------------------------
	% Estilo de títulos - restablece estilos por el índice
	% -------------------------------------------------------------------------
	\sectionfont{\color{\titlecolor} \fontsizetitle \styletitle \selectfont}
	\subsectionfont{\color{\subtitlecolor} \fontsizesubtitle \stylesubtitle \selectfont}
	\subsubsectionfont{\color{\subsubtitlecolor} \fontsizesubsubtitle \stylesubsubtitle \selectfont}
	\titleformat{\subsubsubsection}{\color{\ssstitlecolor} \normalfont \fontsizessstitle \stylessstitle}{\thesubsubsubsection}{1em}{}
	\titlespacing*{\subsubsubsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
	
	% -------------------------------------------------------------------------
	% Crea funciones para numerar objetos
	% -------------------------------------------------------------------------
	% Numeración de la sección en los objetos código fuente
	\ifthenelse{\equal{\showsectioncaptioncode}{none}}{
		\def\sectionobjectnumcode {}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sec}}{
		\def\sectionobjectnumcode {\thesection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssec}}{
		\def\sectionobjectnumcode {\thesubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{sssec}}{
		\def\sectionobjectnumcode {\thesubsubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{ssssec}}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\def\sectionobjectnumcode {\thesubsubsubsection}
		}{
			\def\sectionobjectnumcode {\thesubsubsubsection\sectioncaptiondelimiter}
		}
	}{
	\ifthenelse{\equal{\showsectioncaptioncode}{chap}}{
		\def\sectionobjectnumcode {\thechapter\sectioncaptiondelimiter}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptioncode}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Numeración de la sección en los objetos ecuaciones
	\ifthenelse{\equal{\showsectioncaptioneqn}{none}}{
		\def\sectionobjectnumeqn {}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{sec}}{
		\def\sectionobjectnumeqn {\thesection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssec}}{
		\def\sectionobjectnumeqn {\thesubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{sssec}}{
		\def\sectionobjectnumeqn {\thesubsubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{ssssec}}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\def\sectionobjectnumeqn {\thesubsubsubsection}
		}{
			\def\sectionobjectnumeqn {\thesubsubsubsection\sectioncaptiondelimiter}
		}
	}{
	\ifthenelse{\equal{\showsectioncaptioneqn}{chap}}{
		\def\sectionobjectnumeqn {\thechapter\sectioncaptiondelimiter}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptioneqn}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Numeración de la sección en los objetos figuras
	\ifthenelse{\equal{\showsectioncaptionfig}{none}}{
		\def\sectionobjectnumfig {}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{sec}}{
		\def\sectionobjectnumfig {\thesection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{ssec}}{
		\def\sectionobjectnumfig {\thesubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{sssec}}{
		\def\sectionobjectnumfig {\thesubsubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{ssssec}}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\def\sectionobjectnumfig {\thesubsubsubsection}
		}{
			\def\sectionobjectnumfig {\thesubsubsubsection\sectioncaptiondelimiter}
		}
	}{
	\ifthenelse{\equal{\showsectioncaptionfig}{chap}}{
		\def\sectionobjectnumfig {\thechapter\sectioncaptiondelimiter}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptionfig}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% Numeración de la sección en los objetos tablas
	\ifthenelse{\equal{\showsectioncaptiontab}{none}}{
		\def\sectionobjectnumtab {}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{sec}}{
		\def\sectionobjectnumtab {\thesection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{ssec}}{
		\def\sectionobjectnumtab {\thesubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{sssec}}{
		\def\sectionobjectnumtab {\thesubsubsection\sectioncaptiondelimiter}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{ssssec}}{
		\ifthenelse{\equal{\showdotaftersnum}{true}}{
			\def\sectionobjectnumtab {\thesubsubsubsection}
		}{
			\def\sectionobjectnumtab {\thesubsubsubsection\sectioncaptiondelimiter}
		}
	}{
	\ifthenelse{\equal{\showsectioncaptiontab}{chap}}{
		\def\sectionobjectnumtab {\thechapter\sectioncaptiondelimiter}
	}{
		\throwbadconfig{Valor configuracion incorrecto}{\showsectioncaptiontab}{none,chap,sec,ssec,sssec,ssssec}}}}}}
	}
	
	% -------------------------------------------------------------------------
	% Modifica numeración de objetos
	% -------------------------------------------------------------------------
	% Código fuente, incluir sección
	\ifthenelse{\equal{\captionnumcode}{arabic}}{
		\renewcommand{\thelstlisting}{\sectionobjectnumcode\arabic{lstlisting}}
	}{
	\ifthenelse{\equal{\captionnumcode}{alph}}{
		\renewcommand{\thelstlisting}{\sectionobjectnumcode\alph{lstlisting}}
	}{
	\ifthenelse{\equal{\captionnumcode}{Alph}}{
		\renewcommand{\thelstlisting}{\sectionobjectnumcode\Alph{lstlisting}}
	}{
	\ifthenelse{\equal{\captionnumcode}{roman}}{
		\renewcommand{\thelstlisting}{\sectionobjectnumcode\roman{lstlisting}}
	}{
	\ifthenelse{\equal{\captionnumcode}{Roman}}{
		\renewcommand{\thelstlisting}{\sectionobjectnumcode\Roman{lstlisting}}
	}{
		\throwbadconfig{Tipo numero codigo fuente desconocido}{\captionnumcode}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% Ecuaciones, incluir sección
	\ifthenelse{\equal{\captionnumequation}{arabic}}{
		\renewcommand{\theequation}{\sectionobjectnumeqn\arabic{equation}}
	}{
	\ifthenelse{\equal{\captionnumequation}{alph}}{
		\renewcommand{\theequation}{\sectionobjectnumeqn\alph{equation}}
	}{
	\ifthenelse{\equal{\captionnumequation}{Alph}}{
		\renewcommand{\theequation}{\sectionobjectnumeqn\Alph{equation}}
	}{
	\ifthenelse{\equal{\captionnumequation}{roman}}{
		\renewcommand{\theequation}{\sectionobjectnumeqn\roman{equation}}
	}{
	\ifthenelse{\equal{\captionnumequation}{Roman}}{
		\renewcommand{\theequation}{\sectionobjectnumeqn\Roman{equation}}
	}{
		\throwbadconfig{Tipo numero ecuacion desconocido}{\captionnumequation}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% Figuras, incluir sección
	\ifthenelse{\equal{\captionnumfigure}{arabic}}{
		\renewcommand{\thefigure}{\sectionobjectnumfig\arabic{figure}}
	}{
	\ifthenelse{\equal{\captionnumfigure}{alph}}{
		\renewcommand{\thefigure}{\sectionobjectnumfig\alph{figure}}
	}{
	\ifthenelse{\equal{\captionnumfigure}{Alph}}{
		\renewcommand{\thefigure}{\sectionobjectnumfig\Alph{figure}}
	}{
	\ifthenelse{\equal{\captionnumfigure}{roman}}{
		\renewcommand{\thefigure}{\sectionobjectnumfig\roman{figure}}
	}{
	\ifthenelse{\equal{\captionnumfigure}{Roman}}{
		\renewcommand{\thefigure}{\sectionobjectnumfig\Roman{figure}}
	}{
		\throwbadconfig{Tipo numero figura desconocido}{\captionnumfigure}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% Subfiguras, no usar secciones ya que son hijas de figura
	\ifthenelse{\equal{\captionnumsubfigure}{arabic}}{
		\renewcommand{\thesubfigure}{\arabic{subfigure}}
	}{
	\ifthenelse{\equal{\captionnumsubfigure}{alph}}{
		\renewcommand{\thesubfigure}{\alph{subfigure}}
	}{
	\ifthenelse{\equal{\captionnumsubfigure}{Alph}}{
		\renewcommand{\thesubfigure}{\Alph{subfigure}}
	}{
	\ifthenelse{\equal{\captionnumsubfigure}{roman}}{
		\renewcommand{\thesubfigure}{\roman{subfigure}}
	}{
	\ifthenelse{\equal{\captionnumsubfigure}{Roman}}{
		\renewcommand{\thesubfigure}{\Roman{subfigure}}
	}{
		\throwbadconfig{Tipo numero subfigura desconocido}{\captionnumsubfigure}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% Tablas, incluir sección
	\ifthenelse{\equal{\captionnumtable}{arabic}}{
		\renewcommand{\thetable}{\sectionobjectnumtab\arabic{table}}
	}{
	\ifthenelse{\equal{\captionnumtable}{alph}}{
		\renewcommand{\thetable}{\sectionobjectnumtab\alph{table}}
	}{
	\ifthenelse{\equal{\captionnumtable}{Alph}}{
		\renewcommand{\thetable}{\sectionobjectnumtab\Alph{table}}
	}{
	\ifthenelse{\equal{\captionnumtable}{roman}}{
		\renewcommand{\thetable}{\sectionobjectnumtab\roman{table}}
	}{
	\ifthenelse{\equal{\captionnumtable}{Roman}}{
		\renewcommand{\thetable}{\sectionobjectnumtab\Roman{table}}
	}{
		\throwbadconfig{Tipo numero tabla desconocido}{\captionnumtable}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% Subtablas, no incluir sección ya que son hijas de las tablas
	\ifthenelse{\equal{\captionnumsubtable}{arabic}}{
		\renewcommand{\thesubtable}{\arabic{subtable}}
	}{
	\ifthenelse{\equal{\captionnumsubtable}{alph}}{
		\renewcommand{\thesubtable}{\alph{subtable}}
	}{
	\ifthenelse{\equal{\captionnumsubtable}{Alph}}{
		\renewcommand{\thesubtable}{\Alph{subtable}}
	}{
	\ifthenelse{\equal{\captionnumsubtable}{roman}}{
		\renewcommand{\thesubtable}{\roman{subtable}}
	}{
	\ifthenelse{\equal{\captionnumsubtable}{Roman}}{
		\renewcommand{\thesubtable}{\Roman{subtable}}
	}{
		\throwbadconfig{Tipo numero subtabla desconocido}{\captionnumsubtable}{arabic,alph,Alph,roman,Roman}}}}}
	}
	
	% -------------------------------------------------------------------------
	% Se restablecen números de página y secciones
	% -------------------------------------------------------------------------
	% Se usa número de páginas en arábigo si es que se tenía activado los números romanos
	\ifthenelse{\equal{\predocpageromannumber}{true}}{
		\renewcommand{\thepage}{\arabic{page}}}{
	}
	
	% Reinicia número de página
	\ifthenelse{\equal{\predocresetpagenumber}{true}}{
		\setcounter{page}{1}}{
	}
	
	\setcounter{section}{0}
	\setcounter{footnote}{0}
	
	% -------------------------------------------------------------------------
	% Muestra los números de línea
	% -------------------------------------------------------------------------
	\ifthenelse{\equal{\showlinenumbers}{true}}{
		\linenumbers}{
	}
	
	% -------------------------------------------------------------------------
	% Establece el estilo de las sub-sub-sub-secciones
	% -------------------------------------------------------------------------
	\titleclass{\subsubsubsection}{straight}[\subsection]
	
}
